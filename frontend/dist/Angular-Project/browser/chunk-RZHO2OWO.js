import{a as ee,b as te}from"./chunk-OHDIIJHJ.js";import{a as F,r as K,s as Q}from"./chunk-VRDYXINS.js";import{$ as w,$c as X,Aa as B,Ab as T,Bc as Z,C as u,F as l,Lb as P,M as S,Ma as D,Mb as R,Oa as o,Ob as H,Pa as I,R as E,V as d,Wb as W,X as A,Xb as j,Yc as Y,_c as x,aa as p,ab as z,ac as $,bb as O,da as f,dc as U,ea as b,ec as G,fa as C,gc as V,ia as h,lb as v,na as c,oa as i,oc as q,pa as a,qa as m,rb as L,sb as _,vb as N,vc as J,yc as k,za as M}from"./chunk-DBZ4JVQV.js";var ie="mat-badge-content",de=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=f({type:r,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,s){},styles:[`.mat-badge{position:relative}.mat-badge.mat-badge{overflow:visible}.mat-badge-content{position:absolute;text-align:center;display:inline-block;transition:transform 200ms ease-in-out;transform:scale(0.6);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box;pointer-events:none;background-color:var(--mat-badge-background-color, var(--mat-sys-error));color:var(--mat-badge-text-color, var(--mat-sys-on-error));font-family:var(--mat-badge-text-font, var(--mat-sys-label-small-font));font-weight:var(--mat-badge-text-weight, var(--mat-sys-label-small-weight));border-radius:var(--mat-badge-container-shape, var(--mat-sys-corner-full))}.mat-badge-above .mat-badge-content{bottom:100%}.mat-badge-below .mat-badge-content{top:100%}.mat-badge-before .mat-badge-content{right:100%}[dir=rtl] .mat-badge-before .mat-badge-content{right:auto;left:100%}.mat-badge-after .mat-badge-content{left:100%}[dir=rtl] .mat-badge-after .mat-badge-content{left:auto;right:100%}@media(forced-colors: active){.mat-badge-content{outline:solid 1px;border-radius:0}}.mat-badge-disabled .mat-badge-content{background-color:var(--mat-badge-disabled-state-background-color, color-mix(in srgb, var(--mat-sys-error) 38%, transparent));color:var(--mat-badge-disabled-state-text-color, var(--mat-sys-on-error))}.mat-badge-hidden .mat-badge-content{display:none}.ng-animate-disabled .mat-badge-content,.mat-badge-content._mat-animation-noopable{transition:none}.mat-badge-content.mat-badge-active{transform:none}.mat-badge-small .mat-badge-content{width:var(--mat-badge-legacy-small-size-container-size, unset);height:var(--mat-badge-legacy-small-size-container-size, unset);min-width:var(--mat-badge-small-size-container-size, 6px);min-height:var(--mat-badge-small-size-container-size, 6px);line-height:var(--mat-badge-small-size-line-height, 6px);padding:var(--mat-badge-small-size-container-padding, 0);font-size:var(--mat-badge-small-size-text-size, 0);margin:var(--mat-badge-small-size-container-offset, -6px 0)}.mat-badge-small.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-small-size-container-overlap-offset, -6px)}.mat-badge-medium .mat-badge-content{width:var(--mat-badge-legacy-container-size, unset);height:var(--mat-badge-legacy-container-size, unset);min-width:var(--mat-badge-container-size, 16px);min-height:var(--mat-badge-container-size, 16px);line-height:var(--mat-badge-line-height, 16px);padding:var(--mat-badge-container-padding, 0 4px);font-size:var(--mat-badge-text-size, var(--mat-sys-label-small-size));margin:var(--mat-badge-container-offset, -12px 0)}.mat-badge-medium.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-container-overlap-offset, -12px)}.mat-badge-large .mat-badge-content{width:var(--mat-badge-legacy-large-size-container-size, unset);height:var(--mat-badge-legacy-large-size-container-size, unset);min-width:var(--mat-badge-large-size-container-size, 16px);min-height:var(--mat-badge-large-size-container-size, 16px);line-height:var(--mat-badge-large-size-line-height, 16px);padding:var(--mat-badge-large-size-container-padding, 0 4px);font-size:var(--mat-badge-large-size-text-size, var(--mat-sys-label-small-size));margin:var(--mat-badge-large-size-container-offset, -12px 0)}.mat-badge-large.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-large-size-container-overlap-offset, -12px)}
`],encapsulation:2,changeDetection:0})}return r})(),ne=(()=>{class r{_ngZone=l(A);_elementRef=l(E);_ariaDescriber=l(V);_renderer=l(w);_animationsDisabled=q();_idGenerator=l(G);get color(){return this._color}set color(e){this._setColor(e),this._color=e}_color="primary";overlap=!0;disabled;position="above after";get content(){return this._content}set content(e){this._updateRenderedContent(e)}_content;get description(){return this._description}set description(e){this._updateDescription(e)}_description;size="medium";hidden;_badgeElement;_inlineBadgeDescription;_isInitialized=!1;_interactivityChecker=l($);_document=l(S);constructor(){let e=l(W);e.load(de),e.load(j)}isAbove(){return this.position.indexOf("below")===-1}isAfter(){return this.position.indexOf("before")===-1}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&(this._renderer.destroyNode(this._badgeElement),this._inlineBadgeDescription?.remove()),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_isHostInteractive(){return this._interactivityChecker.isFocusable(this._elementRef.nativeElement,{ignoreVisibility:!0})}_createBadgeElement(){let e=this._renderer.createElement("span"),t="mat-badge-active";return e.setAttribute("id",this._idGenerator.getId("mat-badge-content-")),e.setAttribute("aria-hidden","true"),e.classList.add(ie),this._animationsDisabled&&e.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(e),typeof requestAnimationFrame=="function"&&!this._animationsDisabled?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{e.classList.add(t)})}):e.classList.add(t),e}_updateRenderedContent(e){let t=`${e??""}`.trim();this._isInitialized&&t&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=t),this._content=t}_updateDescription(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),(!e||this._isHostInteractive())&&this._removeInlineDescription(),this._description=e,this._isHostInteractive()?this._ariaDescriber.describe(this._elementRef.nativeElement,e):this._updateInlineDescription()}_updateInlineDescription(){this._inlineBadgeDescription||(this._inlineBadgeDescription=this._document.createElement("span"),this._inlineBadgeDescription.classList.add("cdk-visually-hidden")),this._inlineBadgeDescription.textContent=this.description,this._badgeElement?.appendChild(this._inlineBadgeDescription)}_removeInlineDescription(){this._inlineBadgeDescription?.remove(),this._inlineBadgeDescription=void 0}_setColor(e){let t=this._elementRef.nativeElement.classList;t.remove(`mat-badge-${this._color}`),e&&t.add(`mat-badge-${e}`)}_clearExistingBadges(){let e=this._elementRef.nativeElement.querySelectorAll(`:scope > .${ie}`);for(let t of Array.from(e))t!==this._badgeElement&&t.remove()}static \u0275fac=function(t){return new(t||r)};static \u0275dir=C({type:r,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(t,s){t&2&&D("mat-badge-overlap",s.overlap)("mat-badge-above",s.isAbove())("mat-badge-below",!s.isAbove())("mat-badge-before",!s.isAfter())("mat-badge-after",s.isAfter())("mat-badge-small",s.size==="small")("mat-badge-medium",s.size==="medium")("mat-badge-large",s.size==="large")("mat-badge-hidden",s.hidden||!s.content)("mat-badge-disabled",s.disabled)},inputs:{color:[0,"matBadgeColor","color"],overlap:[2,"matBadgeOverlap","overlap",v],disabled:[2,"matBadgeDisabled","disabled",v],position:[0,"matBadgePosition","position"],content:[0,"matBadge","content"],description:[0,"matBadgeDescription","description"],size:[0,"matBadgeSize","size"],hidden:[2,"matBadgeHidden","hidden",v]}})}return r})(),ae=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=b({type:r});static \u0275inj=u({imports:[U,k,k]})}return r})();var oe=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=b({type:r});static \u0275inj=u({imports:[T,x,ae,Z,H,X,Y,Q]})};function ge(r,n){r&1&&m(0,"a",23)}function pe(r,n){r&1&&m(0,"a",24)}function fe(r,n){r&1&&m(0,"a",25)}function he(r,n){r&1&&m(0,"a",26)}var re=class r{constructor(n,e,t,s,g){this.cartService=n;this.authService=e;this.authorService=t;this.router=s;this.snackBar=g}isAuthor=!1;isLoadingAuthor=!1;isAuthenticated=!1;isAdmin=!1;socket=null;ngOnInit(){this.updateAuthStatus(),this.checkAdminStatus(),(localStorage.getItem("authToken")||localStorage.getItem("auth_token"))&&this.cartService.getCart().subscribe({error:e=>{console.log("Could not load cart:",e.status)}}),this.isAuthenticated&&this.checkAuthorStatus(),this.authService.currentUser$.subscribe(()=>{this.updateAuthStatus(),this.checkAdminStatus(),this.isAuthenticated?this.checkAuthorStatus():(this.isAuthor=!1,this.isAdmin=!1)}),window.addEventListener("storage",e=>{(e.key==="authToken"||e.key==="auth_token"||e.key==="user")&&(this.updateAuthStatus(),this.checkAdminStatus(),this.isAuthenticated?this.checkAuthorStatus():(this.isAuthor=!1,this.isAdmin=!1))}),this.initWebSocket()}ngOnDestroy(){this.socket&&(this.socket.close(),this.socket=null)}initWebSocket(){try{let n=window.location.protocol==="https:"?"wss:":"ws:",e=window.location.host;this.socket=new WebSocket(`${n}//${e}/ws`),this.socket.onopen=t=>{console.log("WebSocket connection established.")},this.socket.onmessage=t=>{console.log("Message received from server:",t.data);try{let s=JSON.parse(t.data);if(s.type==="NEW_BOOK"){let g=s.payload;this.showNewBookNotification(g)}s.type==="WELCOME"&&console.log("Welcome message:",s.message)}catch(s){console.error("Error parsing WebSocket message:",s)}},this.socket.onclose=t=>{console.log("WebSocket connection closed."),setTimeout(()=>{(!this.socket||this.socket.readyState===WebSocket.CLOSED)&&this.initWebSocket()},5e3)},this.socket.onerror=t=>{console.error("WebSocket Error:",t)}}catch(n){console.error("Failed to initialize WebSocket:",n)}}showNewBookNotification(n){let e=n.title||"New Book",t=n.author?.name||n.author||n.authors?.[0]?.name||"Unknown Author",s=n._id||n.id,g=`New Book Published: "${e}" by ${t}`;this.snackBar.open(g,"View",{duration:5e3,horizontalPosition:"right",verticalPosition:"top",panelClass:["new-book-notification"]}).onAction().subscribe(()=>{s&&this.router.navigate(["/book",s])})}updateAuthStatus(){let n=localStorage.getItem("authToken"),e=localStorage.getItem("auth_token");this.isAuthenticated=!!(n||e)}checkAuthorStatus(){this.isLoadingAuthor=!0,this.authorService.getMyAuthorProfile().subscribe({next:n=>{this.isAuthor=n&&n.status==="approved",this.isLoadingAuthor=!1},error:n=>{this.isAuthor=!1,this.isLoadingAuthor=!1}})}checkAdminStatus(){let n=localStorage.getItem("user");if(n)try{let e=JSON.parse(n);this.isAdmin=e?.role?.toLowerCase()==="admin"}catch{this.isAdmin=!1}else{let e=localStorage.getItem("authToken")||localStorage.getItem("auth_token");if(e)try{let t=JSON.parse(atob(e.split(".")[1]));this.isAdmin=t?.role?.toLowerCase()==="admin"}catch{this.isAdmin=!1}else this.isAdmin=!1}}scrollToShop(){this.router.url==="/"||this.router.url===""?setTimeout(()=>{let n=document.getElementById("all-books");n&&n.scrollIntoView({behavior:"smooth",block:"start"})},100):this.router.navigate(["/"]).then(()=>{setTimeout(()=>{let n=document.getElementById("all-books");n&&n.scrollIntoView({behavior:"smooth",block:"start"})},300)})}static \u0275fac=function(e){return new(e||r)(p(ee),p(F),p(te),p(P),p(K))};static \u0275cmp=f({type:r,selectors:[["app-header"]],standalone:!1,decls:40,vars:7,consts:[[1,"border-bottom","small","text-muted"],[1,"container","d-flex","justify-content-between","py-1"],[1,"fs-6"],[1,"d-none","d-md-block","fs-6"],["href","#",1,"text-decoration-underline"],[1,"py-3"],[1,"container","d-flex","align-items-center"],["href","/",1,"d-flex","align-items-center","text-decoration-none","me-4"],[1,"logo-box","me-2"],[1,"fs-2","fw-bold"],[1,"text-dark"],[1,"brand"],[1,"d-none","d-lg-flex","align-items-center","justify-content-center","gap-5","flex-grow-1"],["routerLink","/",1,"nav-link","px-2","fs-5","fw-semibold"],["routerLink","/about",1,"nav-link","px-2","fs-5","fw-semibold"],[1,"nav-link","px-2","fs-5","fw-semibold",2,"cursor","pointer",3,"click"],["routerLink","/contact",1,"nav-link","px-2","fs-5","fw-semibold"],[1,"ms-auto","d-flex","align-items-center","gap-3"],["class","bi bi-speedometer2 fs-4 text-dark","style","cursor: pointer; text-decoration: none;","title","Dashboard","routerLink","/dashboard",4,"ngIf"],["class","bi bi-person-badge fs-4 text-dark","style","cursor: pointer; text-decoration: none;","title","Author Profile","routerLink","/author-profile",4,"ngIf"],["class","bi bi-person-circle fs-4 text-dark","style","cursor: pointer; text-decoration: none;","title","User Profile","routerLink","/account/user-profile",4,"ngIf"],["class","bi bi-person fs-4 text-dark","style","cursor: pointer; text-decoration: none;","title","Login","routerLink","/login",4,"ngIf"],["mat-icon-button","","routerLink","/cart","matBadgeColor","warn",3,"matBadge"],["title","Dashboard","routerLink","/dashboard",1,"bi","bi-speedometer2","fs-4","text-dark",2,"cursor","pointer","text-decoration","none"],["title","Author Profile","routerLink","/author-profile",1,"bi","bi-person-badge","fs-4","text-dark",2,"cursor","pointer","text-decoration","none"],["title","User Profile","routerLink","/account/user-profile",1,"bi","bi-person-circle","fs-4","text-dark",2,"cursor","pointer","text-decoration","none"],["title","Login","routerLink","/login",1,"bi","bi-person","fs-4","text-dark",2,"cursor","pointer","text-decoration","none"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),o(3,"Need any help? Call us "),i(4,"strong"),o(5,"01093989570"),a()(),i(6,"div",3),o(7," sale discount "),i(8,"a",4),o(9,"Shop Now"),a()(),i(10,"div",2),o(11,"2-3 business days delivery & free returns"),a()()(),i(12,"header",5)(13,"div",6)(14,"a",7)(15,"div",8),o(16,"B"),a(),i(17,"span",9)(18,"span",10),o(19,"ook"),a(),i(20,"span",11),o(21,"ly"),a()()(),i(22,"nav",12)(23,"a",13),o(24,"HOME"),a(),i(25,"a",14),o(26,"ABOUT"),a(),i(27,"a",15),M("click",function(g){return t.scrollToShop(),g.preventDefault()}),o(28,"SHOP"),a(),i(29,"a",16),o(30,"CONTACT"),a()(),i(31,"div",17),h(32,ge,1,0,"a",18)(33,pe,1,0,"a",19)(34,fe,1,0,"a",20)(35,he,1,0,"a",21),i(36,"button",22),z(37,"async"),i(38,"mat-icon"),o(39,"shopping_cart"),a()()()()()),e&2&&(d(32),c("ngIf",t.isAdmin),d(),c("ngIf",t.isAuthor&&!t.isLoadingAuthor),d(),c("ngIf",t.isAuthenticated),d(),c("ngIf",!t.isAuthenticated),d(),c("matBadge",O(37,5,t.cartService.cartCount$)))},dependencies:[_,x,ne,J,R,N],styles:["[_ngcontent-%COMP%]:root{--brand:#dc3545}.brand[_ngcontent-%COMP%]{color:var(--brand)}.logo-box[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:8px;display:grid;place-items:center;background:var(--brand);color:#fff;font-weight:800}.nav-link[_ngcontent-%COMP%]{color:#222}.nav-link[_ngcontent-%COMP%]:hover{color:var(--brand)}.bi-person-badge[_ngcontent-%COMP%]{transition:color .2s ease}.bi-person-badge[_ngcontent-%COMP%]:hover{color:var(--brand)!important}.bi-person-circle[_ngcontent-%COMP%], .bi-person[_ngcontent-%COMP%], .bi-speedometer2[_ngcontent-%COMP%]{transition:color .2s ease}.bi-person-circle[_ngcontent-%COMP%]:hover, .bi-person[_ngcontent-%COMP%]:hover, .bi-speedometer2[_ngcontent-%COMP%]:hover{color:var(--brand)!important}  .new-book-notification{background-color:#198754!important;color:#fff!important;font-weight:500}  .new-book-notification .mat-mdc-snack-bar-action{color:#fff!important;font-weight:600;text-decoration:underline}  .new-book-notification .mat-mdc-snack-bar-action:hover{opacity:.8}"]})};function ue(r,n){if(r&1&&(i(0,"li")(1,"a",19),o(2),a()()),r&2){let e=n.$implicit;d(2),I(e.name)}}function be(r,n){if(r&1&&(i(0,"div",16)(1,"h6",17),o(2,"Categories"),a(),i(3,"ul",28),h(4,ue,3,1,"li",29),a()()),r&2){let e=B();d(4),c("ngForOf",e.categories)}}var se=class r{categories=[];static \u0275fac=function(e){return new(e||r)};static \u0275cmp=f({type:r,selectors:[["app-footer"]],inputs:{categories:"categories"},standalone:!1,decls:73,vars:1,consts:[[1,"border-top","mt-4"],[1,"container","py-5"],[1,"row","g-4"],[1,"col-12","col-lg-4"],[1,"d-flex","align-items-center","mb-3"],[1,"logo-box","me-2"],[1,"fs-3","fw-bold"],[1,"text-dark"],[1,"brand"],[1,"text-muted","mb-3","fs-6"],[1,"d-flex","gap-3","text-muted","fs-4"],["href","#",1,"bi","bi-facebook","text-dark"],["href","#",1,"bi","bi-instagram","text-dark"],["href","#",1,"bi","bi-twitter-x","text-dark"],["href","#",1,"bi","bi-linkedin","text-dark"],["href","#",1,"bi","bi-youtube","text-dark"],[1,"col-6","col-lg-3"],[1,"mb-3","fs-5"],[1,"list-unstyled","text-muted"],["href","#",1,"text-reset","text-decoration-none","fs-6"],["class","col-6 col-lg-3",4,"ngIf"],[1,"col-12","col-lg-2"],[1,"text-muted"],[1,"fs-6"],["href","mailto:12alidawood@gmail.com",1,"text-reset","fs-6"],["href","tel:+01093989570",1,"text-reset","fs-6"],[1,"text-center","pt-3","border-top","border-secondary","small","text-muted"],[1,"mb-0"],[1,"list-unstyled","text-muted","mb-0"],[4,"ngFor","ngForOf"]],template:function(e,t){e&1&&(i(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),o(6,"B"),a(),i(7,"span",6)(8,"span",7),o(9,"ook"),a(),i(10,"span",8),o(11,"ly"),a()()(),i(12,"p",9),o(13," Nisi, purus vitae, ultrices nunc. Sit ac sit suscipit hendrerit. Gravida massa volutpat aenean odio erat nullam fringilla. "),a(),i(14,"div",10),m(15,"a",11)(16,"a",12)(17,"a",13)(18,"a",14)(19,"a",15),a()(),i(20,"div",16)(21,"h6",17),o(22,"Quick Links"),a(),i(23,"ul",18)(24,"li")(25,"a",19),o(26,"Home"),a()(),i(27,"li")(28,"a",19),o(29,"About"),a()(),i(30,"li")(31,"a",19),o(32,"Shop"),a()(),i(33,"li")(34,"a",19),o(35,"Contact"),a()()()(),i(36,"div",16)(37,"h6",17),o(38,"Help & Info Help"),a(),i(39,"ul",18)(40,"li")(41,"a",19),o(42,"Track Your Order"),a()(),i(43,"li")(44,"a",19),o(45,"Returns Policies"),a()(),i(46,"li")(47,"a",19),o(48,"Shipping + Delivery"),a()(),i(49,"li")(50,"a",19),o(51,"Contact Us"),a()(),i(52,"li")(53,"a",19),o(54,"Faqs"),a()()()(),h(55,be,5,1,"div",20),i(56,"div",21)(57,"h6",17),o(58,"Contact Us"),a(),i(59,"div",22)(60,"div",23),o(61,"Do you have any queries or suggestions?"),a(),i(62,"a",24),o(63,"12alidawood@gmail.com"),a(),m(64,"br")(65,"br"),i(66,"div",23),o(67,"If you need support? Just give us a call."),a(),i(68,"a",25),o(69,"01093989570"),a()()()(),i(70,"div",26)(71,"p",27),o(72,"\xA9 2025 Bookly. All Rights Reserved."),a()()()()),e&2&&(d(55),c("ngIf",t.categories.length>0))},dependencies:[L,_],styles:["[_ngcontent-%COMP%]:root{--brand:#dc3545}.brand[_ngcontent-%COMP%]{color:var(--brand)}.logo-box[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:8px;display:grid;place-items:center;background:var(--brand);color:#fff;font-weight:800}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--brand)}"]})};export{oe as a,re as b,se as c};
