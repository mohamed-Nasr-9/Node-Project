import{a as Ge}from"./chunk-A3XQ6QBT.js";import{a as ze}from"./chunk-XYYWDBOZ.js";import{a as Be,b as je}from"./chunk-OHDIIJHJ.js";import{a as K,r as Fe,s as Ue}from"./chunk-VRDYXINS.js";import{a as $e,b as Ye}from"./chunk-AYZZRQ42.js";import{a as Je,b as Ke,c as Qe,d as Xe,e as et}from"./chunk-C7QE74CK.js";import{a as Ne,b as Re}from"./chunk-TPLDUVTZ.js";import{a as tt,b as it}from"./chunk-X6XPXAWX.js";import{a as ae,b as se,c as He,d as le,f as de,g as Ze,h as me,i as We}from"./chunk-L7GH46DH.js";import{a as O,b as De}from"./chunk-M7YYPVK7.js";import{$c as qe,Aa as m,Ab as Me,Ac as A,B as N,Bc as Te,C as R,E as L,Ec as Q,Gb as H,Gc as P,H as g,I as v,Ic as X,Jb as Ae,Jc as ee,Ka as Pe,Lb as Z,Ma as E,Mb as W,Mc as te,Na as ve,Oa as o,Ob as he,Oc as ie,Pa as w,Pb as J,Pc as re,Qa as x,Ra as xe,Sa as j,U as ge,V as a,Wa as ye,Xc as ne,Ya as G,Yc as Le,Zc as Ve,_c as oe,a as U,aa as S,ab as $,cb as Y,da as I,ea as B,eb as we,f as be,ia as c,k as Ce,na as l,oa as n,pa as r,qa as p,qb as Se,rb as ke,sb as M,ub as Ee,vc as Oe,wa as z,xa as C,xb as Ie,y as q,za as f}from"./chunk-DBZ4JVQV.js";var T=class t{constructor(i){this.http=i}apiUrl=`${J.apiUrl}/profile`;requestRestoreAccount(i){return this.http.post(`${this.apiUrl}/request-restore`,{email:i})}restoreAccount(i){return this.http.get(`${this.apiUrl}/restore/${i}`)}static \u0275fac=function(e){return new(e||t)(L(H))};static \u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"})};function xt(t,i){t&1&&(n(0,"mat-error"),o(1," Email is required. "),r())}function ht(t,i){t&1&&(n(0,"mat-error"),o(1," Enter a valid email. "),r())}function bt(t,i){t&1&&(n(0,"span"),p(1,"i",22),o(2," Send Restore Link "),r())}function Ct(t,i){t&1&&(n(0,"span"),p(1,"span",23),o(2," Sending... "),r())}function Pt(t,i){t&1&&p(0,"div",31)}function yt(t,i){if(t&1&&(n(0,"div",32),o(1),r()),t&2){let e=m(2);a(),x(" ",e.message," ")}}function wt(t,i){t&1&&(n(0,"div",32),o(1," Processing, please wait... "),r())}function St(t,i){if(t&1){let e=C();n(0,"div",24),p(1,"div",25),n(2,"div",26)(3,"button",27),f("click",function(){g(e);let d=m();return v(d.closeMessage())}),o(4,"\xD7"),r(),n(5,"div",28),c(6,Pt,1,0,"div",29)(7,yt,2,1,"div",30)(8,wt,2,0,"div",30),r()()()}if(t&2){let e=m();a(2),E("error",e.isError)("success",!e.isError&&!e.isLoading),a(4),l("ngIf",e.isLoading),a(),l("ngIf",!e.isLoading),a(),l("ngIf",e.isLoading)}}var ce=class t{constructor(i,e){this.fb=i;this.restoreAccountService=e;this.restoreAccountForm=this.fb.group({email:["",[P.required,P.email]]})}restoreAccountForm;isLoading=!1;message="";isError=!1;messageTimer=null;ngOnDestroy(){this.clearMessageTimer()}clearMessageTimer(){this.messageTimer&&(clearTimeout(this.messageTimer),this.messageTimer=null)}startAutoCloseTimer(){this.clearMessageTimer(),this.message&&!this.isLoading&&(this.messageTimer=setTimeout(()=>{this.closeMessage()},4e3))}closeMessage(){this.clearMessageTimer(),this.message="",this.isError=!1,this.isLoading=!1}onSubmit(){if(!this.restoreAccountForm.valid){this.restoreAccountForm.markAllAsTouched();return}this.isLoading=!0,this.isError=!1,this.message="";let i=this.restoreAccountForm.get("email")?.value;this.restoreAccountService.requestRestoreAccount(i).subscribe({next:e=>{this.message=e.message||"Restore link sent to your email",this.isLoading=!1,this.isError=!1,this.startAutoCloseTimer()},error:e=>{console.error("Request restore account error:",e);let s="Failed to send restore link";e?.error?.error?s=e.error.error:e?.error?.message?s=e.error.message:e?.message&&(s=e.message),e?.status===400?s=e?.error?.error||"Invalid request. Please check your email.":e?.status===404?s=e?.error?.error||"User not found with this email.":e?.status===500&&(s=e?.error?.error||"Server error. Please try again later."),this.message=s,this.isError=!0,this.isLoading=!1,this.startAutoCloseTimer()}})}static \u0275fac=function(e){return new(e||t)(S(ne),S(T))};static \u0275cmp=I({type:t,selectors:[["app-request-restore-account"]],standalone:!1,decls:36,vars:7,consts:[[1,"restore-section","py-5"],[1,"container"],[1,"row","justify-content-center"],[1,"col-12","col-md-8","col-lg-6","col-xl-5"],[1,"restore-card","shadow-lg"],[1,"restore-card-header"],[1,"logo-box","mb-3"],[1,"restore-title"],[1,"restore-subtitle"],[1,"restore-form",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","type","email","formControlName","email","placeholder","Enter your email"],["matPrefix",""],[4,"ngIf"],["mat-raised-button","","color","primary","type","submit",1,"restore-btn","w-100",3,"disabled"],[1,"divider","my-4"],[1,"switch-text","text-center"],["routerLink","/login",1,"login-link"],[1,"text-center","mt-3"],["routerLink","/",1,"home-link"],[1,"bi","bi-arrow-left","me-2"],["class","message-box",4,"ngIf"],[1,"bi","bi-envelope-paper","me-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"message-box"],[1,"backdrop"],[1,"box-inner"],["type","button",1,"close-btn",3,"click"],[1,"row"],["class","spinner",4,"ngIf"],["class","text",4,"ngIf"],[1,"spinner"],[1,"text"]],template:function(e,s){if(e&1&&(n(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-card",4)(5,"div",5)(6,"div",6),o(7,"B"),r(),n(8,"h2",7),o(9,"Restore Your Account"),r(),n(10,"p",8),o(11,"Enter your email address to receive a restore link for your deleted account"),r()(),n(12,"form",9),f("ngSubmit",function(){return s.onSubmit()}),n(13,"mat-form-field",10)(14,"mat-label"),o(15,"Email Address"),r(),p(16,"input",11),n(17,"mat-icon",12),o(18,"email"),r(),c(19,xt,2,0,"mat-error",13)(20,ht,2,0,"mat-error",13),r(),n(21,"button",14),c(22,bt,3,0,"span",13)(23,Ct,3,0,"span",13),r(),n(24,"div",15)(25,"span"),o(26,"or"),r()(),n(27,"p",16),o(28," Remember your password? "),n(29,"a",17),o(30,"Login here"),r()(),n(31,"div",18)(32,"a",19),p(33,"i",20),o(34," Back to Home "),r()()()()()()()(),c(35,St,9,7,"div",21)),e&2){let d,_;a(12),l("formGroup",s.restoreAccountForm),a(7),l("ngIf",(d=s.restoreAccountForm.get("email"))==null||d.errors==null?null:d.errors.required),a(),l("ngIf",(_=s.restoreAccountForm.get("email"))==null||_.errors==null?null:_.errors.email),a(),l("disabled",s.isLoading||!s.restoreAccountForm.valid),a(),l("ngIf",!s.isLoading),a(),l("ngIf",s.isLoading),a(12),l("ngIf",s.isLoading||s.message)}},dependencies:[M,W,te,Q,X,ee,ie,re,O,A,oe,de,ae,se,le,me],styles:['[_ngcontent-%COMP%]:root{--brand: #dc3545;--brand-hover: #c82333;--text-dark: #2c3e50;--text-muted: #6c757d;--bg-light: #f8f9fa}.restore-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#fff,#f8f9fa);min-height:calc(100vh - 200px);display:flex;align-items:center;padding:4rem 0}.restore-card[_ngcontent-%COMP%]{border-radius:20px!important;border:none!important;overflow:hidden;background:#fff;position:relative}.restore-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--brand),#ff6b6b,var(--brand));background-size:200% 100%;animation:_ngcontent-%COMP%_gradientShift 3s ease infinite}@keyframes _ngcontent-%COMP%_gradientShift{0%,to{background-position:0% 50%}50%{background-position:100% 50%}}.restore-card-header[_ngcontent-%COMP%]{text-align:center;padding:2rem 2rem 1rem;background:linear-gradient(135deg,#dc35450d,#fff)}.logo-box[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:12px;display:inline-flex;align-items:center;justify-content:center;background:var(--brand);color:#fff;font-weight:800;font-size:1.5rem;margin:0 auto;box-shadow:0 4px 12px #dc35454d;transition:transform .3s ease,box-shadow .3s ease}.logo-box[_ngcontent-%COMP%]:hover{transform:translateY(-2px) scale(1.05);box-shadow:0 6px 16px #dc354566}.restore-title[_ngcontent-%COMP%]{color:var(--text-dark);font-size:2rem;font-weight:700;margin:1rem 0 .5rem;letter-spacing:-.5px}.restore-subtitle[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.95rem;margin:0}.restore-form[_ngcontent-%COMP%]{padding:2rem}  .mat-mdc-form-field{width:100%;margin-bottom:1rem}  .mat-mdc-text-field-wrapper{background-color:#f8f9fa;border-radius:8px}  .mat-mdc-form-field-focus-overlay{background-color:transparent}  .mat-mdc-form-field.mat-focused .mat-mdc-text-field-wrapper{background-color:#fff}  .mat-mdc-form-field .mat-mdc-text-field-wrapper .mat-mdc-form-field-flex{padding:0 12px}  .mat-mdc-form-field .mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control input{padding:12px 0}  .mat-mdc-form-field-subscript-wrapper{margin-top:4px}.restore-btn[_ngcontent-%COMP%]{height:48px!important;font-size:1rem!important;font-weight:600!important;border-radius:12px!important;text-transform:none!important;letter-spacing:.5px;transition:all .3s ease!important;box-shadow:0 4px 12px #dc35454d!important}.restore-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 16px #dc354566!important}.restore-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.restore-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.divider[_ngcontent-%COMP%]{position:relative;text-align:center;color:var(--text-muted);font-size:.9rem}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#e9ecef}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;background:#fff;padding:0 1rem}.login-link[_ngcontent-%COMP%]{color:var(--brand);text-decoration:none;font-weight:600;transition:color .2s ease}.login-link[_ngcontent-%COMP%]:hover{color:var(--brand-hover);text-decoration:underline}.home-link[_ngcontent-%COMP%]{color:var(--text-muted);text-decoration:none;font-size:.9rem;transition:color .2s ease;display:inline-flex;align-items:center}.home-link[_ngcontent-%COMP%]:hover{color:var(--brand)}.switch-text[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.95rem;margin:0}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem;border-width:.15em}.message-box[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:1000;display:flex;align-items:center;justify-content:center;padding:20px}.message-box[_ngcontent-%COMP%]   .box-inner[_ngcontent-%COMP%]{position:relative;width:100%;max-width:420px;background:#fff;border:2px solid #e9ecef;border-radius:16px;box-shadow:0 20px 40px #00000026;padding:32px 24px;text-align:center;z-index:1}.message-box[_ngcontent-%COMP%]   .box-inner.success[_ngcontent-%COMP%]{border-color:#86efac}.message-box[_ngcontent-%COMP%]   .box-inner.error[_ngcontent-%COMP%]{border-color:#fecaca}.message-box[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px}.message-box[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:var(--text-dark);line-height:1.5}.message-box[_ngcontent-%COMP%]   .box-inner.error[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:#dc2626}.message-box[_ngcontent-%COMP%]   .box-inner.success[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:#16a34a}.message-box[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;background:transparent;border:none;cursor:pointer;font-size:24px;line-height:1;color:var(--text-muted);padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s}.message-box[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:var(--brand);background:#f3f4f6}.spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid #f8d7da;border-top-color:var(--brand);border-radius:50%;animation:_ngcontent-%COMP%_spin .9s linear infinite;margin:0 auto}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.message-box[_ngcontent-%COMP%]   .backdrop[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0006;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}@media (max-width: 768px){.restore-section[_ngcontent-%COMP%]{padding:2rem 0;min-height:calc(100vh - 150px)}.restore-card-header[_ngcontent-%COMP%]{padding:1.5rem 1.5rem 1rem}.restore-form[_ngcontent-%COMP%]{padding:1.5rem}.restore-title[_ngcontent-%COMP%]{font-size:1.75rem}.logo-box[_ngcontent-%COMP%]{width:50px;height:50px;font-size:1.25rem}}@media (max-width: 576px){.restore-card-header[_ngcontent-%COMP%]{padding:1.25rem 1rem .75rem}.restore-form[_ngcontent-%COMP%]{padding:1.25rem}.restore-title[_ngcontent-%COMP%]{font-size:1.5rem}}']})};var _e=class t{constructor(i,e){this.http=i;this.authService=e}API_URL=J.apiUrl+"/download";downloadBook(i){let e=this.authService.getAuthHeaders();return this.http.get(`${this.API_URL}/book/${i}`,{headers:e,responseType:"blob"})}static \u0275fac=function(e){return new(e||t)(L(H),L(K))};static \u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"})};var It=()=>({field:"FirstName",label:"First Name"}),Mt=()=>({field:"LastName",label:"Last Name"}),At=()=>({field:"email",label:"Email",type:"email"});function Ot(t,i){t&1&&(n(0,"h2",23),o(1,"User Profile"),r())}function Tt(t,i){t&1&&(n(0,"h2",23),o(1,"My Cart"),r())}function Ft(t,i){t&1&&(n(0,"h2",23),o(1,"My Orders"),r())}function Ut(t,i){t&1&&(n(0,"h2",23),o(1,"My Library"),r())}function Lt(t,i){t&1&&(n(0,"h2",23),o(1,"Become Author"),r())}function Vt(t,i){t&1&&(n(0,"h2",23),o(1,"My Addresses"),r())}function Dt(t,i){if(t&1){let e=C();n(0,"button",40),f("click",function(){g(e);let d=m().field,_=m(4);return v(_.startEditField(d))}),n(1,"mat-icon"),o(2,"edit"),r()()}if(t&2){let e=m().label;l("title",ye("Edit ",e))}}function qt(t,i){t&1&&(n(0,"span",43),o(1,"\u2713 Verified"),r())}function Nt(t,i){t&1&&(n(0,"span",44),o(1,"\u26A0 Unverified"),r())}function Rt(t,i){if(t&1&&(n(0,"div",32),o(1),c(2,qt,2,0,"span",41)(3,Nt,2,0,"span",42),r()),t&2){let e=m(),s=e.field,d=e.type,_=m(4);a(),x(" ",d==="email"?_.user.email:_.user[s]," "),a(),l("ngIf",d==="email"&&_.user.isVerified),a(),l("ngIf",d==="email"&&!_.user.isVerified)}}function Bt(t,i){if(t&1&&(n(0,"mat-error"),o(1),r()),t&2){let e=m(2).label;a(),x("",e," is required.")}}function zt(t,i){t&1&&(n(0,"mat-error"),o(1,"Enter a valid email."),r())}function jt(t,i){if(t&1){let e=C();n(0,"form",45)(1,"mat-form-field",46)(2,"mat-label"),o(3),r(),p(4,"input",47),c(5,Bt,2,1,"mat-error",21)(6,zt,2,0,"mat-error",21),r(),n(7,"div",48)(8,"button",49),f("click",function(){g(e);let d=m().field,_=m(4);return v(_.saveField(d))}),o(9,"Save"),r(),n(10,"button",50),f("click",function(){g(e);let d=m(5);return v(d.cancelEditField())}),o(11,"Cancel"),r()()()}if(t&2){let e,s,d=m(),_=d.field,u=d.label,h=d.type,y=m(4);l("formGroup",y.fieldForms[_]),a(3),w(u),a(),l("type",h||"text")("formControlName",_),a(),l("ngIf",(e=y.fieldForms[_].get(_))==null||e.errors==null?null:e.errors.required),a(),l("ngIf",(s=y.fieldForms[_].get(_))==null||s.errors==null?null:s.errors.email),a(2),l("disabled",y.isLoading),a(2),l("disabled",y.isLoading)}}function Gt(t,i){if(t&1&&(n(0,"div",29)(1,"div",30)(2,"div",36)(3,"label",31),o(4),r(),c(5,Dt,3,2,"button",37),r(),c(6,Rt,4,3,"div",38)(7,jt,12,8,"form",39),r()()),t&2){let e=i.field,s=i.label,d=m(4);a(4),x("",s,":"),a(),l("ngIf",d.editingField!==e),a(),l("ngIf",d.editingField!==e),a(),l("ngIf",d.editingField===e)}}function $t(t,i){t&1&&z(0)}function Yt(t,i){t&1&&z(0)}function Ht(t,i){t&1&&z(0)}function Zt(t,i){if(t&1){let e=C();n(0,"button",51),f("click",function(){g(e);let d=m(4);return v(d.showChangePassword())}),o(1,"Change Password"),r()}}function Wt(t,i){t&1&&(n(0,"mat-error"),o(1,"Current password is required."),r())}function Jt(t,i){t&1&&(n(0,"mat-error"),o(1,"New password is required."),r())}function Kt(t,i){t&1&&(n(0,"mat-error"),o(1,"Password must contain at least one uppercase, one lowercase, and one number, and be at least 8 characters long."),r())}function Qt(t,i){t&1&&(n(0,"mat-error"),o(1,"Please confirm your new password."),r())}function Xt(t,i){t&1&&(n(0,"mat-error"),o(1,"Passwords do not match."),r())}function ei(t,i){if(t&1){let e=C();n(0,"form",52),f("ngSubmit",function(){g(e);let d=m(4);return v(d.onChangePassword())}),n(1,"mat-form-field",46)(2,"mat-label"),o(3,"Current Password"),r(),p(4,"input",53),c(5,Wt,2,0,"mat-error",21),r(),n(6,"mat-form-field",46)(7,"mat-label"),o(8,"New Password"),r(),p(9,"input",54),n(10,"mat-hint"),o(11,"Must be at least 8 characters with uppercase, lowercase, and number"),r(),c(12,Jt,2,0,"mat-error",21)(13,Kt,2,0,"mat-error",21),r(),n(14,"mat-form-field",46)(15,"mat-label"),o(16,"Confirm New Password"),r(),p(17,"input",55),c(18,Qt,2,0,"mat-error",21)(19,Xt,2,0,"mat-error",21),r(),n(20,"div",48)(21,"button",56),o(22),r(),n(23,"button",50),f("click",function(){g(e);let d=m(4);return v(d.cancelChangePassword())}),o(24,"Cancel"),r()()()}if(t&2){let e,s,d,_,u,h=m(4);l("formGroup",h.passwordForm),a(5),l("ngIf",(e=h.passwordForm.get("old_password"))==null||e.errors==null?null:e.errors.required),a(7),l("ngIf",(s=h.passwordForm.get("new_password"))==null||s.errors==null?null:s.errors.required),a(),l("ngIf",(d=h.passwordForm.get("new_password"))==null||d.errors==null?null:d.errors.invalidPassword),a(5),l("ngIf",(_=h.passwordForm.get("confirm_password"))==null||_.errors==null?null:_.errors.required),a(),l("ngIf",(u=h.passwordForm.get("confirm_password"))==null||u.errors==null?null:u.errors.passwordMismatch),a(2),l("disabled",h.isChangingPassword),a(),w(h.isChangingPassword?"Changing...":"Change Password"),a(),l("disabled",h.isChangingPassword)}}function ti(t,i){if(t&1&&(n(0,"div",27),c(1,Gt,8,4,"ng-template",null,0,we)(3,$t,1,0,"ng-container",28)(4,Yt,1,0,"ng-container",28)(5,Ht,1,0,"ng-container",28),n(6,"div",29)(7,"div",30)(8,"label",31),o(9,"Role:"),r(),n(10,"div",32),o(11),r()()(),n(12,"div",29)(13,"div",30)(14,"label",31),o(15,"Member Since:"),r(),n(16,"div",32),o(17),$(18,"date"),r()()(),n(19,"div",29)(20,"div",30)(21,"div",33)(22,"label",31),o(23,"Password:"),r(),c(24,Zt,2,0,"button",34),r(),c(25,ei,25,9,"form",35),r()()()),t&2){let e=Pe(2),s=m(3);a(3),l("ngTemplateOutlet",e)("ngTemplateOutletContext",G(13,It)),a(),l("ngTemplateOutlet",e)("ngTemplateOutletContext",G(14,Mt)),a(),l("ngTemplateOutlet",e)("ngTemplateOutletContext",G(15,At)),a(6),w(s.user.role),a(6),w(Y(18,10,s.user.createdAt,"medium")),a(7),l("ngIf",!s.showChangePasswordForm),a(),l("ngIf",s.showChangePasswordForm)}}function ii(t,i){t&1&&(n(0,"mat-error"),o(1,"First name is required."),r())}function ri(t,i){t&1&&(n(0,"mat-error"),o(1,"Last name is required."),r())}function ni(t,i){t&1&&(n(0,"mat-error"),o(1,"Email is required."),r())}function oi(t,i){t&1&&(n(0,"mat-error"),o(1,"Enter a valid email."),r())}function ai(t,i){if(t&1){let e=C();n(0,"form",57)(1,"mat-form-field",46)(2,"mat-label"),o(3,"First Name"),r(),p(4,"input",58),c(5,ii,2,0,"mat-error",21),r(),n(6,"mat-form-field",46)(7,"mat-label"),o(8,"Last Name"),r(),p(9,"input",59),c(10,ri,2,0,"mat-error",21),r(),n(11,"mat-form-field",46)(12,"mat-label"),o(13,"Email"),r(),p(14,"input",60),c(15,ni,2,0,"mat-error",21)(16,oi,2,0,"mat-error",21),r(),n(17,"div",48)(18,"button",61),f("click",function(){g(e);let d=m(3);return v(d.onUpdateProfile())}),o(19,"Save Changes"),r(),n(20,"button",62),f("click",function(){g(e);let d=m(3);return v(d.toggleEditMode())}),o(21,"Cancel"),r()()()}if(t&2){let e,s,d,_,u=m(3);l("formGroup",u.profileForm),a(5),l("ngIf",(e=u.profileForm.get("FirstName"))==null||e.errors==null?null:e.errors.required),a(5),l("ngIf",(s=u.profileForm.get("LastName"))==null||s.errors==null?null:s.errors.required),a(5),l("ngIf",(d=u.profileForm.get("email"))==null||d.errors==null?null:d.errors.required),a(),l("ngIf",(_=u.profileForm.get("email"))==null||_.errors==null?null:_.errors.email)}}function si(t,i){if(t&1){let e=C();n(0,"div",63)(1,"button",64),f("click",function(){g(e);let d=m(3);return v(d.showDeleteConfirmation())}),o(2,"Delete Account"),r()()}}function li(t,i){if(t&1&&(n(0,"div"),c(1,ti,26,16,"div",24)(2,ai,22,5,"form",25)(3,si,3,0,"div",26),r()),t&2){let e=m(2);a(),l("ngIf",!e.isEditMode),a(),l("ngIf",e.isEditMode),a(),l("ngIf",e.editingField===null&&!e.isEditMode)}}function di(t,i){t&1&&(n(0,"div",68),p(1,"mat-spinner",69),n(2,"p",70),o(3,"Loading cart..."),r()())}function mi(t,i){if(t&1){let e=C();n(0,"div",71)(1,"p",72),o(2),r(),n(3,"button",51),f("click",function(){g(e);let d=m(3);return v(d.loadCart())}),o(4,"Retry"),r()()}if(t&2){let e=m(3);a(2),w(e.cartError)}}function ci(t,i){t&1&&(n(0,"div",73)(1,"mat-icon",74),o(2,"shopping_cart"),r(),n(3,"p",75),o(4,"Your cart is empty"),r(),n(5,"button",76),o(6,"Start Shopping"),r()())}function _i(t,i){if(t&1&&(n(0,"div",93)(1,"span"),o(2),r()()),t&2){let e=m().$implicit;a(),ve(e.isInStock?"badge bg-success":"badge bg-warning"),a(),x(" ",e.isInStock?"In Stock":"Out of Stock"," ")}}function pi(t,i){if(t&1&&(n(0,"mat-card",84)(1,"div",85)(2,"div",86),p(3,"img",87),r(),n(4,"div",88)(5,"h4",89),o(6),r(),n(7,"p",90),o(8),r(),n(9,"p",91),o(10),r(),c(11,_i,3,3,"div",92),r()()()),t&2){let e,s,d,_,u=i.$implicit,h=m(4);a(3),l("src",((e=h.getBook(u))==null||e.image==null?null:e.image.url)||"https://via.placeholder.com/100x120?text=Book",ge)("alt",((s=h.getBook(u))==null?null:s.title)||"Book"),a(3),x(" ",((d=h.getBook(u))==null?null:d.title)||"Unknown Book"," "),a(2),x(" by ",((_=h.getBook(u))==null?null:_.author)||"Unknown Author"," "),a(2),j(" ",u.priceAtAdd," EGP \xD7 ",u.qty," = ",h.getItemTotal(u)," EGP "),a(),l("ngIf",u.isInStock!==void 0)}}function ui(t,i){if(t&1){let e=C();n(0,"div",77)(1,"div",33)(2,"h3",78),o(3),r(),n(4,"button",51),f("click",function(){g(e);let d=m(3);return v(d.goToCart())}),o(5,"View Full Cart"),r()(),n(6,"div",27),c(7,pi,12,8,"mat-card",79),r(),n(8,"mat-card",80)(9,"div",30)(10,"div",81)(11,"span",82),o(12,"Subtotal:"),r(),n(13,"span",83),o(14),r()()()()()}if(t&2){let e=m(3);a(3),x("Cart Items (",e.cart.items.length,")"),a(4),l("ngForOf",e.cart.items),a(7),x(" ",e.cart.totals.subTotal||0," EGP ")}}function fi(t,i){if(t&1&&(n(0,"div"),c(1,di,4,0,"div",22)(2,mi,5,1,"div",65)(3,ci,7,0,"div",66)(4,ui,15,3,"div",67),r()),t&2){let e=m(2);a(),l("ngIf",e.isLoadingCart),a(),l("ngIf",e.cartError&&!e.isLoadingCart),a(),l("ngIf",!e.isLoadingCart&&!e.cartError&&(!e.cart||!e.cart.items||e.cart.items.length===0)),a(),l("ngIf",!e.isLoadingCart&&!e.cartError&&e.cart&&e.cart.items&&e.cart.items.length>0)}}function gi(t,i){t&1&&(n(0,"div",68),p(1,"mat-spinner",69),n(2,"p",70),o(3,"Loading orders..."),r()())}function vi(t,i){if(t&1){let e=C();n(0,"div",71)(1,"p",72),o(2),r(),n(3,"button",51),f("click",function(){g(e);let d=m(3);return v(d.loadOrders())}),o(4,"Retry"),r()()}if(t&2){let e=m(3);a(2),w(e.ordersError)}}function xi(t,i){t&1&&(n(0,"div",73)(1,"mat-icon",74),o(2,"receipt"),r(),n(3,"p",75),o(4,"No orders yet"),r(),n(5,"button",76),o(6,"Browse Products"),r()())}function hi(t,i){if(t&1&&(n(0,"span"),o(1),r()),t&2){let e=m().$implicit;a(),j(" ",e.shippingAddress==null?null:e.shippingAddress.city,"",e.shippingAddress!=null&&e.shippingAddress.city&&(e.shippingAddress!=null&&e.shippingAddress.state)?", ":"","",e.shippingAddress==null?null:e.shippingAddress.state," ")}}function bi(t,i){if(t&1&&(n(0,"div",110)(1,"div")(2,"span",82),o(3),r(),n(4,"span",111),o(5),r()(),n(6,"span",112),o(7),r()()),t&2){let e=i.$implicit,s=m(2).$implicit;a(3),x(" ",(e.book==null?null:e.book.title)||e.bookId||"Unknown Book"," "),a(2),x(" \xD7 ",e.qty," "),a(2),xe(" ",e.priceAtOrder||e.price||0," ",s.currency||"EGP"," ")}}function Ci(t,i){if(t&1&&(n(0,"div",106)(1,"p",107),o(2),r(),n(3,"div",108),c(4,bi,8,4,"div",109),r()()),t&2){let e=m().$implicit;a(2),x(" Items (",e.items.length,"): "),a(2),l("ngForOf",e.items)}}function Pi(t,i){if(t&1&&(n(0,"mat-card",97)(1,"div",30)(2,"div",98)(3,"div")(4,"h4",89),o(5),r(),n(6,"p",99),o(7),$(8,"date"),r()(),n(9,"span"),o(10),r()(),n(11,"div",100)(12,"div",101)(13,"p",102),o(14," Shipping Address: "),r(),n(15,"p",103),o(16),p(17,"br"),o(18),p(19,"br"),c(20,hi,2,3,"span",21),r()(),n(21,"div",101)(22,"p",102),o(23," Order Total: "),r(),n(24,"p",104),o(25),r()()(),c(26,Ci,5,2,"div",105),r()()),t&2){let e=i.$implicit,s=m(4);a(5),x(" Order #",(e._id==null?null:e._id.substring(0,8))||"N/A"," "),a(2),x(" Placed on ",Y(8,11,e.placedAt,"medium")," "),a(2),ve("badge "+s.getStatusBadgeClass(e.status)),a(),x(" ",e.status||"Pending"," "),a(6),x(" ",(e.shippingAddress==null?null:e.shippingAddress.fullName)||"N/A"),a(2),x(" ",(e.shippingAddress==null?null:e.shippingAddress.line1)||""),a(2),l("ngIf",(e.shippingAddress==null?null:e.shippingAddress.city)||(e.shippingAddress==null?null:e.shippingAddress.state)),a(5),xe(" ",(e.amounts==null?null:e.amounts.grandTotal)||0," ",e.currency||"EGP"," "),a(),l("ngIf",e.items&&e.items.length>0)}}function yi(t,i){if(t&1&&(n(0,"div",95)(1,"div",27),c(2,Pi,27,14,"mat-card",96),r()()),t&2){let e=m(3);a(2),l("ngForOf",e.orders)}}function wi(t,i){if(t&1&&(n(0,"div"),c(1,gi,4,0,"div",22)(2,vi,5,1,"div",65)(3,xi,7,0,"div",66)(4,yi,3,1,"div",94),r()),t&2){let e=m(2);a(),l("ngIf",e.isLoadingOrders),a(),l("ngIf",e.ordersError&&!e.isLoadingOrders),a(),l("ngIf",!e.isLoadingOrders&&!e.ordersError&&(!e.orders||e.orders.length===0)),a(),l("ngIf",!e.isLoadingOrders&&!e.ordersError&&e.orders&&e.orders.length>0)}}function Si(t,i){t&1&&(n(0,"div",68),p(1,"mat-spinner",69),n(2,"p",70),o(3,"Loading your library..."),r()())}function ki(t,i){if(t&1){let e=C();n(0,"div",71)(1,"p",72),o(2),r(),n(3,"button",51),f("click",function(){g(e);let d=m(3);return v(d.loadLibrary())}),o(4,"Retry"),r()()}if(t&2){let e=m(3);a(2),w(e.libraryError)}}function Ei(t,i){t&1&&(n(0,"div",73)(1,"mat-icon",74),o(2,"library_books"),r(),n(3,"p",75),o(4,"Your library is empty"),r(),n(5,"p",114),o(6,"Books you purchase will appear here after payment is confirmed."),r(),n(7,"button",76),o(8,"Browse Books"),r()())}function Ii(t,i){if(t&1&&(n(0,"p",131),o(1),$(2,"date"),r()),t&2){let e=m().$implicit;a(),x(" Purchased: ",Y(2,1,e.purchaseDate,"mediumDate")," ")}}function Mi(t,i){t&1&&(n(0,"mat-icon",132),o(1,"download"),r())}function Ai(t,i){t&1&&p(0,"mat-spinner",133)}function Oi(t,i){if(t&1){let e=C();n(0,"div",119)(1,"mat-card",120)(2,"div",121)(3,"div",122),p(4,"img",123),r(),n(5,"div",124)(6,"h4",125),o(7),r(),c(8,Ii,3,4,"p",126),n(9,"div",127)(10,"button",128),f("click",function(){let d=g(e).$implicit,_=m(4);return v(_.downloadBook(d.bookId,_.getBookTitle(d)))}),c(11,Mi,2,0,"mat-icon",129)(12,Ai,1,0,"mat-spinner",130),n(13,"span"),o(14),r()()()()()()()}if(t&2){let e=i.$implicit,s=m(4);a(4),l("src",s.getBookImage(e),ge)("alt",s.getBookTitle(e)),a(3),x(" ",s.getBookTitle(e)," "),a(),l("ngIf",e.purchaseDate),a(2),l("disabled",s.isDownloading(e.bookId)),a(),l("ngIf",!s.isDownloading(e.bookId)),a(),l("ngIf",s.isDownloading(e.bookId)),a(2),w(s.isDownloading(e.bookId)?"Downloading...":"Download PDF")}}function Ti(t,i){if(t&1&&(n(0,"div",115)(1,"div",116)(2,"h3",78),o(3),r()(),n(4,"div",117),c(5,Oi,15,8,"div",118),r()()),t&2){let e=m(3);a(3),x(" Purchased Books (",e.purchasedBooks.length,") "),a(2),l("ngForOf",e.purchasedBooks)}}function Fi(t,i){if(t&1&&(n(0,"div"),c(1,Si,4,0,"div",22)(2,ki,5,1,"div",65)(3,Ei,9,0,"div",66)(4,Ti,6,2,"div",113),r()),t&2){let e=m(2);a(),l("ngIf",e.isLoadingLibrary),a(),l("ngIf",e.libraryError&&!e.isLoadingLibrary),a(),l("ngIf",!e.isLoadingLibrary&&!e.libraryError&&(!e.purchasedBooks||e.purchasedBooks.length===0)),a(),l("ngIf",!e.isLoadingLibrary&&!e.libraryError&&e.purchasedBooks&&e.purchasedBooks.length>0)}}function Ui(t,i){t&1&&(n(0,"div",68),p(1,"mat-spinner",69),n(2,"p",70),o(3,"Loading author status..."),r()())}function Li(t,i){if(t&1&&(n(0,"div")(1,"strong"),o(2,"Bio:"),r(),n(3,"p",153),o(4),r()()),t&2){let e=m(6);a(4),w(e.authorProfile.bio)}}function Vi(t,i){if(t&1&&(n(0,"mat-card",152)(1,"div",30)(2,"h5",147),o(3,"Author Information"),r(),n(4,"div",145)(5,"strong"),o(6,"Name:"),r(),o(7),r(),c(8,Li,5,1,"div",21),r()()),t&2){let e=m(5);a(7),x(" ",e.authorProfile.name," "),a(),l("ngIf",e.authorProfile.bio)}}function Di(t,i){if(t&1){let e=C();n(0,"div",141)(1,"div",142)(2,"div",143),p(3,"i",144),r(),n(4,"h3",145),o(5,"You are an Approved Author!"),r(),n(6,"p",146),o(7,"You can now create and manage your books."),r(),n(8,"div",147)(9,"span",148),o(10),r()(),n(11,"button",149),f("click",function(){g(e);let d=m(4);return v(d.goToAuthorProfile())}),p(12,"i",150),o(13," Go to Author Profile "),r()(),c(14,Vi,9,2,"mat-card",151),r()}if(t&2){let e=m(4);a(9),l("ngClass",e.getAuthorStatusBadgeClass(e.authorStatus)),a(),x(" ",e.getAuthorStatusText(e.authorStatus)," "),a(4),l("ngIf",e.authorProfile)}}function qi(t,i){if(t&1&&(n(0,"div")(1,"strong"),o(2,"Bio:"),r(),n(3,"p",153),o(4),r()()),t&2){let e=m(6);a(4),w(e.authorProfile.bio)}}function Ni(t,i){if(t&1&&(n(0,"mat-card",152)(1,"div",30)(2,"h5",147),o(3,"Your Application"),r(),n(4,"div",145)(5,"strong"),o(6,"Name:"),r(),o(7),r(),c(8,qi,5,1,"div",21),r()()),t&2){let e=m(5);a(7),x(" ",e.authorProfile.name," "),a(),l("ngIf",e.authorProfile.bio)}}function Ri(t,i){if(t&1&&(n(0,"div",154)(1,"div",142)(2,"div",155),p(3,"i",156),r(),n(4,"h3",145),o(5,"Application Under Review"),r(),n(6,"p",146),o(7,"Your author application is being reviewed by an admin."),r(),n(8,"div",147)(9,"span",148),o(10),r()()(),c(11,Ni,9,2,"mat-card",151),r()),t&2){let e=m(4);a(9),l("ngClass",e.getAuthorStatusBadgeClass(e.authorStatus)),a(),x(" ",e.getAuthorStatusText(e.authorStatus)," "),a(),l("ngIf",e.authorProfile)}}function Bi(t,i){if(t&1){let e=C();n(0,"div",157)(1,"div",142)(2,"div",158),p(3,"i",159),r(),n(4,"h3",145),o(5,"Application Rejected"),r(),n(6,"p",146),o(7,"Your author application was not approved. You can submit a new application."),r(),n(8,"div",147)(9,"span",148),o(10),r()(),n(11,"button",149),f("click",function(){g(e);let d=m(4);return v(d.showAuthorApplicationForm())}),p(12,"i",160),o(13," Apply Again "),r()()()}if(t&2){let e=m(4);a(9),l("ngClass",e.getAuthorStatusBadgeClass(e.authorStatus)),a(),x(" ",e.getAuthorStatusText(e.authorStatus)," ")}}function zi(t,i){if(t&1){let e=C();n(0,"div",161)(1,"div",142)(2,"div",162),p(3,"i",163),r(),n(4,"h3",145),o(5,"Become an Author"),r(),n(6,"p",164),o(7," Share your knowledge and creativity with the world! Apply to become an author and start publishing your books. "),r(),n(8,"button",149),f("click",function(){g(e);let d=m(4);return v(d.showAuthorApplicationForm())}),p(9,"i",160),o(10," Apply to Become Author "),r()()()}}function ji(t,i){t&1&&(n(0,"mat-error"),o(1," Author name is required. "),r())}function Gi(t,i){t&1&&(n(0,"mat-error"),o(1," Name must be at least 2 characters. "),r())}function $i(t,i){t&1&&(n(0,"mat-error"),o(1," Bio is required. "),r())}function Yi(t,i){t&1&&(n(0,"mat-error"),o(1," Bio must be at least 10 characters. "),r())}function Hi(t,i){t&1&&(n(0,"span"),p(1,"i",175),o(2," Submit Application "),r())}function Zi(t,i){t&1&&(n(0,"span"),p(1,"span",176),o(2," Submitting... "),r())}function Wi(t,i){if(t&1){let e=C();n(0,"div",165)(1,"mat-card")(2,"div",166)(3,"h4",167),o(4,"Author Application Form"),r(),n(5,"p",168),o(6,"Fill in your details to apply as an author"),r()(),n(7,"div",169)(8,"form",170),f("ngSubmit",function(){g(e);let d=m(4);return v(d.submitAuthorApplication())}),n(9,"mat-form-field",46)(10,"mat-label"),o(11,"Author Name"),r(),p(12,"input",171),n(13,"mat-icon",172),o(14,"person"),r(),n(15,"mat-hint"),o(16,"This will be displayed as your author name"),r(),c(17,ji,2,0,"mat-error",21)(18,Gi,2,0,"mat-error",21),r(),n(19,"mat-form-field",46)(20,"mat-label"),o(21,"Bio"),r(),p(22,"textarea",173),n(23,"mat-hint"),o(24,"Minimum 10 characters. Describe your background and writing interests."),r(),c(25,$i,2,0,"mat-error",21)(26,Yi,2,0,"mat-error",21),r(),n(27,"div",174)(28,"button",56),c(29,Hi,3,0,"span",21)(30,Zi,3,0,"span",21),r(),n(31,"button",50),f("click",function(){g(e);let d=m(4);return v(d.cancelAuthorForm())}),o(32," Cancel "),r()()()()()()}if(t&2){let e,s,d,_,u=m(4);a(8),l("formGroup",u.authorForm),a(9),l("ngIf",(e=u.authorForm.get("name"))==null||e.errors==null?null:e.errors.required),a(),l("ngIf",(s=u.authorForm.get("name"))==null||s.errors==null?null:s.errors.minlength),a(7),l("ngIf",(d=u.authorForm.get("bio"))==null||d.errors==null?null:d.errors.required),a(),l("ngIf",(_=u.authorForm.get("bio"))==null||_.errors==null?null:_.errors.minlength),a(2),l("disabled",u.isSubmittingAuthor||!u.authorForm.valid),a(),l("ngIf",!u.isSubmittingAuthor),a(),l("ngIf",u.isSubmittingAuthor),a(),l("disabled",u.isSubmittingAuthor)}}function Ji(t,i){if(t&1&&(n(0,"div",135),c(1,Di,15,3,"div",136)(2,Ri,12,3,"div",137)(3,Bi,14,2,"div",138)(4,zi,11,0,"div",139)(5,Wi,33,9,"div",140),r()),t&2){let e=m(3);a(),l("ngIf",e.authorStatus==="approved"),a(),l("ngIf",e.authorStatus==="pending"),a(),l("ngIf",e.authorStatus==="rejected"),a(),l("ngIf",!e.authorStatus&&!e.showAuthorForm),a(),l("ngIf",e.showAuthorForm)}}function Ki(t,i){if(t&1&&(n(0,"div"),c(1,Ui,4,0,"div",22)(2,Ji,6,5,"div",134),r()),t&2){let e=m(2);a(),l("ngIf",e.isLoadingAuthorStatus),a(),l("ngIf",!e.isLoadingAuthorStatus)}}function Qi(t,i){if(t&1){let e=C();n(0,"button",51),f("click",function(){g(e);let d=m(3);return v(d.showAddAddress())}),o(1,"+ Add Address"),r()}}function Xi(t,i){t&1&&(n(0,"mat-error"),o(1,"Label is required."),r())}function er(t,i){t&1&&(n(0,"mat-error"),o(1,"Full name is required."),r())}function tr(t,i){t&1&&(n(0,"mat-error"),o(1,"Phone is required."),r())}function ir(t,i){t&1&&(n(0,"mat-error"),o(1,"Address line 1 is required."),r())}function rr(t,i){t&1&&(n(0,"mat-error"),o(1,"City is required."),r())}function nr(t,i){t&1&&(n(0,"mat-error"),o(1,"State is required."),r())}function or(t,i){t&1&&(n(0,"mat-error"),o(1,"Country is required."),r())}function ar(t,i){t&1&&(n(0,"mat-error"),o(1,"Postal code is required."),r())}function sr(t,i){if(t&1){let e=C();n(0,"form",179),f("ngSubmit",function(){g(e);let d=m(3);return v(d.onAddAddress())}),n(1,"mat-form-field",46)(2,"mat-label"),o(3,"Label"),r(),p(4,"input",180),c(5,Xi,2,0,"mat-error",21),r(),n(6,"mat-form-field",46)(7,"mat-label"),o(8,"Full Name"),r(),p(9,"input",181),c(10,er,2,0,"mat-error",21),r(),n(11,"mat-form-field",46)(12,"mat-label"),o(13,"Phone"),r(),p(14,"input",182),c(15,tr,2,0,"mat-error",21),r(),n(16,"mat-form-field",46)(17,"mat-label"),o(18,"Address Line 1"),r(),p(19,"input",183),c(20,ir,2,0,"mat-error",21),r(),n(21,"mat-form-field",46)(22,"mat-label"),o(23,"Address Line 2 (Optional)"),r(),p(24,"input",184),r(),n(25,"div",185)(26,"div",101)(27,"mat-form-field",46)(28,"mat-label"),o(29,"City"),r(),p(30,"input",186),c(31,rr,2,0,"mat-error",21),r()(),n(32,"div",101)(33,"mat-form-field",46)(34,"mat-label"),o(35,"State"),r(),p(36,"input",187),c(37,nr,2,0,"mat-error",21),r()()(),n(38,"div",185)(39,"div",101)(40,"mat-form-field",46)(41,"mat-label"),o(42,"Country"),r(),p(43,"input",188),c(44,or,2,0,"mat-error",21),r()(),n(45,"div",101)(46,"mat-form-field",46)(47,"mat-label"),o(48,"Postal Code"),r(),p(49,"input",189),c(50,ar,2,0,"mat-error",21),r()()(),n(51,"mat-checkbox",190),o(52,"Set as default address"),r(),n(53,"div",48)(54,"button",56),o(55),r(),n(56,"button",50),f("click",function(){g(e);let d=m(3);return v(d.cancelAddAddress())}),o(57,"Cancel"),r()()()}if(t&2){let e,s,d,_,u,h,y,k,b=m(3);l("formGroup",b.addressForm),a(5),l("ngIf",(e=b.addressForm.get("label"))==null||e.errors==null?null:e.errors.required),a(5),l("ngIf",(s=b.addressForm.get("fullName"))==null||s.errors==null?null:s.errors.required),a(5),l("ngIf",(d=b.addressForm.get("phone"))==null||d.errors==null?null:d.errors.required),a(5),l("ngIf",(_=b.addressForm.get("line1"))==null||_.errors==null?null:_.errors.required),a(11),l("ngIf",(u=b.addressForm.get("city"))==null||u.errors==null?null:u.errors.required),a(6),l("ngIf",(h=b.addressForm.get("state"))==null||h.errors==null?null:h.errors.required),a(7),l("ngIf",(y=b.addressForm.get("country"))==null||y.errors==null?null:y.errors.required),a(6),l("ngIf",(k=b.addressForm.get("postalCode"))==null||k.errors==null?null:k.errors.required),a(4),l("disabled",b.isAddingAddress),a(),w(b.isAddingAddress?"Adding...":"Add Address"),a(),l("disabled",b.isAddingAddress)}}function lr(t,i){t&1&&(n(0,"mat-error"),o(1,"Label is required."),r())}function dr(t,i){t&1&&(n(0,"mat-error"),o(1,"Full name is required."),r())}function mr(t,i){t&1&&(n(0,"mat-error"),o(1,"Phone is required."),r())}function cr(t,i){t&1&&(n(0,"mat-error"),o(1,"Address line 1 is required."),r())}function _r(t,i){t&1&&(n(0,"mat-error"),o(1,"City is required."),r())}function pr(t,i){t&1&&(n(0,"mat-error"),o(1,"State is required."),r())}function ur(t,i){t&1&&(n(0,"mat-error"),o(1,"Country is required."),r())}function fr(t,i){t&1&&(n(0,"mat-error"),o(1,"Postal code is required."),r())}function gr(t,i){if(t&1){let e=C();n(0,"form",195),f("ngSubmit",function(){g(e);let d=m(5);return v(d.onUpdateAddress())}),n(1,"mat-form-field",46)(2,"mat-label"),o(3,"Label"),r(),p(4,"input",196),c(5,lr,2,0,"mat-error",21),r(),n(6,"mat-form-field",46)(7,"mat-label"),o(8,"Full Name"),r(),p(9,"input",181),c(10,dr,2,0,"mat-error",21),r(),n(11,"mat-form-field",46)(12,"mat-label"),o(13,"Phone"),r(),p(14,"input",182),c(15,mr,2,0,"mat-error",21),r(),n(16,"mat-form-field",46)(17,"mat-label"),o(18,"Address Line 1"),r(),p(19,"input",183),c(20,cr,2,0,"mat-error",21),r(),n(21,"mat-form-field",46)(22,"mat-label"),o(23,"Address Line 2 (Optional)"),r(),p(24,"input",184),r(),n(25,"div",185)(26,"div",101)(27,"mat-form-field",46)(28,"mat-label"),o(29,"City"),r(),p(30,"input",186),c(31,_r,2,0,"mat-error",21),r()(),n(32,"div",101)(33,"mat-form-field",46)(34,"mat-label"),o(35,"State"),r(),p(36,"input",187),c(37,pr,2,0,"mat-error",21),r()()(),n(38,"div",185)(39,"div",101)(40,"mat-form-field",46)(41,"mat-label"),o(42,"Country"),r(),p(43,"input",188),c(44,ur,2,0,"mat-error",21),r()(),n(45,"div",101)(46,"mat-form-field",46)(47,"mat-label"),o(48,"Postal Code"),r(),p(49,"input",189),c(50,fr,2,0,"mat-error",21),r()()(),n(51,"mat-checkbox",190),o(52,"Set as default address"),r(),n(53,"div",48)(54,"button",56),o(55),r(),n(56,"button",50),f("click",function(){g(e);let d=m(5);return v(d.cancelEditAddress())}),o(57,"Cancel"),r()()()}if(t&2){let e,s,d,_,u,h,y,k,b=m(5);l("formGroup",b.editAddressForm),a(5),l("ngIf",(e=b.editAddressForm.get("label"))==null||e.errors==null?null:e.errors.required),a(5),l("ngIf",(s=b.editAddressForm.get("fullName"))==null||s.errors==null?null:s.errors.required),a(5),l("ngIf",(d=b.editAddressForm.get("phone"))==null||d.errors==null?null:d.errors.required),a(5),l("ngIf",(_=b.editAddressForm.get("line1"))==null||_.errors==null?null:_.errors.required),a(11),l("ngIf",(u=b.editAddressForm.get("city"))==null||u.errors==null?null:u.errors.required),a(6),l("ngIf",(h=b.editAddressForm.get("state"))==null||h.errors==null?null:h.errors.required),a(7),l("ngIf",(y=b.editAddressForm.get("country"))==null||y.errors==null?null:y.errors.required),a(6),l("ngIf",(k=b.editAddressForm.get("postalCode"))==null||k.errors==null?null:k.errors.required),a(4),l("disabled",b.isUpdatingAddress),a(),w(b.isUpdatingAddress?"Updating...":"Update Address"),a(),l("disabled",b.isUpdatingAddress)}}function vr(t,i){t&1&&(n(0,"span",203),o(1,"Default"),r())}function xr(t,i){if(t&1){let e=C();n(0,"div",204)(1,"button",205),f("click",function(){g(e);let d=m(2).index,_=m(4);return v(_.showEditAddress(d))}),n(2,"mat-icon"),o(3,"edit"),r()(),n(4,"button",206),f("click",function(){g(e);let d=m(2).index,_=m(4);return v(_.showDeleteAddressModal(d))}),n(5,"mat-icon"),o(6,"delete"),r()()()}}function hr(t,i){if(t&1&&(n(0,"div",207)(1,"strong"),o(2,"Name:"),r(),o(3),r()),t&2){let e=m(2).$implicit;a(3),x(" ",e.fullName)}}function br(t,i){if(t&1&&(n(0,"div",207)(1,"strong"),o(2,"Phone:"),r(),o(3),r()),t&2){let e=m(2).$implicit;a(3),x(" ",e.phone)}}function Cr(t,i){if(t&1&&(n(0,"div",207)(1,"strong"),o(2,"Address:"),r(),o(3),r()),t&2){let e=m(2).$implicit;a(3),x(" ",e.line1)}}function Pr(t,i){if(t&1&&(n(0,"div",207),o(1),r()),t&2){let e=m(2).$implicit;a(),w(e.line2)}}function yr(t,i){if(t&1&&(n(0,"div",207)(1,"strong"),o(2,"City/State:"),r(),o(3),r()),t&2){let e=m(2).$implicit;a(3),j(" ",e.city,"",e.city&&e.state?", ":"","",e.state)}}function wr(t,i){if(t&1&&(n(0,"div",207)(1,"strong"),o(2,"Country:"),r(),o(3),r()),t&2){let e=m(2).$implicit;a(3),x(" ",e.country)}}function Sr(t,i){if(t&1&&(n(0,"div",207)(1,"strong"),o(2,"Postal Code:"),r(),o(3),r()),t&2){let e=m(2).$implicit;a(3),x(" ",e.postalCode)}}function kr(t,i){if(t&1&&(n(0,"div",197)(1,"div",198)(2,"div")(3,"span",199),o(4),r(),c(5,vr,2,0,"span",200),r(),c(6,xr,7,0,"div",201),r(),n(7,"div",108),c(8,hr,4,1,"div",202)(9,br,4,1,"div",202)(10,Cr,4,1,"div",202)(11,Pr,2,1,"div",202)(12,yr,4,3,"div",202)(13,wr,4,1,"div",202)(14,Sr,4,1,"div",202),r()()),t&2){let e=m(),s=e.$implicit,d=e.index,_=m(4);a(4),w(s.label||"Address "+(d+1)),a(),l("ngIf",s.isDefault),a(),l("ngIf",!_.isEditMode),a(2),l("ngIf",s.fullName),a(),l("ngIf",s.phone),a(),l("ngIf",s.line1),a(),l("ngIf",s.line2),a(),l("ngIf",s.city||s.state),a(),l("ngIf",s.country),a(),l("ngIf",s.postalCode)}}function Er(t,i){if(t&1&&(n(0,"div",192),c(1,gr,58,12,"form",193)(2,kr,15,10,"div",194),r()),t&2){let e=i.$implicit,s=i.index,d=m(4);a(),l("ngIf",(d.editingAddressId===e._id||d.editingAddressId===e.id||d.editingAddressId===s.toString())&&!d.isEditMode),a(),l("ngIf",d.editingAddressId!==e._id&&d.editingAddressId!==e.id&&d.editingAddressId!==s.toString()||d.isEditMode)}}function Ir(t,i){if(t&1&&(n(0,"div",27),c(1,Er,3,2,"div",191),r()),t&2){let e=m(3);a(),l("ngForOf",e.user.addresses)}}function Mr(t,i){t&1&&(n(0,"div",208)(1,"p",209),o(2,"No addresses added yet."),r()())}function Ar(t,i){if(t&1&&(n(0,"div")(1,"div",116),c(2,Qi,2,0,"button",34),r(),c(3,sr,58,12,"form",177)(4,Ir,2,1,"div",24)(5,Mr,3,0,"div",178),r()),t&2){let e=m(2);a(2),l("ngIf",!e.showAddAddressForm&&!e.isEditMode),a(),l("ngIf",e.showAddAddressForm&&!e.isEditMode),a(),l("ngIf",e.user.addresses&&e.user.addresses.length>0),a(),l("ngIf",!e.user.addresses||e.user.addresses.length===0)}}function Or(t,i){t&1&&(n(0,"div",68),p(1,"mat-spinner",69),n(2,"p",70),o(3,"Loading profile..."),r()())}function Tr(t,i){if(t&1){let e=C();n(0,"div",4)(1,"div",5)(2,"div",6)(3,"aside",7)(4,"mat-card",8)(5,"div",9)(6,"h2",10),o(7,"My Account"),r()(),n(8,"mat-nav-list")(9,"a",11),f("click",function(){g(e);let d=m();return v(d.setActiveSection("profile"))}),n(10,"mat-icon",12),o(11,"person"),r(),n(12,"span",13),o(13,"User Profile"),r()(),n(14,"a",11),f("click",function(){g(e);let d=m();return v(d.setActiveSection("cart"))}),n(15,"mat-icon",12),o(16,"shopping_cart"),r(),n(17,"span",13),o(18,"My Cart"),r()(),n(19,"a",11),f("click",function(){g(e);let d=m();return v(d.setActiveSection("orders"))}),n(20,"mat-icon",12),o(21,"receipt"),r(),n(22,"span",13),o(23,"My Orders"),r()(),n(24,"a",11),f("click",function(){g(e);let d=m();return v(d.setActiveSection("library"))}),n(25,"mat-icon",12),o(26,"library_books"),r(),n(27,"span",13),o(28,"My Library"),r()(),n(29,"a",11),f("click",function(){g(e);let d=m();return v(d.setActiveSection("author"))}),n(30,"mat-icon",12),o(31,"edit"),r(),n(32,"span",13),o(33,"Become Author"),r()(),n(34,"a",11),f("click",function(){g(e);let d=m();return v(d.setActiveSection("addresses"))}),n(35,"mat-icon",12),o(36,"location_on"),r(),n(37,"span",13),o(38,"My Addresses"),r()(),p(39,"mat-divider",14),n(40,"a",15),f("click",function(){g(e);let d=m();return v(d.logout())}),n(41,"mat-icon",12),o(42,"logout"),r(),n(43,"span",13),o(44,"Logout"),r()()()()(),n(45,"main",16)(46,"mat-card",17)(47,"div",18),c(48,Ot,2,0,"h2",19)(49,Tt,2,0,"h2",19)(50,Ft,2,0,"h2",19)(51,Ut,2,0,"h2",19)(52,Lt,2,0,"h2",19)(53,Vt,2,0,"h2",19),r(),n(54,"div",20),c(55,li,4,3,"div",21)(56,fi,5,4,"div",21)(57,wi,5,4,"div",21)(58,Fi,5,4,"div",21)(59,Ki,3,2,"div",21)(60,Ar,6,4,"div",21)(61,Or,4,0,"div",22),r()()()()()()}if(t&2){let e=m();a(9),E("active",e.activeSection==="profile"),a(5),E("active",e.activeSection==="cart"),a(5),E("active",e.activeSection==="orders"),a(5),E("active",e.activeSection==="library"),a(5),E("active",e.activeSection==="author"),a(5),E("active",e.activeSection==="addresses"),a(14),l("ngIf",e.activeSection==="profile"),a(),l("ngIf",e.activeSection==="cart"),a(),l("ngIf",e.activeSection==="orders"),a(),l("ngIf",e.activeSection==="library"),a(),l("ngIf",e.activeSection==="author"),a(),l("ngIf",e.activeSection==="addresses"),a(2),l("ngIf",e.activeSection==="profile"&&e.user),a(),l("ngIf",e.activeSection==="cart"),a(),l("ngIf",e.activeSection==="orders"),a(),l("ngIf",e.activeSection==="library"),a(),l("ngIf",e.activeSection==="author"),a(),l("ngIf",e.activeSection==="addresses"&&e.user),a(),l("ngIf",e.isLoading&&!e.user)}}function Fr(t,i){if(t&1){let e=C();n(0,"div",210),f("click",function(){g(e);let d=m();return v(d.cancelDeleteAddress())}),n(1,"div",211),f("click",function(d){return g(e),v(d.stopPropagation())}),n(2,"div",212)(3,"h2",213),o(4,"Delete Address"),r()(),n(5,"div",214)(6,"p",114),o(7,"Are you sure you want to delete this address? This action cannot be undone."),r()(),n(8,"div",215)(9,"button",216),f("click",function(){g(e);let d=m();return v(d.onDeleteAddress())}),o(10),r(),n(11,"button",217),f("click",function(){g(e);let d=m();return v(d.cancelDeleteAddress())}),o(12,"Cancel"),r()()()()}if(t&2){let e=m();a(9),l("disabled",e.isDeletingAddress),a(),w(e.isDeletingAddress?"Deleting...":"Confirm Delete"),a(),l("disabled",e.isDeletingAddress)}}function Ur(t,i){t&1&&(n(0,"mat-error"),o(1,"Password is required."),r())}function Lr(t,i){if(t&1){let e=C();n(0,"div",210),f("click",function(){g(e);let d=m();return v(d.cancelDelete())}),n(1,"div",211),f("click",function(d){return g(e),v(d.stopPropagation())}),n(2,"div",212)(3,"h2",213),o(4,"Delete Account"),r()(),n(5,"div",214)(6,"p",146),o(7,"This action cannot be undone. Please enter your password to confirm."),r(),n(8,"form",52),f("ngSubmit",function(){g(e);let d=m();return v(d.onDeleteAccount())}),n(9,"mat-form-field",46)(10,"mat-label"),o(11,"Password"),r(),p(12,"input",218),c(13,Ur,2,0,"mat-error",21),r(),n(14,"div",48)(15,"button",219),o(16),r(),n(17,"button",50),f("click",function(){g(e);let d=m();return v(d.cancelDelete())}),o(18,"Cancel"),r()()()()()()}if(t&2){let e,s=m();a(8),l("formGroup",s.deleteForm),a(5),l("ngIf",(e=s.deleteForm.get("password"))==null||e.errors==null?null:e.errors.required),a(2),l("disabled",s.isDeleting),a(),w(s.isDeleting?"Deleting...":"Confirm Delete"),a(),l("disabled",s.isDeleting)}}function Vr(t,i){t&1&&p(0,"mat-spinner",226)}function Dr(t,i){if(t&1){let e=C();n(0,"div",220)(1,"div",221),f("click",function(){g(e);let d=m();return v(d.closeMessage())}),n(2,"button",222),f("click",function(){g(e);let d=m();return v(d.closeMessage())}),o(3,"\xD7"),r(),n(4,"div",223),c(5,Vr,1,0,"mat-spinner",224),n(6,"p",225),o(7),r()()()()}if(t&2){let e=m();a(),E("border-success",!e.isError&&!e.isLoading)("border-danger",e.isError),a(4),l("ngIf",e.isLoading),a(),E("text-success",!e.isError&&!e.isLoading)("text-danger",e.isError),a(),w(e.isLoading?"Processing, please wait...":e.message)}}var pe=class t{constructor(i,e,s,d,_,u,h,y,k){this.fb=i;this.profileService=e;this.authService=s;this.router=d;this.cartService=_;this.downloadService=u;this.bookService=h;this.authorService=y;this.snackBar=k;this.profileForm=this.fb.group({FirstName:["",[P.required]],LastName:["",[P.required]],email:["",[P.required,P.email]]}),this.deleteForm=this.fb.group({password:["",[P.required]]}),this.addressForm=this.createAddressForm(),this.editAddressForm=this.createAddressForm();let b=V=>{if(!V.value)return null;let D=V.value,mt=/[A-Z]/.test(D),ct=/[a-z]/.test(D),_t=/\d/.test(D);return!(D.length>=8)||!mt||!ct||!_t?{invalidPassword:!0}:null};this.passwordForm=this.fb.group({old_password:["",[P.required]],new_password:["",[P.required,b]],confirm_password:["",[P.required]]},{validators:this.passwordMatchValidator.bind(this)}),this.fieldForms.FirstName=this.fb.group({FirstName:["",[P.required]]}),this.fieldForms.LastName=this.fb.group({LastName:["",[P.required]]}),this.fieldForms.email=this.fb.group({email:["",[P.required,P.email]]}),this.authorForm=this.fb.group({name:["",[P.required,P.minLength(2)]],bio:["",[P.required,P.minLength(10)]]})}profileForm;deleteForm;addressForm;editAddressForm;passwordForm;fieldForms={};isLoading=!1;isDeleting=!1;isAddingAddress=!1;isUpdatingAddress=!1;isDeletingAddress=!1;isChangingPassword=!1;message="";isError=!1;user=null;isEditMode=!1;activeSection="profile";editingField=null;showDeleteConfirm=!1;showAddAddressForm=!1;showDeleteAddressConfirm=!1;showChangePasswordForm=!1;editingAddressId=null;addressIdToDelete=null;cart=null;orders=[];isLoadingCart=!1;isLoadingOrders=!1;cartError=null;ordersError=null;purchasedBooks=[];isLoadingLibrary=!1;libraryError=null;downloadingBookId=null;authorForm;showAuthorForm=!1;isSubmittingAuthor=!1;authorStatus=null;isLoadingAuthorStatus=!1;authorProfile=null;messageTimer=null;destroy$=new be;createAddressForm(){return this.fb.group({label:["",[P.required]],fullName:["",[P.required]],phone:["",[P.required]],line1:["",[P.required]],line2:[""],city:["",[P.required]],state:["",[P.required]],country:["",[P.required]],postalCode:["",[P.required]],isDefault:[!1]})}validatePasswordStrength(i){if(!i.value)return null;let e=i.value,s=/[A-Z]/.test(e),d=/[a-z]/.test(e),_=/\d/.test(e);return!(e.length>=8)||!s||!d||!_?{invalidPassword:!0}:null}ngOnInit(){this.loadProfile(),this.authService.isAuthenticated()&&this.checkAuthorStatus()}ngOnDestroy(){this.clearMessageTimer(),this.destroy$.next(),this.destroy$.complete()}loadProfile(){if(!this.authService.isAuthenticated()){this.router.navigate(["/login"]);return}this.isLoading=!0,this.message="",this.isError=!1,this.profileService.getProfile().subscribe({next:i=>{this.user=i.user,this.profileForm.patchValue({FirstName:i.user.FirstName,LastName:i.user.LastName,email:i.user.email}),this.isLoading=!1},error:i=>{this.message=i?.error?.error||i?.message||"\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0634\u062E\u0635\u064A",this.isError=!0,this.isLoading=!1,this.startAutoCloseTimer(),i.status===401&&setTimeout(()=>{this.authService.logout(),this.router.navigate(["/login"])},2e3)}})}toggleEditMode(){this.isEditMode&&this.profileForm.patchValue({FirstName:this.user.FirstName,LastName:this.user.LastName,email:this.user.email}),this.isEditMode=!this.isEditMode}startEditField(i){this.editingField=i;let e=this.user[i];this.fieldForms[i].patchValue({[i]:e})}cancelEditField(){this.editingField=null}saveField(i){let e=this.fieldForms[i];if(!e.valid){e.markAllAsTouched();return}let s=e.get(i)?.value;if(s===this.user[i]){this.editingField=null;return}this.isLoading=!0,this.message="",this.isError=!1,this.profileService.updateProfile({[i]:s}).subscribe({next:d=>{d.user&&(this.user=U(U({},this.user),d.user)),this.message=d.message||`\u062A\u0645 \u062A\u062D\u062F\u064A\u062B ${i} \u0628\u0646\u062C\u0627\u062D`,this.isError=!1,this.isLoading=!1,this.startAutoCloseTimer(),this.editingField=null,i==="email"&&setTimeout(()=>{this.authService.logout(),this.router.navigate(["/login"])},2e3)},error:d=>{this.message=d?.error?.error||d?.message||`\u0641\u0634\u0644 \u062A\u062D\u062F\u064A\u062B ${i}`,this.isError=!0,this.isLoading=!1,this.startAutoCloseTimer()}})}onUpdateProfile(){if(!this.profileForm.valid){this.profileForm.markAllAsTouched();return}let i=this.profileForm.value,e={};if(i.FirstName!==this.user.FirstName&&(e.FirstName=i.FirstName),i.LastName!==this.user.LastName&&(e.LastName=i.LastName),i.email!==this.user.email&&(e.email=i.email),Object.keys(e).length===0){this.message="\u0644\u0645 \u064A\u062A\u0645 \u0627\u0643\u062A\u0634\u0627\u0641 \u0623\u064A \u062A\u063A\u064A\u064A\u0631\u0627\u062A",this.isError=!0,this.startAutoCloseTimer();return}this.isLoading=!0,this.message="",this.isError=!1,this.profileService.updateProfile(e).subscribe({next:s=>{s.user&&(this.user=U(U({},this.user),s.user)),this.message=s.message||"\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0634\u062E\u0635\u064A \u0628\u0646\u062C\u0627\u062D",this.isError=!1,this.isLoading=!1,this.startAutoCloseTimer(),this.isEditMode=!1,e.email&&setTimeout(()=>{this.authService.logout(),this.router.navigate(["/login"])},2e3)},error:s=>{this.message=s?.error?.error||s?.message||"\u0641\u0634\u0644 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0634\u062E\u0635\u064A",this.isError=!0,this.isLoading=!1,this.startAutoCloseTimer()}})}showDeleteConfirmation(){this.showDeleteConfirm=!0,this.deleteForm.reset()}cancelDelete(){this.showDeleteConfirm=!1,this.deleteForm.reset()}onDeleteAccount(){if(!this.deleteForm.valid){this.deleteForm.markAllAsTouched();return}this.isDeleting=!0,this.message="",this.isError=!1;let i=this.deleteForm.get("password")?.value;this.profileService.deleteAccount(i).subscribe({next:e=>{this.message=e.message||"\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u062D\u0633\u0627\u0628 \u0628\u0646\u062C\u0627\u062D",this.isError=!1,this.isDeleting=!1,this.showDeleteConfirm=!1,this.startAutoCloseTimer(),setTimeout(()=>{this.authService.logout(),this.router.navigate(["/login"])},2e3)},error:e=>{this.message=e?.error?.error||e?.message||"\u0641\u0634\u0644 \u062D\u0630\u0641 \u0627\u0644\u062D\u0633\u0627\u0628",this.isError=!0,this.isDeleting=!1,this.startAutoCloseTimer()}})}closeMessage(){this.clearMessageTimer(),this.message="",this.isError=!1,this.isLoading=!1}clearMessageTimer(){this.messageTimer&&(clearTimeout(this.messageTimer),this.messageTimer=null)}startAutoCloseTimer(){this.clearMessageTimer(),this.message&&!this.isLoading&&(this.messageTimer=setTimeout(()=>{this.closeMessage()},4e3))}logout(){this.authService.logout(),this.router.navigate(["/login"])}setActiveSection(i){this.activeSection=i,i==="cart"?this.loadCart():i==="orders"?this.loadOrders():i==="library"?this.loadLibrary():i==="author"&&this.checkAuthorStatus()}loadCart(){this.cart||(this.isLoadingCart=!0,this.cartError=null,this.cartService.getCart().pipe(q(this.destroy$)).subscribe({next:i=>{this.cart=i.data,this.isLoadingCart=!1},error:i=>{console.error("Error loading cart:",i),this.cartError=i.error?.message||"Error loading cart",this.isLoadingCart=!1,this.cart=null}}))}loadOrders(){this.orders.length>0||(this.isLoadingOrders=!0,this.ordersError=null,this.profileService.getUserOrders().pipe(q(this.destroy$)).subscribe({next:i=>{this.orders=i.data?.orders||i.orders||[],this.isLoadingOrders=!1},error:i=>{console.error("Error loading orders:",i),this.ordersError=i.error?.message||"Error loading orders",this.isLoadingOrders=!1,this.orders=[]}}))}getBook(i){return typeof i.bookId=="object"?i.bookId:null}getItemTotal(i){return i.qty*i.priceAtAdd}goToCart(){this.router.navigate(["/cart"])}getStatusBadgeClass(i){let e=i?.toLowerCase()||"";return e==="delivered"?"bg-success":e==="shipped"?"bg-primary":e==="paid"?"bg-info":e==="cancelled"?"bg-danger":"bg-warning"}passwordMatchValidator(i){let e=i.get("new_password"),s=i.get("confirm_password");return!e||!s?null:e.value!==s.value?(s.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):(s.setErrors(null),null)}showChangePassword(){this.showChangePasswordForm=!0,this.passwordForm.reset()}cancelChangePassword(){this.showChangePasswordForm=!1,this.passwordForm.reset()}onChangePassword(){if(!this.passwordForm.valid){this.passwordForm.markAllAsTouched();return}this.isChangingPassword=!0,this.message="",this.isError=!1,this.profileService.changePassword(this.passwordForm.value).subscribe({next:i=>{this.message=i.message||"\u062A\u0645 \u062A\u063A\u064A\u064A\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0628\u0646\u062C\u0627\u062D",this.isError=!1,this.isChangingPassword=!1,this.showChangePasswordForm=!1,this.passwordForm.reset(),this.startAutoCloseTimer()},error:i=>{this.message=i?.error?.error||i?.message||"\u0641\u0634\u0644 \u062A\u063A\u064A\u064A\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",this.isError=!0,this.isChangingPassword=!1,this.startAutoCloseTimer()}})}showAddAddress(){this.showAddAddressForm=!0,this.addressForm.reset(),this.addressForm.patchValue({isDefault:!1})}cancelAddAddress(){this.showAddAddressForm=!1,this.addressForm.reset()}onAddAddress(){if(!this.addressForm.valid){this.addressForm.markAllAsTouched();return}this.isAddingAddress=!0,this.message="",this.isError=!1;let i=this.buildAddressData(this.addressForm.value);this.profileService.addAddress(i).subscribe({next:e=>{this.message=e.message||"\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0628\u0646\u062C\u0627\u062D",this.isError=!1,this.isAddingAddress=!1,this.showAddAddressForm=!1,this.addressForm.reset(),this.startAutoCloseTimer(),this.loadProfile()},error:e=>{this.message=e?.error?.error||e?.message||"\u0641\u0634\u0644 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0646\u0648\u0627\u0646",this.isError=!0,this.isAddingAddress=!1,this.startAutoCloseTimer()}})}showEditAddress(i){let e=this.user.addresses[i];this.editingAddressId=e._id||e.id||i.toString(),this.editAddressForm.patchValue({label:e.label||"",fullName:e.fullName||"",phone:e.phone||"",line1:e.line1||"",line2:e.line2||"",city:e.city||"",state:e.state||"",country:e.country||"",postalCode:e.postalCode||"",isDefault:e.isDefault||!1})}cancelEditAddress(){this.editingAddressId=null,this.editAddressForm.reset()}onUpdateAddress(){if(!this.editAddressForm.valid||!this.editingAddressId){this.editAddressForm.markAllAsTouched();return}this.isUpdatingAddress=!0,this.message="",this.isError=!1;let i=this.buildAddressData(this.editAddressForm.value),e=this.user.addresses.findIndex(s=>s._id===this.editingAddressId||s.id===this.editingAddressId);e!==-1&&(i.addressIndex=e),typeof this.editingAddressId=="string"&&this.editingAddressId!==e.toString()&&(i.addressId=this.editingAddressId),this.profileService.updateAddress(i).subscribe({next:s=>{this.message=s.message||"\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0628\u0646\u062C\u0627\u062D",this.isError=!1,this.isUpdatingAddress=!1,this.editingAddressId=null,this.editAddressForm.reset(),this.startAutoCloseTimer(),this.loadProfile()},error:s=>{this.message=s?.error?.error||s?.message||"\u0641\u0634\u0644 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0639\u0646\u0648\u0627\u0646",this.isError=!0,this.isUpdatingAddress=!1,this.startAutoCloseTimer()}})}showDeleteAddressModal(i){let e=this.user.addresses[i];this.addressIdToDelete=e._id||e.id||i.toString(),this.showDeleteAddressConfirm=!0}cancelDeleteAddress(){this.addressIdToDelete=null,this.showDeleteAddressConfirm=!1}onDeleteAddress(){if(!this.addressIdToDelete)return;this.isDeletingAddress=!0,this.message="",this.isError=!1;let i=this.user.addresses.findIndex(s=>s._id===this.addressIdToDelete||s.id===this.addressIdToDelete),e={};i!==-1&&(e.addressIndex=i),typeof this.addressIdToDelete=="string"&&this.addressIdToDelete!==i.toString()&&(e.addressId=this.addressIdToDelete),this.profileService.deleteAddress(e).subscribe({next:s=>{this.message=s.message||"\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0628\u0646\u062C\u0627\u062D",this.isError=!1,this.isDeletingAddress=!1,this.showDeleteAddressConfirm=!1,this.addressIdToDelete=null,this.startAutoCloseTimer(),this.loadProfile()},error:s=>{this.message=s?.error?.error||s?.message||"\u0641\u0634\u0644 \u062D\u0630\u0641 \u0627\u0644\u0639\u0646\u0648\u0627\u0646",this.isError=!0,this.isDeletingAddress=!1,this.startAutoCloseTimer()}})}buildAddressData(i){let e={label:i.label?.trim()||"",fullName:i.fullName?.trim()||"",phone:i.phone?.trim()||"",line1:i.line1?.trim()||"",city:i.city?.trim()||"",state:i.state?.trim()||"",country:i.country?.trim()||"",postalCode:i.postalCode?.trim()||"",isDefault:i.isDefault||!1};return i.line2?.trim()&&(e.line2=i.line2.trim()),e}loadLibrary(){this.purchasedBooks.length>0||(this.isLoadingLibrary=!0,this.libraryError=null,this.profileService.getUserOrders().pipe(q(this.destroy$)).subscribe({next:i=>{let e=i.data?.orders||i.orders||[],s=new Map;e.forEach(u=>{(u.payment?.status?.toLowerCase()==="paid"||u.status?.toLowerCase()==="paid")&&u.items&&u.items.length>0&&u.items.forEach(y=>{let k=typeof y.bookId=="string"?y.bookId:y.bookId?._id||y.bookId?.id||y.book?._id||y.book?.id;if(k&&!s.has(k)){let b=y.book||y.bookId;s.set(k,{bookId:k,book:typeof b=="object"?b:null,purchaseDate:u.placedAt||u.createdAt,orderId:u._id||u.id})}})});let d=Array.from(s.keys()),_=[];if(this.purchasedBooks=Array.from(s.values()).map(u=>(u.book||_.push(u.bookId),u)),_.length>0){let u=_.map(h=>Ce(this.bookService.getBookById(h)));Promise.all(u).then(h=>{h.forEach((y,k)=>{if(y){let b=this.purchasedBooks.find(V=>V.bookId===_[k]);b&&(b.book=y)}})}).catch(h=>{console.error("Error fetching book details:",h)})}this.isLoadingLibrary=!1},error:i=>{console.error("Error loading library:",i),this.libraryError=i.error?.message||"Error loading library",this.isLoadingLibrary=!1,this.purchasedBooks=[]}}))}downloadBook(i,e="book"){this.downloadingBookId!==i&&(this.downloadingBookId=i,this.snackBar.open("Preparing download...","",{duration:2e3,horizontalPosition:"center",verticalPosition:"top"}),this.downloadService.downloadBook(i).subscribe({next:s=>{let d=window.URL.createObjectURL(s),_=document.createElement("a");_.href=d,_.download=`${e.replace(/[^a-z0-9]/gi,"_")}.pdf`,document.body.appendChild(_),_.click(),document.body.removeChild(_),window.URL.revokeObjectURL(d),this.snackBar.open("Download started!","",{duration:2e3,horizontalPosition:"center",verticalPosition:"top"}),this.downloadingBookId=null},error:s=>{console.error("Error downloading book:",s);let d=s.error?.message||s.message||"Failed to download book";this.snackBar.open(`Download failed: ${d}`,"Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top"}),this.downloadingBookId=null}}))}isDownloading(i){return this.downloadingBookId===i}getBookTitle(i){return i.book&&i.book.title?i.book.title:"Unknown Book"}getBookImage(i){return i.book&&i.book.image&&i.book.image.url?i.book.image.url:"https://res.cloudinary.com/dbelkcsrq/image/upload/book-store/covers/soul.jpg"}checkAuthorStatus(){if(!this.authService.isAuthenticated()){this.authorStatus=null;return}this.isLoadingAuthorStatus=!0,this.authorService.getMyAuthorProfile().subscribe({next:i=>{i?(this.authorProfile=i,this.authorStatus=i.status||"pending",(i.name||i.bio)&&this.authorForm.patchValue({name:i.name||"",bio:i.bio||""})):(this.authorStatus=null,this.authorProfile=null),this.isLoadingAuthorStatus=!1},error:i=>{i.status===404?(this.authorStatus=null,this.authorProfile=null):console.error("Error checking author status:",i),this.isLoadingAuthorStatus=!1}})}showAuthorApplicationForm(){if(this.authorStatus==="approved"){this.snackBar.open("You are already an approved author!","Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"top"});return}if(this.authorStatus==="pending"){this.snackBar.open("Your author application is pending review","Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"top"});return}this.showAuthorForm=!0}cancelAuthorForm(){this.showAuthorForm=!1,this.authorProfile?this.authorForm.patchValue({name:this.authorProfile.name||"",bio:this.authorProfile.bio||""}):this.authorForm.reset()}submitAuthorApplication(){if(!this.authorForm.valid){this.authorForm.markAllAsTouched();return}this.isSubmittingAuthor=!0;let i=this.authorForm.value;this.authorService.applyAsAuthor(i.name.trim(),i.bio.trim()).subscribe({next:e=>{this.snackBar.open("Author application submitted successfully! It will be reviewed by an admin.","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top"}),this.showAuthorForm=!1,this.isSubmittingAuthor=!1,this.checkAuthorStatus()},error:e=>{console.error("Error submitting author application:",e);let s=e.error?.error||e.error?.message||e.message||"Failed to submit author application";this.snackBar.open(s,"Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top"}),this.isSubmittingAuthor=!1}})}getAuthorStatusBadgeClass(i){if(!i)return"bg-secondary";let e=i.toLowerCase();return e==="approved"?"bg-success":e==="pending"?"bg-warning text-dark":e==="rejected"||e==="revoked"?"bg-danger":"bg-secondary"}getAuthorStatusText(i){if(!i)return"Not Applied";let e=i.toLowerCase();return e==="approved"?"Approved":e==="pending"?"Pending Review":e==="rejected"?"Rejected":e==="revoked"?"Revoked":i}goToAuthorProfile(){this.authorStatus==="approved"&&this.authorProfile&&this.router.navigate(["/author-profile"])}static \u0275fac=function(e){return new(e||t)(S(ne),S(Ge),S(K),S(Z),S(Be),S(_e),S(ze),S(je),S(Fe))};static \u0275cmp=I({type:t,selectors:[["app-user-profile"]],standalone:!1,decls:4,vars:4,consts:[["fieldItem",""],["class","profile-section",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],["class","message-overlay",4,"ngIf"],[1,"profile-section"],[1,"container"],[1,"row","g-4"],[1,"col-md-3","col-lg-3"],[1,"sidebar-card","h-100","sticky-top"],[1,"sidebar-header"],[1,"sidebar-title"],["mat-list-item","",3,"click"],["matListItemIcon",""],["matListItemTitle",""],[1,"my-2"],["mat-list-item","",1,"text-danger",3,"click"],[1,"col-md-9","col-lg-9"],[1,"content-card"],[1,"content-header"],["class","content-title",4,"ngIf"],[1,"content-body"],[4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"content-title"],["class","d-flex flex-column gap-3",4,"ngIf"],["class","d-flex flex-column gap-3 p-4","style","background: #f8f9fa; border-radius: 12px;",3,"formGroup",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"d-flex","flex-column","gap-3"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"field-card"],[1,"p-3"],[1,"field-label"],[1,"field-value"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["class","d-flex flex-column gap-2",3,"formGroup","ngSubmit",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],["mat-icon-button","",3,"title","click",4,"ngIf"],["class","field-value",4,"ngIf"],["class","mt-3 d-flex flex-column gap-2",3,"formGroup",4,"ngIf"],["mat-icon-button","",3,"click","title"],["class","badge bg-success ms-2",4,"ngIf"],["class","badge bg-warning text-dark ms-2",4,"ngIf"],[1,"badge","bg-success","ms-2"],[1,"badge","bg-warning","text-dark","ms-2"],[1,"mt-3","d-flex","flex-column","gap-2",3,"formGroup"],["appearance","outline",1,"w-100"],["matInput","",3,"type","formControlName"],[1,"d-flex","gap-2"],["mat-raised-button","","color","primary","type","button",1,"flex-fill",3,"click","disabled"],["mat-stroked-button","","type","button",1,"flex-fill",3,"click","disabled"],["mat-raised-button","","color","primary",3,"click"],[1,"d-flex","flex-column","gap-2",3,"ngSubmit","formGroup"],["matInput","","type","password","formControlName","old_password"],["matInput","","type","password","formControlName","new_password"],["matInput","","type","password","formControlName","confirm_password"],["mat-raised-button","","color","primary","type","submit",1,"flex-fill",3,"disabled"],[1,"d-flex","flex-column","gap-3","p-4",2,"background","#f8f9fa","border-radius","12px",3,"formGroup"],["matInput","","formControlName","FirstName"],["matInput","","formControlName","LastName"],["matInput","","type","email","formControlName","email"],["mat-raised-button","","color","primary","type","button",1,"flex-fill",3,"click"],["mat-stroked-button","","type","button",1,"flex-fill",3,"click"],[1,"mt-3"],["mat-stroked-button","","color","warn",1,"w-100",3,"click"],["class","text-center p-4",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","cart-items-container",4,"ngIf"],[1,"loading-container"],["diameter","50",1,"mx-auto"],[1,"loading-text"],[1,"text-center","p-4"],[1,"text-danger"],[1,"empty-state"],[1,"empty-state-icon"],[1,"empty-state-text"],["mat-raised-button","","color","primary","routerLink","/"],[1,"cart-items-container"],[2,"margin","0","color","var(--text-dark)","font-weight","600"],["class","cart-item-card",4,"ngFor","ngForOf"],[1,"mt-3",2,"background","#f8f9fa"],[1,"d-flex","justify-content-between","align-items-center"],[2,"font-weight","600","color","var(--text-dark)"],[2,"font-weight","700","color","var(--brand)","font-size","1.25rem"],[1,"cart-item-card"],[1,"d-flex","align-items-center","gap-3","p-3"],[1,"cart-item-image"],[2,"width","100px","height","120px","object-fit","cover","border-radius","8px",3,"src","alt"],[1,"flex-grow-1"],[2,"margin","0 0 0.5rem 0","color","var(--text-dark)","font-weight","600"],[2,"margin","0 0 0.5rem 0","color","var(--text-muted)","font-size","0.9rem"],[2,"margin","0","color","var(--brand)","font-weight","600","font-size","1.1rem"],["class","mt-2",4,"ngIf"],[1,"mt-2"],["class","orders-container",4,"ngIf"],[1,"orders-container"],["class","order-card",4,"ngFor","ngForOf"],[1,"order-card"],[1,"d-flex","justify-content-between","align-items-start","mb-3"],[2,"margin","0","color","var(--text-muted)","font-size","0.9rem"],[1,"row","g-3","mb-3"],[1,"col-md-6"],[2,"margin","0","color","var(--text-muted)","font-size","0.85rem","text-transform","uppercase","font-weight","600"],[2,"margin","0.25rem 0 0 0","color","var(--text-dark)"],[2,"margin","0.25rem 0 0 0","color","var(--brand)","font-weight","700","font-size","1.25rem"],["class","mt-3 pt-3","style","border-top: 1px solid #e9ecef;",4,"ngIf"],[1,"mt-3","pt-3",2,"border-top","1px solid #e9ecef"],[2,"margin","0 0 0.75rem 0","color","var(--text-muted)","font-size","0.85rem","text-transform","uppercase","font-weight","600"],[1,"d-flex","flex-column","gap-2"],["class","d-flex justify-content-between align-items-center p-2","style","background: #f8f9fa; border-radius: 8px;",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","p-2",2,"background","#f8f9fa","border-radius","8px"],[2,"color","var(--text-muted)","font-size","0.9rem","margin-left","0.5rem"],[2,"color","var(--text-dark)","font-weight","600"],["class","library-container",4,"ngIf"],[1,"text-muted"],[1,"library-container"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"row","g-3"],["class","col-md-6 col-lg-4",4,"ngFor","ngForOf"],[1,"col-md-6","col-lg-4"],[1,"library-book-card","h-100"],[1,"d-flex","flex-column","h-100"],[1,"library-book-image-container"],[1,"library-book-image",3,"src","alt"],[1,"library-book-details","p-3","flex-grow-1","d-flex","flex-column"],[1,"library-book-title"],["class","library-purchase-date text-muted mb-2",4,"ngIf"],[1,"mt-auto","pt-3"],["mat-raised-button","","color","primary",1,"w-100",3,"click","disabled"],["class","me-2",4,"ngIf"],["diameter","20","class","me-2",4,"ngIf"],[1,"library-purchase-date","text-muted","mb-2"],[1,"me-2"],["diameter","20",1,"me-2"],["class","author-status-container",4,"ngIf"],[1,"author-status-container"],["class","author-approved-card",4,"ngIf"],["class","author-pending-card",4,"ngIf"],["class","author-rejected-card",4,"ngIf"],["class","author-not-applied-card",4,"ngIf"],["class","author-form-container",4,"ngIf"],[1,"author-approved-card"],[1,"text-center","mb-4"],[1,"success-icon-large","mb-3"],[1,"bi","bi-check-circle-fill"],[1,"mb-2"],[1,"text-muted","mb-3"],[1,"mb-3"],[1,"badge","fs-6","px-3","py-2",3,"ngClass"],["mat-raised-button","","color","primary",1,"mt-2",3,"click"],[1,"bi","bi-person-badge","me-2"],["class","mt-4",4,"ngIf"],[1,"mt-4"],[1,"mt-1","mb-0"],[1,"author-pending-card"],[1,"pending-icon-large","mb-3"],[1,"bi","bi-clock-history"],[1,"author-rejected-card"],[1,"error-icon-large","mb-3"],[1,"bi","bi-x-circle-fill"],[1,"bi","bi-pencil-square","me-2"],[1,"author-not-applied-card"],[1,"author-icon-large","mb-3"],[1,"bi","bi-person-badge"],[1,"text-muted","mb-4"],[1,"author-form-container"],[1,"card-header","p-3","border-bottom"],[1,"mb-0"],[1,"text-muted","mb-0","small"],[1,"card-body","p-4"],[1,"d-flex","flex-column","gap-3",3,"ngSubmit","formGroup"],["matInput","","formControlName","name","placeholder","Enter your author name"],["matPrefix",""],["matInput","","formControlName","bio","rows","5","placeholder","Tell us about yourself, your writing experience, and what you plan to write about..."],[1,"d-flex","gap-2","mt-2"],[1,"bi","bi-send","me-2"],["role","status",1,"spinner-border","spinner-border-sm","me-2"],["class","mb-4 p-4 d-flex flex-column gap-2","style","background: #f8f9fa; border-radius: 12px;",3,"formGroup","ngSubmit",4,"ngIf"],["class","text-center p-4","style","background: #f8f9fa; border-radius: 12px;",4,"ngIf"],[1,"mb-4","p-4","d-flex","flex-column","gap-2",2,"background","#f8f9fa","border-radius","12px",3,"ngSubmit","formGroup"],["matInput","","formControlName","label","placeholder","e.g., Home, Work"],["matInput","","formControlName","fullName"],["matInput","","formControlName","phone","type","tel"],["matInput","","formControlName","line1"],["matInput","","formControlName","line2"],[1,"row","g-2"],["matInput","","formControlName","city"],["matInput","","formControlName","state"],["matInput","","formControlName","country"],["matInput","","formControlName","postalCode"],["formControlName","isDefault"],["class","address-card",4,"ngFor","ngForOf"],[1,"address-card"],["class","p-4 d-flex flex-column gap-2",3,"formGroup","ngSubmit",4,"ngIf"],["class","address-body",4,"ngIf"],[1,"p-4","d-flex","flex-column","gap-2",3,"ngSubmit","formGroup"],["matInput","","formControlName","label"],[1,"address-body"],[1,"address-header"],[1,"address-label"],["class","badge bg-primary ms-2",4,"ngIf"],["class","d-flex gap-1",4,"ngIf"],["class","address-field",4,"ngIf"],[1,"badge","bg-primary","ms-2"],[1,"d-flex","gap-1"],["mat-icon-button","","title","Edit Address",3,"click"],["mat-icon-button","","color","warn","title","Delete Address",3,"click"],[1,"address-field"],[1,"text-center","p-4",2,"background","#f8f9fa","border-radius","12px"],[1,"text-muted","mb-0"],[1,"modal-overlay",3,"click"],[1,"modal-card",3,"click"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"modal-actions"],["mat-raised-button","","color","warn",1,"flex-fill",3,"click","disabled"],["mat-stroked-button","",1,"flex-fill",3,"click","disabled"],["matInput","","type","password","formControlName","password"],["mat-raised-button","","color","warn","type","submit",1,"flex-fill",3,"disabled"],[1,"message-overlay"],[1,"message-card",3,"click"],["type","button",1,"close-btn",3,"click"],[1,"message-content"],["diameter","48","class","mx-auto mb-3",4,"ngIf"],[1,"message-text"],["diameter","48",1,"mx-auto","mb-3"]],template:function(e,s){e&1&&c(0,Tr,62,25,"div",1)(1,Fr,13,3,"div",2)(2,Lr,19,5,"div",2)(3,Dr,8,10,"div",3),e&2&&(l("ngIf",!s.isLoading||s.user),a(),l("ngIf",s.showDeleteAddressConfirm),a(),l("ngIf",s.showDeleteConfirm),a(),l("ngIf",s.isLoading||s.message))},dependencies:[Se,ke,M,Ee,W,te,Q,X,ee,ie,re,O,A,Oe,oe,$e,Ne,de,ae,He,se,le,me,tt,Xe,Qe,Ke,Je,Ie],styles:['[_ngcontent-%COMP%]:root{--brand: #dc3545;--brand-hover: #c82333;--text-dark: #2c3e50;--text-muted: #6c757d;--bg-light: #f8f9fa}.profile-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#fff,#f8f9fa);min-height:calc(100vh - 200px);padding:2rem 0}.sidebar-card[_ngcontent-%COMP%]{border-radius:20px!important;border:none!important;overflow:hidden;background:#fff;position:relative;box-shadow:0 8px 24px #00000014!important}.sidebar-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--brand),#ff6b6b,var(--brand));background-size:200% 100%;animation:_ngcontent-%COMP%_gradientShift 3s ease infinite}@keyframes _ngcontent-%COMP%_gradientShift{0%,to{background-position:0% 50%}50%{background-position:100% 50%}}.sidebar-header[_ngcontent-%COMP%]{text-align:center;padding:1.5rem 1.5rem 1rem;background:linear-gradient(135deg,#dc35450d,#fff);border-bottom:1px solid #e9ecef}.sidebar-title[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1.5rem;font-weight:700;margin:0;letter-spacing:-.5px}[_nghost-%COMP%]     .mat-mdc-list-item{border-radius:12px;margin:6px 12px;transition:all .3s ease;cursor:pointer}[_nghost-%COMP%]     .mat-mdc-list-item.active{background:var(--brand)!important;color:#fff!important;box-shadow:0 4px 12px #dc35454d}[_nghost-%COMP%]     .mat-mdc-list-item.active mat-icon{color:#fff!important}[_nghost-%COMP%]     .mat-mdc-list-item:hover:not(.active){background:#dc35451a;transform:translate(4px)}[_nghost-%COMP%]     .mat-mdc-list-item.text-danger:hover{background:#dc26261a}[_nghost-%COMP%]     .mat-mdc-list-item.text-danger mat-icon{color:#dc2626!important}[_nghost-%COMP%]     .mat-mdc-list-item.text-danger.active{background:#dc2626!important}.content-card[_ngcontent-%COMP%]{border-radius:20px!important;border:none!important;overflow:hidden;background:#fff;position:relative;box-shadow:0 8px 24px #00000014!important}.content-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--brand),#ff6b6b,var(--brand));background-size:200% 100%;animation:_ngcontent-%COMP%_gradientShift 3s ease infinite}.content-header[_ngcontent-%COMP%]{padding:1.5rem 2rem;background:linear-gradient(135deg,#dc35450d,#fff);border-bottom:1px solid #e9ecef}.content-title[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1.75rem;font-weight:700;margin:0;letter-spacing:-.5px}.content-body[_ngcontent-%COMP%]{padding:2rem}.field-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:12px;border:1px solid #e9ecef;transition:all .3s ease}.field-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000014;transform:translateY(-2px)}.field-label[_ngcontent-%COMP%]{color:var(--text-muted);text-transform:uppercase;font-size:.75rem;font-weight:700;letter-spacing:.5px;margin-bottom:.5rem}.field-value[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1rem;font-weight:500}[_nghost-%COMP%]     .mat-mdc-form-field{width:100%;margin-bottom:1rem}[_nghost-%COMP%]     .mat-mdc-text-field-wrapper{background-color:#f8f9fa;border-radius:8px}[_nghost-%COMP%]     .mat-mdc-form-field-focus-overlay{background-color:transparent}[_nghost-%COMP%]     .mat-mdc-form-field.mat-focused .mat-mdc-text-field-wrapper{background-color:#fff}[_nghost-%COMP%]     .mat-mdc-form-field .mat-mdc-text-field-wrapper .mat-mdc-form-field-flex{padding:0 12px}[_nghost-%COMP%]     .mat-mdc-form-field .mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control input{padding:12px 0}[_nghost-%COMP%]     .mat-mdc-form-field-subscript-wrapper{margin-top:4px}[_nghost-%COMP%]     .mat-mdc-form-field{--mdc-outlined-text-field-outline-color: #e9ecef;--mdc-outlined-text-field-hover-outline-color: var(--text-muted);--mdc-outlined-text-field-focus-outline-color: var(--brand);--mdc-outlined-text-field-label-text-color: var(--text-muted);--mdc-outlined-text-field-focus-label-text-color: var(--brand);--mdc-outlined-text-field-input-text-color: var(--text-dark)}[_nghost-%COMP%]     .mat-mdc-raised-button.mat-primary, [_nghost-%COMP%]     button[mat-raised-button].mat-primary{background-color:var(--brand)!important;color:#fff!important;box-shadow:0 4px 12px #dc35454d!important;border-radius:12px!important;font-weight:600!important;text-transform:none!important;letter-spacing:.5px;transition:all .3s ease!important;height:48px!important}[_nghost-%COMP%]     .mat-mdc-raised-button.mat-primary:hover:not(:disabled), [_nghost-%COMP%]     button[mat-raised-button].mat-primary:hover:not(:disabled){background-color:var(--brand-hover)!important;transform:translateY(-2px);box-shadow:0 6px 16px #dc354566!important}[_nghost-%COMP%]     .mat-mdc-raised-button.mat-primary:active:not(:disabled), [_nghost-%COMP%]     button[mat-raised-button].mat-primary:active:not(:disabled){transform:translateY(0)}[_nghost-%COMP%]     .mat-mdc-button.mat-stroked-button{border-radius:12px!important;font-weight:600!important;text-transform:none!important;letter-spacing:.5px;transition:all .3s ease!important;height:48px!important;border-color:#e9ecef!important;color:var(--text-dark)!important}[_nghost-%COMP%]     .mat-mdc-button.mat-stroked-button:hover:not(:disabled){background-color:#f8f9fa!important;border-color:var(--brand)!important;color:var(--brand)!important}[_nghost-%COMP%]     .mat-mdc-icon-button{color:var(--brand);transition:all .3s ease}[_nghost-%COMP%]     .mat-mdc-icon-button:hover{background-color:#dc35451a;transform:scale(1.1)}[_nghost-%COMP%]     .mat-mdc-icon-button.mat-warn{color:#dc2626}[_nghost-%COMP%]     .mat-mdc-icon-button.mat-warn:hover{background-color:#dc26261a}.badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:12px;font-size:12px;font-weight:600}.badge.bg-success[_ngcontent-%COMP%]{background-color:#86efac!important;color:#16a34a!important}.badge.bg-warning[_ngcontent-%COMP%]{background-color:#fef3c7!important;color:#d97706!important}.badge.bg-primary[_ngcontent-%COMP%]{background-color:var(--brand)!important;color:#fff!important}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem}.empty-state-icon[_ngcontent-%COMP%]{font-size:4rem;color:var(--text-muted);opacity:.5;margin-bottom:1rem}.empty-state-text[_ngcontent-%COMP%]{color:var(--text-muted);font-size:1.25rem;margin-bottom:1.5rem}.address-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:12px;border:1px solid #e9ecef;transition:all .3s ease;margin-bottom:1rem}.address-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000014;transform:translateY(-2px)}.address-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;align-items:center}.address-label[_ngcontent-%COMP%]{font-weight:700;color:var(--brand);font-size:1.1rem}.address-body[_ngcontent-%COMP%]{padding:1.5rem}.address-field[_ngcontent-%COMP%]{margin-bottom:.75rem;color:var(--text-dark)}.address-field[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-muted);font-weight:600;margin-right:.5rem}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0006;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);z-index:1000;display:flex;align-items:center;justify-content:center;padding:20px}.modal-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 20px 40px #00000026;max-width:450px;width:100%;position:relative;overflow:hidden}.modal-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--brand),#ff6b6b,var(--brand));background-size:200% 100%;animation:_ngcontent-%COMP%_gradientShift 3s ease infinite}.modal-header[_ngcontent-%COMP%]{padding:1.5rem 2rem 1rem;background:linear-gradient(135deg,#dc35450d,#fff);border-bottom:1px solid #e9ecef}.modal-title[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1.5rem;font-weight:700;margin:0;letter-spacing:-.5px}.modal-body[_ngcontent-%COMP%]{padding:1.5rem 2rem}.modal-actions[_ngcontent-%COMP%]{padding:1rem 2rem 1.5rem;border-top:1px solid #e9ecef;display:flex;gap:.75rem}.message-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0006;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);z-index:1000;display:flex;align-items:center;justify-content:center}.message-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 20px 40px #00000026;max-width:420px;width:100%;position:relative;overflow:hidden;border:2px solid #e9ecef}.message-card.border-success[_ngcontent-%COMP%]{border-color:#86efac!important}.message-card.border-danger[_ngcontent-%COMP%]{border-color:#fecaca!important}.message-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--brand),#ff6b6b,var(--brand));background-size:200% 100%;animation:_ngcontent-%COMP%_gradientShift 3s ease infinite}.message-content[_ngcontent-%COMP%]{padding:2rem;text-align:center}.message-text[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:var(--text-dark);margin:0}.message-text.text-success[_ngcontent-%COMP%]{color:#16a34a!important}.message-text.text-danger[_ngcontent-%COMP%]{color:#dc2626!important}.close-btn[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;background:transparent;border:none;cursor:pointer;font-size:24px;line-height:1;color:var(--text-muted);padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s;z-index:1}.close-btn[_ngcontent-%COMP%]:hover{color:var(--brand);background:#f3f4f6}.loading-container[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem}.loading-text[_ngcontent-%COMP%]{color:var(--text-muted);margin-top:1rem}.cart-items-container[_ngcontent-%COMP%]{margin-top:1rem}.cart-item-card[_ngcontent-%COMP%]{border-radius:12px;border:1px solid #e9ecef;transition:all .3s ease}.cart-item-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000014;transform:translateY(-2px)}.cart-item-image[_ngcontent-%COMP%]{flex-shrink:0}.cart-item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 2px 8px #0000001a}.orders-container[_ngcontent-%COMP%]{margin-top:1rem}.order-card[_ngcontent-%COMP%]{border-radius:12px;border:1px solid #e9ecef;transition:all .3s ease;margin-bottom:1rem}.order-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000014;transform:translateY(-2px)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in}@media (max-width: 968px){.sticky-top[_ngcontent-%COMP%]{position:relative!important;top:0!important;margin-bottom:1.5rem}[_nghost-%COMP%]     .mat-mdc-list-item span[matListItemTitle]{display:none}}.library-container[_ngcontent-%COMP%]{padding:0}.library-book-card[_ngcontent-%COMP%]{border-radius:12px!important;border:1px solid #e9ecef!important;overflow:hidden;transition:all .3s ease;background:#fff}.library-book-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #0000001f!important;border-color:var(--brand)!important}.library-book-image-container[_ngcontent-%COMP%]{width:100%;height:200px;overflow:hidden;background:#f8f9fa;display:flex;align-items:center;justify-content:center}.library-book-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.library-book-card[_ngcontent-%COMP%]:hover   .library-book-image[_ngcontent-%COMP%]{transform:scale(1.05)}.library-book-details[_ngcontent-%COMP%]{display:flex;flex-direction:column}.library-book-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:var(--text-dark);margin:0 0 .5rem;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.library-purchase-date[_ngcontent-%COMP%]{font-size:.85rem;margin:0}.author-status-container[_ngcontent-%COMP%]{padding:0}.author-approved-card[_ngcontent-%COMP%], .author-pending-card[_ngcontent-%COMP%], .author-rejected-card[_ngcontent-%COMP%], .author-not-applied-card[_ngcontent-%COMP%]{text-align:center;padding:2rem}.success-icon-large[_ngcontent-%COMP%], .pending-icon-large[_ngcontent-%COMP%], .error-icon-large[_ngcontent-%COMP%], .author-icon-large[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;font-size:48px;margin:0 auto;animation:_ngcontent-%COMP%_scaleIn .3s ease-out}.success-icon-large[_ngcontent-%COMP%]{background:#d1fae5;color:#16a34a}.pending-icon-large[_ngcontent-%COMP%]{background:#fef3c7;color:#d97706}.error-icon-large[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.author-icon-large[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc35451a,#dc354533);color:var(--brand)}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.author-form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}.author-form-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc35450d,#fff)}.author-form-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 4px 12px #00000014}.author-approved-card[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%], .author-pending-card[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:12px;border:1px solid #e9ecef}@media (max-width: 768px){.profile-section[_ngcontent-%COMP%]{padding:1rem 0}.content-body[_ngcontent-%COMP%]{padding:1.5rem}.content-title[_ngcontent-%COMP%]{font-size:1.5rem}.sidebar-title[_ngcontent-%COMP%]{font-size:1.25rem}.modal-card[_ngcontent-%COMP%]{margin:1rem}.modal-header[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%], .modal-actions[_ngcontent-%COMP%]{padding-left:1.5rem;padding-right:1.5rem}}@media (max-width: 576px){.content-body[_ngcontent-%COMP%]{padding:1.25rem}.content-title[_ngcontent-%COMP%]{font-size:1.25rem}.modal-header[_ngcontent-%COMP%]{padding:1.25rem 1.5rem .75rem}.modal-body[_ngcontent-%COMP%]{padding:1.25rem 1.5rem}.modal-actions[_ngcontent-%COMP%]{padding:1rem 1.5rem 1.25rem;flex-direction:column}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}']})};function qr(t,i){if(t&1&&(n(0,"h2",14),o(1),r()),t&2){let e=m();a(),x(" ",e.isError?"Restore Failed":"Account Restored!"," ")}}function Nr(t,i){t&1&&(n(0,"h2",14),o(1,"Restoring Your Account..."),r())}function Rr(t,i){if(t&1&&(n(0,"p",15),o(1),r()),t&2){let e=m();a(),x(" ",e.isLoading?"Please wait while we restore your account...":e.message," ")}}function Br(t,i){t&1&&p(0,"div",16)}function zr(t,i){t&1&&(n(0,"div",17),p(1,"i",18),r())}function jr(t,i){t&1&&(n(0,"div",19),p(1,"i",20),r())}function Gr(t,i){if(t&1){let e=C();n(0,"button",24),f("click",function(){g(e);let d=m(2);return v(d.goToLogin())}),p(1,"i",25),o(2," Go to Login "),r()}}function $r(t,i){if(t&1){let e=C();n(0,"button",26),f("click",function(){g(e);let d=m(2);return v(d.goToLogin())}),p(1,"i",27),o(2," Go to Login "),r()}}function Yr(t,i){if(t&1&&(n(0,"div",21),c(1,Gr,3,0,"button",22)(2,$r,3,0,"button",23),r()),t&2){let e=m();a(),l("ngIf",!e.isError),a(),l("ngIf",e.isError)}}var ue=class t{constructor(i,e,s){this.restoreAccountService=i;this.router=e;this.route=s}isLoading=!1;message="";isError=!1;token="";messageTimer=null;ngOnInit(){this.route.paramMap.subscribe(i=>{if(this.token=i.get("token")||"",this.token||(this.token=this.route.snapshot.paramMap.get("token")||""),this.token)try{this.token=decodeURIComponent(this.token)}catch(e){console.warn("Token decoding failed, using as-is:",e)}if(console.log("Token from route:",this.token),!this.token||this.token.trim()===""){this.message="Invalid restore token - token is missing",this.isError=!0,this.isLoading=!1,this.startAutoCloseTimer();return}this.restoreAccount()})}ngOnDestroy(){this.clearMessageTimer()}clearMessageTimer(){this.messageTimer&&(clearTimeout(this.messageTimer),this.messageTimer=null)}startAutoCloseTimer(){this.clearMessageTimer(),this.message&&!this.isLoading&&(this.messageTimer=setTimeout(()=>{this.closeMessage()},4e3))}closeMessage(){this.clearMessageTimer(),this.message="",this.isError=!1,this.isLoading=!1}restoreAccount(){if(!this.token||this.token.trim()===""){this.message="Invalid restore token",this.isError=!0,this.isLoading=!1,this.startAutoCloseTimer();return}this.isLoading=!0,this.isError=!1,this.message="",console.log("Restoring account with token:",this.token.substring(0,10)+"..."),this.restoreAccountService.restoreAccount(this.token).subscribe({next:i=>{this.message=i.message||"Account restored successfully! Redirecting to login page...",this.isLoading=!1,this.isError=!1,this.startAutoCloseTimer(),setTimeout(()=>{this.router.navigate(["/login"])},2e3)},error:i=>{console.error("Restore account error:",i);let e="Failed to restore account";i?.error?.error?e=i.error.error:i?.error?.message?e=i.error.message:i?.message&&(e=i.message),i?.status===400?e=i?.error?.error||"Invalid or expired restore link":i?.status===404?e=i?.error?.error||"User not found":i?.status===500&&(e=i?.error?.error||"Server error. Please try again later."),this.message=e,this.isError=!0,this.isLoading=!1,this.startAutoCloseTimer()}})}goToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||t)(S(T),S(Z),S(Ae))};static \u0275cmp=I({type:t,selectors:[["app-restore-account"]],standalone:!1,decls:16,vars:7,consts:[[1,"restore-section","py-5"],[1,"container"],[1,"row","justify-content-center"],[1,"col-12","col-md-8","col-lg-6","col-xl-5"],[1,"restore-card","shadow-lg"],[1,"restore-card-header"],[1,"logo-box","mb-3"],["class","restore-title",4,"ngIf"],["class","restore-subtitle",4,"ngIf"],[1,"restore-content"],["class","spinner",4,"ngIf"],["class","icon success-icon",4,"ngIf"],["class","icon error-icon",4,"ngIf"],["class","action-buttons",4,"ngIf"],[1,"restore-title"],[1,"restore-subtitle"],[1,"spinner"],[1,"icon","success-icon"],[1,"bi","bi-check-circle-fill"],[1,"icon","error-icon"],[1,"bi","bi-x-circle-fill"],[1,"action-buttons"],["mat-raised-button","","color","primary","class","action-btn w-100",3,"click",4,"ngIf"],["mat-stroked-button","","class","action-btn w-100",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",1,"action-btn","w-100",3,"click"],[1,"bi","bi-box-arrow-in-right","me-2"],["mat-stroked-button","",1,"action-btn","w-100",3,"click"],[1,"bi","bi-arrow-left","me-2"]],template:function(e,s){e&1&&(n(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-card",4)(5,"div",5)(6,"div",6),o(7,"B"),r(),c(8,qr,2,1,"h2",7)(9,Nr,2,0,"h2",7)(10,Rr,2,1,"p",8),r(),n(11,"div",9),c(12,Br,1,0,"div",10)(13,zr,2,0,"div",11)(14,jr,2,0,"div",12)(15,Yr,3,2,"div",13),r()()()()()()),e&2&&(a(8),l("ngIf",!s.isLoading&&s.message),a(),l("ngIf",s.isLoading),a(),l("ngIf",s.isLoading||s.message),a(2),l("ngIf",s.isLoading),a(),l("ngIf",!s.isLoading&&!s.isError&&s.message),a(),l("ngIf",!s.isLoading&&s.isError&&s.message),a(),l("ngIf",!s.isLoading&&s.message))},dependencies:[M,O,A],styles:['[_ngcontent-%COMP%]:root{--brand: #dc3545;--brand-hover: #c82333;--text-dark: #2c3e50;--text-muted: #6c757d;--bg-light: #f8f9fa}.restore-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#fff,#f8f9fa);min-height:calc(100vh - 200px);display:flex;align-items:center;padding:4rem 0}.restore-card[_ngcontent-%COMP%]{border-radius:20px!important;border:none!important;overflow:hidden;background:#fff;position:relative;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.restore-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--brand),#ff6b6b,var(--brand));background-size:200% 100%;animation:_ngcontent-%COMP%_gradientShift 3s ease infinite}@keyframes _ngcontent-%COMP%_gradientShift{0%,to{background-position:0% 50%}50%{background-position:100% 50%}}.restore-card-header[_ngcontent-%COMP%]{text-align:center;padding:2rem 2rem 1rem;background:linear-gradient(135deg,#dc35450d,#fff)}.logo-box[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:12px;display:inline-flex;align-items:center;justify-content:center;background:var(--brand);color:#fff;font-weight:800;font-size:1.5rem;margin:0 auto;box-shadow:0 4px 12px #dc35454d;transition:transform .3s ease,box-shadow .3s ease}.logo-box[_ngcontent-%COMP%]:hover{transform:translateY(-2px) scale(1.05);box-shadow:0 6px 16px #dc354566}.restore-title[_ngcontent-%COMP%]{color:var(--text-dark);font-size:2rem;font-weight:700;margin:1rem 0 .5rem;letter-spacing:-.5px}.restore-subtitle[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.95rem;margin:0;line-height:1.6}.restore-content[_ngcontent-%COMP%]{padding:2rem;display:flex;flex-direction:column;align-items:center;gap:2rem;text-align:center}.spinner[_ngcontent-%COMP%]{width:64px;height:64px;border:5px solid #f8d7da;border-top-color:var(--brand);border-radius:50%;animation:_ngcontent-%COMP%_spin .9s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.icon[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:48px;margin:0 auto;animation:_ngcontent-%COMP%_scaleIn .3s ease-out}.icon.success-icon[_ngcontent-%COMP%]{background:#d1fae5;color:#16a34a}.icon.error-icon[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.action-buttons[_ngcontent-%COMP%]{width:100%;margin-top:1rem}.action-btn[_ngcontent-%COMP%]{height:48px!important;font-size:1rem!important;font-weight:600!important;border-radius:12px!important;text-transform:none!important;letter-spacing:.5px;transition:all .3s ease!important}.action-btn[mat-raised-button][_ngcontent-%COMP%]{box-shadow:0 4px 12px #dc35454d!important}.action-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px)}.action-btn[mat-raised-button][_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 6px 16px #dc354566!important}.action-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}@media (max-width: 768px){.restore-section[_ngcontent-%COMP%]{padding:2rem 0;min-height:calc(100vh - 150px)}.restore-card-header[_ngcontent-%COMP%]{padding:1.5rem 1.5rem 1rem}.restore-content[_ngcontent-%COMP%]{padding:1.5rem}.restore-title[_ngcontent-%COMP%]{font-size:1.75rem}.logo-box[_ngcontent-%COMP%]{width:50px;height:50px;font-size:1.25rem}.icon[_ngcontent-%COMP%]{width:70px;height:70px;font-size:40px}}@media (max-width: 576px){.restore-card-header[_ngcontent-%COMP%]{padding:1.25rem 1rem .75rem}.restore-content[_ngcontent-%COMP%]{padding:1.25rem}.restore-title[_ngcontent-%COMP%]{font-size:1.5rem}.icon[_ngcontent-%COMP%]{width:60px;height:60px;font-size:36px}}']})};var Hr=[{path:"request-restore-account",component:ce},{path:"user-profile",component:pe},{path:"restored-account",component:ue}],fe=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=B({type:t});static \u0275inj=R({imports:[he.forChild(Hr),he]})};var dt=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=B({type:t});static \u0275inj=R({imports:[Me,fe,Ve,Le,De,Te,qe,Ye,Ue,Re,Ze,We,it,et]})};export{dt as a};
