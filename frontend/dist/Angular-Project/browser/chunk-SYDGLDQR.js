import{a as Xe,b as j,c as V}from"./chunk-RZHO2OWO.js";import{a as Lt}from"./chunk-OHDIIJHJ.js";import{a as we,b as Zt,c as Fe,d as Ne,e as st,f as ct,h as je,k as Dt,l as Ve,m as ze,n as He,o as kt,p as We,q as wt,r as Et,s as Ge}from"./chunk-VRDYXINS.js";import{a as Bt,b as tn}from"./chunk-AYZZRQ42.js";import{a as Tt,b as Ke}from"./chunk-TPLDUVTZ.js";import{a as en,f as nn,g as on,h as an,i as rn}from"./chunk-L7GH46DH.js";import{a as At,b as $e}from"./chunk-M7YYPVK7.js";import{$ as Ce,$c as Je,Aa as h,Ab as Mt,Ac as $,B as L,Bc as St,C as B,D as R,Db as Pe,E as q,Ea as ve,Ec as qe,F as g,Fa as be,Ga as xe,Gb as Ie,H as v,I as b,Ic as Qe,Jb as Se,L as w,Lb as N,Lc as Ue,M as me,Ma as at,Mb as Ot,O as pe,Oa as s,Ob as De,P as ge,Pa as _,Pb as ke,Q as ft,Qa as u,Qb as Pt,R as tt,Sb as Ee,Ta as E,Tb as Qt,U as ue,Ua as A,V as c,Va as T,Vb as Ae,W as _t,X as he,Y as fe,Yc as Ye,Z as _e,_c as Ze,a as k,aa as y,ab as M,ac as Te,b as le,bb as Ct,bc as Le,cb as P,da as O,dc as Be,ea as F,ec as rt,f as I,fa as Q,fc as It,ga as U,ha as ye,ia as C,ka as et,kb as Me,m as ut,na as m,o as de,oa as r,oc as Ut,p as K,pa as a,qa as f,qb as Oe,rb as yt,sb as Y,t as G,ua as nt,va as it,vc as Re,wb as vt,wc as Yt,x as ht,xa as ot,xb as bt,y as X,ya as qt,yc as $t,za as x,zb as xt}from"./chunk-DBZ4JVQV.js";function Mn(n,i){}var z=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;disableAnimations=!1;providers;container;templateContext};var Kt=(()=>{class n extends Ne{_elementRef=g(tt);_focusTrapFactory=g(Le);_config;_interactivityChecker=g(Te);_ngZone=g(he);_focusMonitor=g(Ae);_renderer=g(Ce);_changeDetectorRef=g(Me);_injector=g(w);_platform=g(Ee);_document=g(me);_portalOutlet;_focusTrapped=new I;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_isDestroyed=!1;constructor(){super(),this._config=g(z,{optional:!0})||new z,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(t){this._ariaLabelledByQueue.push(t),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(t){let e=this._ariaLabelledByQueue.indexOf(t);e>-1&&(this._ariaLabelledByQueue.splice(e,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._focusTrapped.complete(),this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();let e=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),e}attachTemplatePortal(t){this._portalOutlet.hasAttached();let e=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),e}attachDomPortal=t=>{this._portalOutlet.hasAttached();let e=this._portalOutlet.attachDomPortal(t);return this._contentAttached(),e};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,e){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let o=()=>{l(),d(),t.removeAttribute("tabindex")},l=this._renderer.listen(t,"blur",o),d=this._renderer.listen(t,"mousedown",o)})),t.focus(e)}_focusByCssSelector(t,e){let o=this._elementRef.nativeElement.querySelector(t);o&&this._forceFocus(o,e)}_trapFocus(t){this._isDestroyed||fe(()=>{let e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus(t);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(t)||this._focusDialogContainer(t);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',t);break;default:this._focusByCssSelector(this._config.autoFocus,t);break}this._focusTrapped.next()},{injector:this._injector})}_restoreFocus(){let t=this._config.restoreFocus,e=null;if(typeof t=="string"?e=this._document.querySelector(t):typeof t=="boolean"?e=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(e=t),this._config.restoreFocus&&e&&typeof e.focus=="function"){let o=Pt(),l=this._elementRef.nativeElement;(!o||o===this._document.body||o===l||l.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(t){this._elementRef.nativeElement.focus?.(t)}_containsFocus(){let t=this._elementRef.nativeElement,e=Pt();return t===e||t.contains(e)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Pt()))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=O({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(e,o){if(e&1&&ve(st,7),e&2){let l;be(l=xe())&&(o._portalOutlet=l.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(e,o){e&2&&et("id",o._config.id||null)("role",o._config.role)("aria-modal",o._config.ariaModal)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null)},features:[U],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,o){e&1&&C(0,Mn,0,0,"ng-template",0)},dependencies:[st],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return n})(),lt=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new I;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(i,t){this.overlayRef=i,this.config=t,this.disableClose=t.disableClose,this.backdropClick=i.backdropClick(),this.keydownEvents=i.keydownEvents(),this.outsidePointerEvents=i.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(e=>{e.keyCode===27&&!this.disableClose&&!It(e)&&(e.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{!this.disableClose&&this._canClose()?this.close(void 0,{focusOrigin:"mouse"}):this.containerInstance._recaptureFocus?.()}),this._detachSubscription=i.detachments().subscribe(()=>{t.closeOnOverlayDetachments!==!1&&this.close()})}close(i,t){if(this._canClose(i)){let e=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),e.next(i),e.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(i="",t=""){return this.overlayRef.updateSize({width:i,height:t}),this}addPanelClass(i){return this.overlayRef.addPanelClass(i),this}removePanelClass(i){return this.overlayRef.removePanelClass(i),this}_canClose(i){let t=this.config;return!!this.containerInstance&&(!t.closePredicate||t.closePredicate(i,t,this.componentInstance))}},On=new R("DialogScrollStrategy",{providedIn:"root",factory:()=>{let n=g(w);return()=>Dt(n)}}),Pn=new R("DialogData"),In=new R("DefaultDialogConfig");function Sn(n){let i=pe(n),t=new _t;return{valueSignal:i,get value(){return i()},change:t,ngOnDestroy(){t.complete()}}}var Xt=(()=>{class n{_injector=g(w);_defaultOptions=g(In,{optional:!0});_parentDialog=g(n,{optional:!0,skipSelf:!0});_overlayContainer=g(ze);_idGenerator=g(rt);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new I;_afterOpenedAtThisLevel=new I;_ariaHiddenElements=new Map;_scrollStrategy=g(On);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=ut(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ht(void 0)));constructor(){}open(t,e){let o=this._defaultOptions||new z;e=k(k({},o),e),e.id=e.id||this._idGenerator.getId("cdk-dialog-"),e.id&&this.getDialogById(e.id);let l=this._getOverlayConfig(e),d=We(this._injector,l),p=new lt(d,e),D=this._attachContainer(d,p,e);if(p.containerInstance=D,!this.openDialogs.length){let Gt=this._overlayContainer.getContainerElement();D._focusTrapped?D._focusTrapped.pipe(G(1)).subscribe(()=>{this._hideNonDialogContentFromAssistiveTechnology(Gt)}):this._hideNonDialogContentFromAssistiveTechnology(Gt)}return this._attachDialogContent(t,p,D,e),this.openDialogs.push(p),p.closed.subscribe(()=>this._removeOpenDialog(p,!0)),this.afterOpened.next(p),p}closeAll(){Jt(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(e=>e.id===t)}ngOnDestroy(){Jt(this._openDialogsAtThisLevel,t=>{t.config.closeOnDestroy===!1&&this._removeOpenDialog(t,!1)}),Jt(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){let e=new Ve({positionStrategy:t.positionStrategy||kt().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation,disableAnimations:t.disableAnimations});return t.backdropClass&&(e.backdropClass=t.backdropClass),e}_attachContainer(t,e,o){let l=o.injector||o.viewContainerRef?.injector,d=[{provide:z,useValue:o},{provide:lt,useValue:e},{provide:He,useValue:t}],p;o.container?typeof o.container=="function"?p=o.container:(p=o.container.type,d.push(...o.container.providers(o))):p=Kt;let D=new Zt(p,o.viewContainerRef,w.create({parent:l||this._injector,providers:d}));return t.attach(D).instance}_attachDialogContent(t,e,o,l){if(t instanceof _e){let d=this._createInjector(l,e,o,void 0),p={$implicit:l.data,dialogRef:e};l.templateContext&&(p=k(k({},p),typeof l.templateContext=="function"?l.templateContext():l.templateContext)),o.attachTemplatePortal(new Fe(t,null,p,d))}else{let d=this._createInjector(l,e,o,this._injector),p=o.attachComponentPortal(new Zt(t,l.viewContainerRef,d));e.componentRef=p,e.componentInstance=p.instance}}_createInjector(t,e,o,l){let d=t.injector||t.viewContainerRef?.injector,p=[{provide:Pn,useValue:t.data},{provide:lt,useValue:e}];return t.providers&&(typeof t.providers=="function"?p.push(...t.providers(e,t,o)):p.push(...t.providers)),t.direction&&(!d||!d.get(Yt,null,{optional:!0}))&&p.push({provide:Yt,useValue:Sn(t.direction)}),w.create({parent:d||l,providers:p})}_removeOpenDialog(t,e){let o=this.openDialogs.indexOf(t);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((l,d)=>{l?d.setAttribute("aria-hidden",l):d.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),e&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(t){if(t.parentElement){let e=t.parentElement.children;for(let o=e.length-1;o>-1;o--){let l=e[o];l!==t&&l.nodeName!=="SCRIPT"&&l.nodeName!=="STYLE"&&!l.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(l,l.getAttribute("aria-hidden")),l.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(e){return new(e||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Jt(n,i){let t=n.length;for(;t--;)i(n[t])}var cn=(()=>{class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=F({type:n});static \u0275inj=B({providers:[Xt],imports:[wt,ct,Be,ct]})}return n})();function Dn(n,i){}var mt=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;enterAnimationDuration;exitAnimationDuration},te="mdc-dialog--open",ln="mdc-dialog--opening",dn="mdc-dialog--closing",kn=150,wn=75,gn=(()=>{class n extends Kt{_animationStateChanged=new _t;_animationsEnabled=!Ut();_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?pn(this._config.enterAnimationDuration)??kn:0;_exitAnimationDuration=this._animationsEnabled?pn(this._config.exitAnimationDuration)??wn:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(mn,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(ln,te)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(te),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(te),this._animationsEnabled?(this._hostElement.style.setProperty(mn,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(dn)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(t){this._actionSectionCount+=t,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(ln,dn)}_waitForAnimationToComplete(t,e){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(e,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(t):t()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(t){let e=super.attachComponentPortal(t);return e.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),e}static \u0275fac=(()=>{let t;return function(o){return(t||(t=ft(n)))(o||n)}})();static \u0275cmp=O({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(e,o){e&2&&(qt("id",o._config.id),et("aria-modal",o._config.ariaModal)("role",o._config.role)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null),at("_mat-animation-noopable",!o._animationsEnabled)("mat-mdc-dialog-container-with-actions",o._actionSectionCount>0))},features:[U],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div",1),C(2,Dn,0,0,"ng-template",2),a()())},dependencies:[st],styles:[`.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mat-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mat-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mat-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mat-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mat-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mat-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mat-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mat-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mat-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mat-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mat-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mat-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mat-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;box-sizing:border-box;min-height:52px;margin:0;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}
`],encapsulation:2})}return n})(),mn="--mat-dialog-transition-duration";function pn(n){return n==null?null:typeof n=="number"?n:n.endsWith("ms")?Qt(n.substring(0,n.length-2)):n.endsWith("s")?Qt(n.substring(0,n.length-1))*1e3:n==="0"?0:null}var dt=(function(n){return n[n.OPEN=0]="OPEN",n[n.CLOSING=1]="CLOSING",n[n.CLOSED=2]="CLOSED",n})(dt||{}),H=class{_ref;_config;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new I;_beforeClosed=new I;_result;_closeFallbackTimeout;_state=dt.OPEN;_closeInteractionType;constructor(i,t,e){this._ref=i,this._config=t,this._containerInstance=e,this.disableClose=t.disableClose,this.id=i.id,i.addPanelClass("mat-mdc-dialog-panel"),e._animationStateChanged.pipe(K(o=>o.state==="opened"),G(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(K(o=>o.state==="closed"),G(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),i.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),de(this.backdropClick(),this.keydownEvents().pipe(K(o=>o.keyCode===27&&!this.disableClose&&!It(o)))).subscribe(o=>{this.disableClose||(o.preventDefault(),ee(this,o.type==="keydown"?"keyboard":"mouse"))})}close(i){let t=this._config.closePredicate;t&&!t(i,this._config,this.componentInstance)||(this._result=i,this._containerInstance._animationStateChanged.pipe(K(e=>e.state==="closing"),G(1)).subscribe(e=>{this._beforeClosed.next(i),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=dt.CLOSING,this._containerInstance._startExitAnimation())}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(i){let t=this._ref.config.positionStrategy;return i&&(i.left||i.right)?i.left?t.left(i.left):t.right(i.right):t.centerHorizontally(),i&&(i.top||i.bottom)?i.top?t.top(i.top):t.bottom(i.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(i="",t=""){return this._ref.updateSize(i,t),this}addPanelClass(i){return this._ref.addPanelClass(i),this}removePanelClass(i){return this._ref.removePanelClass(i),this}getState(){return this._state}_finishDialogClose(){this._state=dt.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function ee(n,i,t){return n._closeInteractionType=i,n.close(t)}var Rt=new R("MatMdcDialogData"),un=new R("mat-mdc-dialog-default-options"),hn=new R("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let n=g(w);return()=>Dt(n)}}),Z=(()=>{class n{_defaultOptions=g(un,{optional:!0});_scrollStrategy=g(hn);_parentDialog=g(n,{optional:!0,skipSelf:!0});_idGenerator=g(rt);_injector=g(w);_dialog=g(Xt);_animationsDisabled=Ut();_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new I;_afterOpenedAtThisLevel=new I;dialogConfigClass=mt;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=ut(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ht(void 0)));constructor(){this._dialogRefConstructor=H,this._dialogContainerType=gn,this._dialogDataToken=Rt}open(t,e){let o;e=k(k({},this._defaultOptions||new mt),e),e.id=e.id||this._idGenerator.getId("mat-mdc-dialog-"),e.scrollStrategy=e.scrollStrategy||this._scrollStrategy();let l=this._dialog.open(t,le(k({},e),{positionStrategy:kt(this._injector).centerHorizontally().centerVertically(),disableClose:!0,closePredicate:void 0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,disableAnimations:this._animationsDisabled||e.enterAnimationDuration?.toLocaleString()==="0"||e.exitAnimationDuration?.toString()==="0",container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:e},{provide:z,useValue:e}]},templateContext:()=>({dialogRef:o}),providers:(d,p,D)=>(o=new this._dialogRefConstructor(d,e,D),o.updatePosition(e?.position),[{provide:this._dialogContainerType,useValue:D},{provide:this._dialogDataToken,useValue:p.data},{provide:this._dialogRefConstructor,useValue:o}])}));return o.componentRef=l.componentRef,o.componentInstance=l.componentInstance,this.openDialogs.push(o),this.afterOpened.next(o),o.afterClosed().subscribe(()=>{let d=this.openDialogs.indexOf(o);d>-1&&(this.openDialogs.splice(d,1),this.openDialogs.length||this._getAfterAllClosed().next())}),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(e=>e.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let e=t.length;for(;e--;)t[e].close()}static \u0275fac=function(e){return new(e||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ne=(()=>{class n{dialogRef=g(H,{optional:!0});_elementRef=g(tt);_dialog=g(Z);ariaLabel;type="button";dialogResult;_matDialogClose;constructor(){}ngOnInit(){this.dialogRef||(this.dialogRef=_n(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){let e=t._matDialogClose||t._matDialogCloseResult;e&&(this.dialogResult=e.currentValue)}_onButtonClick(t){ee(this.dialogRef,t.screenX===0&&t.screenY===0?"keyboard":"mouse",this.dialogResult)}static \u0275fac=function(e){return new(e||n)};static \u0275dir=Q({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(e,o){e&1&&x("click",function(d){return o._onButtonClick(d)}),e&2&&et("aria-label",o.ariaLabel||null)("type",o.type)},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],type:"type",dialogResult:[0,"mat-dialog-close","dialogResult"],_matDialogClose:[0,"matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[ge]})}return n})(),fn=(()=>{class n{_dialogRef=g(H,{optional:!0});_elementRef=g(tt);_dialog=g(Z);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=_n(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(e){return new(e||n)};static \u0275dir=Q({type:n})}return n})(),ie=(()=>{class n extends fn{id=g(rt).getId("mat-mdc-dialog-title-");_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static \u0275fac=(()=>{let t;return function(o){return(t||(t=ft(n)))(o||n)}})();static \u0275dir=Q({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(e,o){e&2&&qt("id",o.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],features:[U]})}return n})(),oe=(()=>{class n{static \u0275fac=function(e){return new(e||n)};static \u0275dir=Q({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],features:[ye([je])]})}return n})(),ae=(()=>{class n extends fn{align;_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}static \u0275fac=(()=>{let t;return function(o){return(t||(t=ft(n)))(o||n)}})();static \u0275dir=Q({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(e,o){e&2&&at("mat-mdc-dialog-actions-align-start",o.align==="start")("mat-mdc-dialog-actions-align-center",o.align==="center")("mat-mdc-dialog-actions-align-end",o.align==="end")},inputs:{align:"align"},features:[U]})}return n})();function _n(n,i){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?i.find(e=>e.id===t.id):null}var pt=(()=>{class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=F({type:n});static \u0275inj=B({providers:[Z],imports:[cn,wt,ct,$t,$t]})}return n})();var gt=class n{constructor(i,t){this.dialogRef=i;this.data=t}static \u0275fac=function(t){return new(t||n)(y(H),y(Rt))};static \u0275cmp=O({type:n,selectors:[["app-confirm-dialog"]],standalone:!1,decls:11,vars:6,consts:[[1,"confirm-dialog"],["mat-dialog-title",""],["align","end"],["mat-button","",1,"cancel-btn",3,"mat-dialog-close"],["mat-raised-button","","color","warn",1,"confirm-btn",3,"mat-dialog-close"]],template:function(t,e){t&1&&(r(0,"div",0)(1,"h2",1),s(2),a(),r(3,"mat-dialog-content")(4,"p"),s(5),a()(),r(6,"mat-dialog-actions",2)(7,"button",3),s(8),a(),r(9,"button",4),s(10),a()()()),t&2&&(c(2),_(e.data.title),c(3),_(e.data.message),c(2),m("mat-dialog-close",!1),c(),u(" ",e.data.cancelText||"Cancel"," "),c(),m("mat-dialog-close",!0),c(),u(" ",e.data.confirmText||"Confirm"," "))},dependencies:[ne,ie,ae,oe,$],styles:[".confirm-dialog[_ngcontent-%COMP%]{padding:0}h2[mat-dialog-title][_ngcontent-%COMP%]{margin:0;padding:24px 24px 16px;font-size:1.5rem;font-weight:600;color:#2c3e50;border-bottom:1px solid #e9ecef}mat-dialog-content[_ngcontent-%COMP%]{padding:24px;margin:0;min-height:60px}mat-dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem;color:#6c757d;line-height:1.6}mat-dialog-actions[_ngcontent-%COMP%]{padding:16px 24px 24px;margin:0;border-top:1px solid #e9ecef}.cancel-btn[_ngcontent-%COMP%]{margin-right:8px;color:#6c757d}.cancel-btn[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.confirm-btn[_ngcontent-%COMP%]{min-width:100px;background-color:#dc3545;color:#fff}.confirm-btn[_ngcontent-%COMP%]:hover{background-color:#c82333}"]})};var re=ke.apiUrl,J=class n{constructor(i){this.http=i}getHeaders(){let i=localStorage.getItem("token");return new Pe({Authorization:`Bearer ${i}`})}placeOrder(i){return this.http.post(`${re}/orders`,i,{headers:this.getHeaders()})}createCheckout(i){return this.http.post(`${re}/payments/create-checkout/${i}`,{},{headers:this.getHeaders()})}cancelOrder(i){return this.http.post(`${re}/orders/${i}/cancel`,{},{headers:this.getHeaders()})}static \u0275fac=function(t){return new(t||n)(q(Ie))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function Rn(n,i){n&1&&(r(0,"div",4),f(1,"mat-spinner"),a())}function Fn(n,i){n&1&&(r(0,"div",5)(1,"mat-icon",6),s(2,"shopping_cart"),a(),r(3,"h2"),s(4,"Your cart is empty"),a(),r(5,"p"),s(6,"Add some books to get started!"),a(),r(7,"button",7),s(8," Browse Books "),a()())}function Nn(n,i){n&1&&(r(0,"mat-icon"),s(1,"check_circle"),a())}function jn(n,i){n&1&&(r(0,"mat-icon"),s(1,"error"),a())}function Vn(n,i){if(n&1&&(r(0,"span"),s(1),a()),n&2){let t=h(2).$implicit;c(),u("(",t.stockAvailable," available)")}}function zn(n,i){if(n&1&&(r(0,"span"),s(1," In Stock "),C(2,Vn,2,1,"span",27),a()),n&2){let t=h().$implicit;c(2),m("ngIf",t.stockAvailable&&t.stockAvailable<=5)}}function Hn(n,i){n&1&&(r(0,"span"),s(1,"Out of Stock"),a())}function Wn(n,i){if(n&1){let t=ot();r(0,"mat-card",19)(1,"div",20)(2,"div",21),f(3,"img",22),a(),r(4,"div",23)(5,"h3"),s(6),a(),r(7,"p",24),s(8),a(),r(9,"p",25),s(10),a(),r(11,"div",26),C(12,Nn,2,0,"mat-icon",27)(13,jn,2,0,"mat-icon",27)(14,zn,3,1,"span",27)(15,Hn,2,0,"span",27),a()(),r(16,"div",28)(17,"button",29),x("click",function(){let o=v(t).$implicit,l=h(2);return b(l.decreaseQty(o))}),r(18,"mat-icon"),s(19,"remove"),a()(),r(20,"input",30),x("change",function(o){let l=v(t).$implicit,d=h(2);return b(d.updateQty(l,o))}),a(),r(21,"button",29),x("click",function(){let o=v(t).$implicit,l=h(2);return b(l.increaseQty(o))}),r(22,"mat-icon"),s(23,"add"),a()()(),r(24,"div",31)(25,"p",32),s(26,"Total"),a(),r(27,"p",33),s(28),a()(),r(29,"button",34),x("click",function(){let o=v(t).$implicit,l=h(2);return b(l.removeItem(o))}),r(30,"mat-icon"),s(31,"delete"),a()()()()}if(n&2){let t,e,o,l,d=i.$implicit,p=h(2);c(3),m("src",((t=p.getBook(d))==null||t.image==null?null:t.image.url)||"https://via.placeholder.com/150x200?text=Book",ue)("alt",((e=p.getBook(d))==null?null:e.title)||"Book"),c(3),_(((o=p.getBook(d))==null?null:o.title)||"Unknown Book"),c(2),u("by ",((l=p.getBook(d))==null?null:l.author)||"Unknown Author"),c(2),u("",d.priceAtAdd," EGP"),c(),at("out-of-stock",!d.isInStock),c(),m("ngIf",d.isInStock),c(),m("ngIf",!d.isInStock),c(),m("ngIf",d.isInStock),c(),m("ngIf",!d.isInStock),c(2),m("disabled",d.qty<=1),c(3),m("value",d.qty)("max",d.stockAvailable||999),c(),m("disabled",d.qty>=(d.stockAvailable||999)),c(7),u("",p.getItemTotal(d)," EGP")}}function Gn(n,i){if(n&1){let t=ot();r(0,"div",8)(1,"div",9)(2,"h1"),s(3),a(),r(4,"button",10),x("click",function(){v(t);let o=h();return b(o.clearCart())}),r(5,"mat-icon"),s(6,"delete_sweep"),a(),s(7," Clear Cart "),a()(),r(8,"div",11),C(9,Wn,32,16,"mat-card",12),a(),r(10,"mat-card",13)(11,"h2"),s(12,"Order Summary"),a(),r(13,"div",14)(14,"span"),s(15),a(),r(16,"span"),s(17),a()(),r(18,"div",14)(19,"span"),s(20,"Shipping"),a(),r(21,"span",15),s(22,"Applied on checkout"),a()(),f(23,"mat-divider"),r(24,"div",16)(25,"span"),s(26,"Total"),a(),r(27,"span"),s(28),a()(),r(29,"button",17),s(30," Proceed to Checkout "),a(),r(31,"button",18),s(32," Continue Shopping "),a()()()}if(n&2){let t=h();c(3),u("Shopping Cart (",t.itemCount," items)"),c(6),m("ngForOf",t.cartItems),c(6),u("Subtotal (",t.itemCount," items)"),c(2),u("",t.subtotal," EGP"),c(11),u("",t.subtotal," EGP"),c(),m("disabled",t.isEmpty)}}var Nt=class n{constructor(i,t,e,o,l){this.cartService=i;this.snackBar=t;this.router=e;this.cartOrders=o;this.dialog=l}cart=null;loading=!1;isEmpty=!1;destroy$=new I;ngOnInit(){this.loadCart()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadCart(){this.loading=!0,this.cartService.getCart().pipe(X(this.destroy$)).subscribe({next:i=>{this.cart=i.data,this.isEmpty=!this.cart.items||this.cart.items.length===0,this.loading=!1},error:i=>{console.error("Error loading cart:",i),this.showMessage(i.error?.message||"Error loading cart"),this.loading=!1,this.isEmpty=!0}})}getBook(i){return typeof i.bookId=="object"?i.bookId:null}getBookId(i){let t=this.getBook(i);return t?t._id:i.bookId}get subtotal(){return this.cart?.totals.subTotal||0}get itemCount(){return this.cart?.items.reduce((i,t)=>i+t.qty,0)||0}get cartItems(){return this.cart?.items||[]}increaseQty(i){let t=this.getBook(i),e=i.stockAvailable||t?.stock||0;if(i.qty>=e){this.showMessage("Maximum stock reached!");return}this.updateQuantity(i,i.qty+1)}decreaseQty(i){i.qty<=1||this.updateQuantity(i,i.qty-1)}updateQty(i,t){let e=parseInt(t.target.value),o=this.getBook(i),l=i.stockAvailable||o?.stock||0;if(isNaN(e)||e<1){t.target.value=1,this.updateQuantity(i,1);return}if(e>l){this.showMessage(`Only ${l} items available`),t.target.value=l,this.updateQuantity(i,l);return}this.updateQuantity(i,e)}updateQuantity(i,t){let e=this.getBookId(i);this.cartService.updateCartItem({bookId:e,qty:t}).pipe(X(this.destroy$)).subscribe({next:o=>{this.cart=o.data,this.showMessage("Cart updated")},error:o=>{console.error("Error updating cart:",o),this.showMessage(o.error?.message||"Error updating cart"),this.loadCart()}})}removeItem(i){let e=this.getBook(i)?.title||"this item";this.dialog.open(gt,{width:"400px",data:{title:"Remove Item",message:`Remove "${e}" from cart?`,confirmText:"Remove",cancelText:"Cancel"}}).afterClosed().subscribe(l=>{if(l){let d=this.getBookId(i);this.cartService.removeFromCart(d).pipe(X(this.destroy$)).subscribe({next:p=>{this.cart=p.data,this.isEmpty=this.cart.items.length===0,this.showMessage("Item removed from cart")},error:p=>{console.error("Error removing item:",p),this.showMessage(p.error?.message||"Error removing item")}})}})}clearCart(){this.dialog.open(gt,{width:"400px",data:{title:"Clear Cart",message:"Clear all items from cart?",confirmText:"Clear",cancelText:"Cancel"}}).afterClosed().subscribe(t=>{t&&this.cartService.clearCart().pipe(X(this.destroy$)).subscribe({next:e=>{this.cart=e.data,this.isEmpty=!0,this.showMessage("Cart cleared")},error:e=>{console.error("Error clearing cart:",e),this.showMessage(e.error?.message||"Error clearing cart")}})})}checkout(){if(this.isEmpty){this.showMessage("Cart is empty!");return}if(this.cartItems.filter(t=>!t.isInStock).length>0){this.showMessage("Some items are out of stock. Please remove them before checkout.");return}this.router.navigate(["/checkout"])}getItemTotal(i){return i.priceAtAdd*i.qty}showMessage(i){this.snackBar.open(i,"Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top"})}static \u0275fac=function(t){return new(t||n)(y(Lt),y(Et),y(N),y(J),y(Z))};static \u0275cmp=O({type:n,selectors:[["app-cart"]],standalone:!1,decls:6,vars:3,consts:[[1,"cart-container"],["class","loading-container",4,"ngIf"],["class","empty-cart",4,"ngIf"],["class","cart-content",4,"ngIf"],[1,"loading-container"],[1,"empty-cart"],[1,"empty-icon"],["mat-raised-button","","color","primary","routerLink","/"],[1,"cart-content"],[1,"cart-header"],["mat-button","","color","warn",3,"click"],[1,"cart-items"],["class","cart-item-card",4,"ngFor","ngForOf"],[1,"cart-summary"],[1,"summary-row"],[1,"free"],[1,"summary-row","total"],["mat-raised-button","","color","primary","routerLink","payment",1,"checkout-btn",3,"disabled"],["mat-stroked-button","","routerLink","/",1,"continue-btn"],[1,"cart-item-card"],[1,"item-content"],[1,"item-image"],[3,"src","alt"],[1,"item-details"],[1,"author"],[1,"price"],[1,"stock-status"],[4,"ngIf"],[1,"item-quantity"],["mat-icon-button","",3,"click","disabled"],["type","number","min","1",3,"change","value","max"],[1,"item-total"],[1,"total-label"],[1,"total-amount"],["mat-icon-button","","color","warn",1,"remove-btn",3,"click"]],template:function(t,e){t&1&&(f(0,"app-header"),r(1,"div",0),C(2,Rn,2,0,"div",1)(3,Fn,9,0,"div",2)(4,Gn,33,6,"div",3),a(),f(5,"app-footer")),t&2&&(c(2),m("ngIf",e.loading),c(),m("ngIf",!e.loading&&e.isEmpty),c(),m("ngIf",!e.loading&&!e.isEmpty&&e.cart))},dependencies:[yt,Y,Ot,At,$,Re,Ze,Bt,Tt,j,V],styles:['.cart-container[_ngcontent-%COMP%]{max-width:1200px;margin:40px auto;background-image:url("./media/bg-ORFP7ZH5.jpg");background-size:cover;background-position:center;background-repeat:no-repeat;background-attachment:fixed;min-height:100vh;padding:60px 20px}.cart-container[_ngcontent-%COMP%]   .empty-cart[_ngcontent-%COMP%]{text-align:center;padding:80px 20px;background:#fff;border-radius:0;box-shadow:none;border:1px solid #e8e8e8}.cart-container[_ngcontent-%COMP%]   .empty-cart[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:100px;width:100px;height:100px;color:#ddd;margin-bottom:24px}.cart-container[_ngcontent-%COMP%]   .empty-cart[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:12px;color:#222;font-size:28px;font-weight:400}.cart-container[_ngcontent-%COMP%]   .empty-cart[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#888;margin-bottom:32px;font-size:16px}.cart-container[_ngcontent-%COMP%]   .empty-cart[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:16px 40px;font-size:12px;text-transform:uppercase;letter-spacing:1.5px;background-color:#ff5a7a;border-color:#ff5a7a}.cart-container[_ngcontent-%COMP%]   .empty-cart[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#e54965;border-color:#e54965}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 380px;gap:30px;background-color:transparent}@media (max-width: 968px){.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]{grid-template-columns:1fr}}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-header[_ngcontent-%COMP%]{grid-column:1/-1;display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding:20px;background:#fff;border-radius:0;box-shadow:none;border:1px solid #e8e8e8}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;color:#222;font-weight:400}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#ff5a7a}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#fff5f7}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]{padding:24px;transition:all .3s ease;box-shadow:none;border:1px solid #e8e8e8;background:#fff}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]:hover{box-shadow:0 2px 8px #00000014}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:120px 1fr auto auto auto;gap:24px;align-items:center}@media (max-width: 768px){.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]{grid-template-columns:100px 1fr;gap:16px}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%], .cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-total[_ngcontent-%COMP%], .cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{grid-column:2}}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:160px;object-fit:cover;border-radius:8px;box-shadow:0 2px 8px #0000001a}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:20px;color:#222;font-weight:500}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{color:#888;margin:0 0 8px;font-size:14px}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-weight:500;color:#222;margin:0 0 12px;font-size:18px}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .stock-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#4caf50;font-weight:500}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .stock-status[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .stock-status.out-of-stock[_ngcontent-%COMP%]{color:#f44336}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;border:1px solid #e8e8e8;border-radius:50px;padding:4px;background:#fff}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#888}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#faf8f5}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled)   mat-icon[_ngcontent-%COMP%]{color:#222}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled   mat-icon[_ngcontent-%COMP%]{color:#ccc}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60px;text-align:center;border:none;background:transparent;font-size:16px;font-weight:500;color:#222}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button, .cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-total[_ngcontent-%COMP%]{text-align:right;min-width:120px}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-total[_ngcontent-%COMP%]   .total-label[_ngcontent-%COMP%]{font-size:12px;color:#888;margin:0 0 4px;text-transform:uppercase;letter-spacing:.5px}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-total[_ngcontent-%COMP%]   .total-amount[_ngcontent-%COMP%]{font-size:20px;font-weight:500;color:#222;margin:0}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#bbb}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:hover{background:transparent}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-items[_ngcontent-%COMP%]   .cart-item-card[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#ff5a7a}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-summary[_ngcontent-%COMP%]{padding:28px;height:fit-content;position:sticky;top:20px;box-shadow:none;background:#faf8f5;border:1px solid #e8e8e8}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-summary[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 24px;font-size:22px;color:#222;font-weight:500;border-bottom:1px solid #e8e8e8;padding-bottom:12px}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-summary[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:16px;font-size:16px;color:#888}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-summary[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{font-weight:500;color:#222}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-summary[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   .free[_ngcontent-%COMP%]{color:#4caf50;font-weight:500}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-summary[_ngcontent-%COMP%]   .summary-row.total[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#222;margin-top:16px;padding-top:16px;border-top:2px solid #222}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-summary[_ngcontent-%COMP%]   .summary-row.total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{color:#222}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-summary[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{margin:24px 0;background-color:#e8e8e8}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-summary[_ngcontent-%COMP%]   .checkout-btn[_ngcontent-%COMP%]{width:100%;padding:18px;font-size:12px;font-weight:700;margin-top:24px;margin-bottom:12px;letter-spacing:1.5px;text-transform:uppercase;background-color:#ff5a7a;border-color:#ff5a7a;color:#fff}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-summary[_ngcontent-%COMP%]   .checkout-btn[_ngcontent-%COMP%]:hover{background-color:#e54965;border-color:#e54965}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-summary[_ngcontent-%COMP%]   .continue-btn[_ngcontent-%COMP%]{width:100%;padding:12px;font-weight:500;color:#888;border-color:#e8e8e8}.cart-container[_ngcontent-%COMP%]   .cart-content[_ngcontent-%COMP%]   .cart-summary[_ngcontent-%COMP%]   .continue-btn[_ngcontent-%COMP%]:hover{background-color:#ff5a7a;color:#fff;border-color:#ff5a7a}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.cart-item-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px;background:#fff;border-radius:12px;margin:40px 0}']})};function qn(n,i){if(n&1&&(r(0,"tr")(1,"td",29),s(2),a(),r(3,"td",12),s(4),a(),r(5,"td",12),s(6),M(7,"currency"),a()()),n&2){let t=i.$implicit,e=h().ngIf;c(2),_(t.bookId),c(2),_(t.qty),c(2),_(P(7,3,t.priceAtAdd,e.currency))}}function Qn(n,i){if(n&1&&(r(0,"div",9)(1,"div",10)(2,"div")(3,"div",11),s(4,"Order ID"),a(),r(5,"div",4),s(6),a()(),r(7,"div",12)(8,"div",11),s(9,"Placed at"),a(),r(10,"div"),s(11),M(12,"date"),a()()(),r(13,"div",13)(14,"div",14)(15,"div",15)(16,"div",16),s(17,"Shipping Address"),a(),r(18,"div",11)(19,"div",17),s(20),a(),r(21,"div"),s(22),a(),r(23,"div"),s(24),a(),r(25,"div"),s(26),a()()()(),r(27,"div",14)(28,"div",15)(29,"div",16),s(30,"Amounts"),a(),r(31,"div",18)(32,"div",19)(33,"span",3),s(34,"Items total"),a(),r(35,"span",4),s(36),M(37,"currency"),a()(),r(38,"div",19)(39,"span",3),s(40,"Shipping"),a(),r(41,"span",4),s(42),M(43,"currency"),a()(),r(44,"div",19)(45,"span",3),s(46,"Discount"),a(),r(47,"span",20),s(48),M(49,"currency"),a()(),f(50,"hr",21),r(51,"div",19)(52,"span",4),s(53,"Grand total"),a(),r(54,"span",22),s(55),M(56,"currency"),a()()()()(),r(57,"div",14)(58,"div",15)(59,"div",16),s(60,"Status"),a(),r(61,"div",18)(62,"span",23),s(63),M(64,"titlecase"),a(),r(65,"div",24),s(66," Thank you for your purchase!"),f(67,"br"),s(68," You will receive an email with the order details. "),a()()()()(),r(69,"div",25)(70,"table",26)(71,"thead",27)(72,"tr")(73,"th"),s(74,"Item (bookId)"),a(),r(75,"th",12),s(76,"Qty"),a(),r(77,"th",12),s(78,"Price"),a()()(),r(79,"tbody"),C(80,qn,8,6,"tr",28),a()()()()),n&2){let t=i.ngIf;c(6),_(t._id),c(5),_(P(12,12,t.placedAt,"short")),c(9),_(t.shippingAddress.fullName),c(2),u("Phone: ",t.shippingAddress.phone),c(2),u("City: ",t.shippingAddress.city),c(2),u("Country: ",t.shippingAddress.country),c(10),_(P(37,15,t.amounts.itemsTotal,t.currency)),c(6),u(" ",P(43,18,t.amounts.shipping,t.currency)," "),c(6),u(" -",P(49,21,t.amounts.discount,t.currency)," "),c(7),_(P(56,24,t.amounts.grandTotal,t.currency)),c(8),u(" ",Ct(64,27,t.status)," "),c(17),m("ngForOf",t.items)}}function Un(n,i){n&1&&(r(0,"div",30),s(1," No order details available. "),a())}var Vt=class n{constructor(i,t){this.route=i;this.router=t}sessionId;order=null;ngOnInit(){this.sessionId=this.route.snapshot.queryParamMap.get("session_id");try{let i=localStorage.getItem("lastOrder");i&&(this.order=JSON.parse(i),localStorage.removeItem("lastOrder"))}catch{this.order=null}}goNow(){this.router.navigateByUrl("/")}static \u0275fac=function(t){return new(t||n)(y(Se),y(N))};static \u0275cmp=O({type:n,selectors:[["app-payment-success"]],standalone:!1,decls:18,vars:3,consts:[[1,"container","py-5"],[1,"text-center","mb-4"],[1,"text-success","mb-2"],[1,"text-muted"],[1,"fw-semibold"],[1,"text-muted","mb-4"],[1,"btn","btn-outline-dark","mb-4",3,"click"],["class","card card-glass p-3",4,"ngIf"],["class","text-center text-muted",4,"ngIf"],[1,"card","card-glass","p-3"],[1,"d-flex","justify-content-between","align-items-center","mb-3","flex-wrap","gap-2"],[1,"small","text-muted"],[1,"text-end"],[1,"row","g-3","mb-3"],[1,"col-12","col-md-4"],[1,"border","rounded","p-3","h-100"],[1,"fw-semibold","mb-2"],[1,"fw-semibold","text-dark"],[1,"small"],[1,"d-flex","justify-content-between","py-1"],[1,"fw-semibold","text-danger"],[1,"my-2"],[1,"fw-bold"],[1,"badge","bg-success-subtle","text-success"],[1,"text-muted","mt-2"],[1,"table-responsive"],[1,"table","table-sm","align-middle","mb-0"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"text-break"],[1,"text-center","text-muted"]],template:function(t,e){t&1&&(f(0,"app-header"),r(1,"div",0)(2,"div",1)(3,"h2",2),s(4,"Thank you!"),a(),r(5,"p"),s(6,"Your payment was successful and your order is being processed."),a(),r(7,"p",3),s(8," Payment session ID: "),r(9,"span",4),s(10),a()(),r(11,"p",5),s(12," You can go back to the homepage anytime. "),a(),r(13,"button",6),x("click",function(){return e.goNow()}),s(14," Go to homepage now "),a()(),C(15,Qn,81,29,"div",7)(16,Un,2,0,"div",8),a(),f(17,"app-footer")),t&2&&(c(10),_(e.sessionId||"N/A"),c(5),m("ngIf",e.order),c(),m("ngIf",!e.order))},dependencies:[yt,Y,j,V,vt,xt,bt],encapsulation:2})};var zt=class n{constructor(i){this.router=i}seconds=100;timerId;ngOnInit(){localStorage.removeItem("lastOrder"),this.timerId=setInterval(()=>{this.seconds--,this.seconds<=0&&(clearInterval(this.timerId),this.router.navigateByUrl("/"))},1e3)}ngOnDestroy(){this.timerId&&clearInterval(this.timerId)}goHomeNow(){this.router.navigateByUrl("/")}static \u0275fac=function(t){return new(t||n)(y(N))};static \u0275cmp=O({type:n,selectors:[["app-payment-failed"]],standalone:!1,decls:11,vars:1,consts:[[1,"container","py-5","text-center"],[1,"text-danger","mb-3"],[1,"text-muted","mb-4"],[1,"btn","btn-outline-dark",3,"click"]],template:function(t,e){t&1&&(f(0,"app-header"),r(1,"div",0)(2,"h2",1),s(3,"Payment Failed"),a(),r(4,"p"),s(5,"Unfortunately, your payment could not be completed."),a(),r(6,"p",2),s(7),a(),r(8,"button",3),x("click",function(){return e.goHomeNow()}),s(9," Go to homepage now "),a()(),f(10,"app-footer")),t&2&&(c(7),u(" You will be redirected to the homepage in ",e.seconds," seconds... "))},dependencies:[j,V],encapsulation:2})};function Yn(n,i){if(n&1&&(r(0,"div",17),s(1),a()),n&2){let t=h();m("ngClass",t.flashType),c(),u(" ",t.flashText," ")}}function $n(n,i){n&1&&(r(0,"div",18),f(1,"mat-spinner"),a())}function Zn(n,i){n&1&&(r(0,"div",19)(1,"h2",20),s(2,"Your cart is empty"),a(),r(3,"p",21),s(4,"Please add some books before payment."),a(),r(5,"button",22),s(6," Back to cart "),a()())}function Jn(n,i){n&1&&(nt(0),s(1," Place order "),it())}function Kn(n,i){n&1&&(nt(0),f(1,"mat-spinner",48),s(2," \xA0Processing... "),it())}function Xn(n,i){if(n&1){let t=ot();r(0,"div")(1,"mat-card",23)(2,"h2",24),s(3,"Order Summary"),a(),r(4,"div",25)(5,"span"),s(6),a(),r(7,"span",26),s(8),a()(),r(9,"div",25)(10,"span"),s(11,"Shipping"),a(),r(12,"span",27),s(13,"Applied on checkout"),a()(),f(14,"mat-divider",28),r(15,"div",29)(16,"span",26),s(17,"Total"),a(),r(18,"span",30),s(19),a()(),f(20,"mat-divider",28),r(21,"h3",31),s(22,"Shipping details (optional)"),a(),r(23,"div",32)(24,"div",33)(25,"mat-form-field",34)(26,"mat-label"),s(27,"Full name"),a(),r(28,"input",35),T("ngModelChange",function(o){v(t);let l=h();return A(l.shippingName,o)||(l.shippingName=o),b(o)}),a()()(),r(29,"div",33)(30,"mat-form-field",34)(31,"mat-label"),s(32,"Phone"),a(),r(33,"input",36),T("ngModelChange",function(o){v(t);let l=h();return A(l.shippingPhone,o)||(l.shippingPhone=o),b(o)}),a()()()(),r(34,"div",32)(35,"div",33)(36,"mat-form-field",34)(37,"mat-label"),s(38,"Address line 1"),a(),r(39,"input",37),T("ngModelChange",function(o){v(t);let l=h();return A(l.shippingLine1,o)||(l.shippingLine1=o),b(o)}),a()()(),r(40,"div",33)(41,"mat-form-field",34)(42,"mat-label"),s(43,"Address line 2"),a(),r(44,"input",38),T("ngModelChange",function(o){v(t);let l=h();return A(l.shippingLine2,o)||(l.shippingLine2=o),b(o)}),a()()()(),r(45,"div",32)(46,"div",33)(47,"mat-form-field",34)(48,"mat-label"),s(49,"City"),a(),r(50,"input",39),T("ngModelChange",function(o){v(t);let l=h();return A(l.shippingCity,o)||(l.shippingCity=o),b(o)}),a()()(),r(51,"div",33)(52,"mat-form-field",34)(53,"mat-label"),s(54,"Postal code"),a(),r(55,"input",40),T("ngModelChange",function(o){v(t);let l=h();return A(l.shippingPostalCode,o)||(l.shippingPostalCode=o),b(o)}),a()()()(),r(56,"div",32)(57,"div",33)(58,"mat-form-field",34)(59,"mat-label"),s(60,"Country"),a(),r(61,"input",41),T("ngModelChange",function(o){v(t);let l=h();return A(l.shippingCountry,o)||(l.shippingCountry=o),b(o)}),a()()()(),r(62,"h3",31),s(63,"Coupon code (optional)"),a(),r(64,"div",42)(65,"div",43)(66,"mat-form-field",34)(67,"mat-label"),s(68,"Coupon code"),a(),r(69,"input",44),T("ngModelChange",function(o){v(t);let l=h();return A(l.couponCode,o)||(l.couponCode=o),b(o)}),a()()()(),r(70,"div",45)(71,"button",46),x("click",function(){v(t);let o=h();return b(o.checkoutOfOrder())}),C(72,Jn,2,0,"ng-container",5)(73,Kn,3,0,"ng-container",5),a(),r(74,"button",47),s(75," Back to cart "),a()()()()}if(n&2){let t=h();c(6),u("Subtotal (",t.cartItems.length," items)"),c(2),u("",t.subtotal," EGP"),c(11),u("",t.subtotal," EGP"),c(9),E("ngModel",t.shippingName),c(5),E("ngModel",t.shippingPhone),c(6),E("ngModel",t.shippingLine1),c(5),E("ngModel",t.shippingLine2),c(6),E("ngModel",t.shippingCity),c(5),E("ngModel",t.shippingPostalCode),c(6),E("ngModel",t.shippingCountry),c(8),E("ngModel",t.couponCode),c(2),m("disabled",t.checkoutLoading||t.isEmpty),c(),m("ngIf",!t.checkoutLoading),c(),m("ngIf",t.checkoutLoading),c(),m("disabled",t.checkoutLoading)}}function ti(n,i){if(n&1&&(r(0,"div"),s(1),a()),n&2){let t=h(2).ngIf;c(),_(t.shippingAddress.line1)}}function ei(n,i){if(n&1&&(r(0,"div"),s(1),a()),n&2){let t=h(2).ngIf;c(),_(t.shippingAddress.line2)}}function ni(n,i){if(n&1&&(r(0,"span"),s(1),a()),n&2){let t=h(2).ngIf;c(),u("",t.shippingAddress.city,", ")}}function ii(n,i){if(n&1&&(r(0,"span"),s(1),a()),n&2){let t=h(2).ngIf;c(),u("",t.shippingAddress.postalCode,", ")}}function oi(n,i){if(n&1&&(r(0,"span"),s(1),a()),n&2){let t=h(2).ngIf;c(),_(t.shippingAddress.country)}}function ai(n,i){if(n&1&&(r(0,"div"),s(1),a()),n&2){let t=h(2).ngIf;c(),u("Phone: ",t.shippingAddress.phone)}}function ri(n,i){if(n&1&&(r(0,"div",62)(1,"div",54),s(2,"Shipping address"),a(),r(3,"div",55)(4,"div",63),s(5),a(),C(6,ti,2,1,"div",5)(7,ei,2,1,"div",5),r(8,"div"),C(9,ni,2,1,"span",5)(10,ii,2,1,"span",5)(11,oi,2,1,"span",5),a(),C(12,ai,2,1,"div",5),a()()),n&2){let t=h().ngIf;c(5),_(t.shippingAddress.fullName||"Unknown"),c(),m("ngIf",t.shippingAddress.line1),c(),m("ngIf",t.shippingAddress.line2),c(2),m("ngIf",t.shippingAddress.city),c(),m("ngIf",t.shippingAddress.postalCode),c(),m("ngIf",t.shippingAddress.country),c(),m("ngIf",t.shippingAddress.phone)}}function si(n,i){if(n&1&&(r(0,"div",49)(1,"p",50),s(2," Please review your order before proceeding to payment. "),a(),r(3,"div",51)(4,"div",52)(5,"div",53)(6,"div",54),s(7,"Order info"),a(),r(8,"div",55)(9,"div")(10,"span",56),s(11,"Order ID:"),a(),s(12),a(),r(13,"div")(14,"span",56),s(15,"Status:"),a(),s(16),M(17,"titlecase"),a(),r(18,"div")(19,"span",56),s(20,"Placed at:"),a(),s(21),M(22,"date"),a()()()(),r(23,"div",52)(24,"div",53)(25,"div",54),s(26,"Amounts"),a(),r(27,"div",57)(28,"div",58)(29,"span",59),s(30,"Items total"),a(),r(31,"span",26),s(32),M(33,"currency"),a()(),r(34,"div",58)(35,"span",59),s(36,"Shipping"),a(),r(37,"span",26),s(38),M(39,"currency"),a()(),r(40,"div",58)(41,"span",59),s(42,"Discount"),a(),r(43,"span",60),s(44),M(45,"currency"),a()(),f(46,"hr",28),r(47,"div",58)(48,"span",26),s(49,"Grand total"),a(),r(50,"span",30),s(51),M(52,"currency"),a()()()()()(),C(53,ri,13,7,"div",61),a()),n&2){let t=i.ngIf;c(12),u(" ",t._id),c(4),u(" ",Ct(17,8,t.status)),c(5),u(" ",P(22,10,t.placedAt,"short")),c(11),_(P(33,13,t.amounts.itemsTotal,t.currency)),c(6),_(P(39,16,t.amounts.shipping,t.currency)),c(6),u(" -",P(45,19,t.amounts.discount,t.currency)," "),c(7),_(P(52,22,t.amounts.grandTotal,t.currency)),c(2),m("ngIf",t.shippingAddress)}}function ci(n,i){n&1&&(nt(0),s(1," Checkout & pay "),it())}function li(n,i){n&1&&(nt(0),f(1,"span",64),s(2," Processing... "),it())}var Ht=class n{constructor(i,t){this.cartService=i;this.cartOrders=t}cart=null;loading=!1;lastOrder=null;shippingName="";shippingCity="";shippingCountry="";shippingPhone="";shippingLine1="";shippingLine2="";shippingPostalCode="";couponCode="";flashText=null;flashType="info";flashTimeout;checkoutLoading=!1;sub;ngOnInit(){this.loadCart()}ngOnDestroy(){this.sub&&this.sub.unsubscribe(),this.flashTimeout&&clearTimeout(this.flashTimeout)}loadCart(){this.loading=!0,this.sub=this.cartService.getCart().subscribe({next:i=>{this.cart=i.data,this.loading=!1},error:i=>{console.error(i),this.loading=!1,this.showMessageIn("danger",i.error?.message||"Failed to load cart")}})}get cartItems(){return this.cart?.items||[]}get isEmpty(){return!this.cart||!this.cart.items||this.cart.items.length===0}get subtotal(){return this.cart?.totals.subTotal||0}showMessageIn(i,t){this.flashType=i,this.flashText=t,this.flashTimeout&&clearTimeout(this.flashTimeout),this.flashTimeout=setTimeout(()=>{this.flashText=null},3e3)}checkoutOfOrder(){if(this.checkoutLoading||this.isEmpty)return;this.checkoutLoading=!0,this.showMessageIn("info","Placing your order...");let i={};(this.shippingName.trim()||this.shippingCity.trim()||this.shippingCountry.trim()||this.shippingPhone.trim()||this.shippingLine1.trim()||this.shippingLine2.trim()||this.shippingPostalCode.trim())&&(i.shippingAddress={fullName:this.shippingName.trim()||void 0,phone:this.shippingPhone.trim()||void 0,city:this.shippingCity.trim()||void 0,country:this.shippingCountry.trim()||void 0,line1:this.shippingLine1.trim()||void 0,line2:this.shippingLine2.trim()||void 0,postalCode:this.shippingPostalCode.trim()||void 0}),this.couponCode.trim()&&(i.payment={couponCode:this.couponCode.trim()}),this.cartOrders.placeOrder(i).subscribe({next:e=>{this.checkoutLoading=!1,this.lastOrder=e.order;try{localStorage.setItem("lastOrder",JSON.stringify(e.order))}catch{}this.showMessageIn("success",e.message||"Order placed successfully."),this.openConfirmModal()},error:e=>{this.checkoutLoading=!1;let o=e.error?.message||"Failed to place order.";this.showMessageIn("danger",o)}})}openConfirmModal(){let i=document.getElementById("paymentConfirmModal");if(!i)return;new bootstrap.Modal(i).show()}startStripeCheckout(){let i=this.lastOrder?._id;if(!i){this.showMessageIn("danger","No order found to pay.");return}this.checkoutLoading=!0,this.showMessageIn("info","Redirecting to payment..."),this.cartOrders.createCheckout(i).subscribe({next:t=>{this.checkoutLoading=!1;let e=t.url||t.checkoutUrl||"";e?window.location.href=e:this.showMessageIn("danger","Payment URL not found from server.")},error:t=>{this.checkoutLoading=!1;let e=t.error?.message||"Failed to start payment session.";this.showMessageIn("danger",e)}})}cancelCurrentOrder(){if(!this.lastOrder?._id||this.checkoutLoading||!confirm("Are you sure you want to cancel this order?"))return;this.checkoutLoading=!0,this.showMessageIn("info","Cancelling your order...");let i=this.lastOrder._id;this.cartOrders.cancelOrder(i).subscribe({next:t=>{this.checkoutLoading=!1;try{localStorage.removeItem("lastOrder")}catch{}this.lastOrder=null,this.showMessageIn("success",t.message||"Order cancelled successfully.");let e=document.getElementById("paymentConfirmModal");e&&(bootstrap.Modal.getInstance(e)||new bootstrap.Modal(e)).hide(),this.loadCart()},error:t=>{this.checkoutLoading=!1;let e=t.error?.message||"Failed to cancel order.";this.showMessageIn("danger",e)}})}static \u0275fac=function(t){return new(t||n)(y(Lt),y(J))};static \u0275cmp=O({type:n,selectors:[["app-payment"]],standalone:!1,decls:24,vars:10,consts:[[1,"cart-container","d-flex","align-items-center","justify-content-center"],[1,"w-100",2,"max-width","720px"],["class","cart-flash-message mb-3",3,"ngClass",4,"ngIf"],["class","loading-container text-center py-5",4,"ngIf"],["class","empty-cart text-center py-5",4,"ngIf"],[4,"ngIf"],["id","paymentConfirmModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-outline-danger","me-auto",3,"click","disabled"],["data-bs-dismiss","modal",1,"btn","btn-outline-secondary",3,"disabled"],[1,"btn","btn-dark",3,"click","disabled"],[1,"cart-flash-message","mb-3",3,"ngClass"],[1,"loading-container","text-center","py-5"],[1,"empty-cart","text-center","py-5"],[1,"mb-2"],[1,"text-muted","mb-4"],["mat-raised-button","","color","primary","routerLink","/cart"],[1,"cart-summary","payment-card","shadow-sm"],[1,"mb-3"],[1,"summary-row","d-flex","justify-content-between","mb-1"],[1,"fw-semibold"],[1,"free","text-success","fw-semibold"],[1,"my-2"],[1,"summary-row","d-flex","justify-content-between","mb-3"],[1,"fw-bold"],[1,"section-title","mt-3","mb-2","text-uppercase","small","text-muted"],[1,"row","g-2"],[1,"col-12","col-sm-6"],["appearance","outline",1,"w-100"],["matInput","","name","shippingName",3,"ngModelChange","ngModel"],["matInput","","name","shippingPhone",3,"ngModelChange","ngModel"],["matInput","","name","shippingLine1",3,"ngModelChange","ngModel"],["matInput","","name","shippingLine2",3,"ngModelChange","ngModel"],["matInput","","name","shippingCity",3,"ngModelChange","ngModel"],["matInput","","name","shippingPostalCode",3,"ngModelChange","ngModel"],["matInput","","name","shippingCountry",3,"ngModelChange","ngModel"],[1,"row","g-2","mb-3"],[1,"col-12","col-sm-8"],["matInput","","name","couponCode",3,"ngModelChange","ngModel"],[1,"d-flex","flex-column","flex-sm-row","gap-2","mt-3"],["mat-raised-button","","color","primary",1,"flex-grow-1",3,"click","disabled"],["mat-stroked-button","","routerLink","/cart",1,"flex-grow-1",3,"disabled"],["diameter","20"],[1,"modal-body"],[1,"text-muted","small","mb-3"],[1,"row","g-3","mb-3"],[1,"col-12","col-md-6"],[1,"border","rounded","p-3","h-100"],[1,"fw-semibold","mb-2"],[1,"small","text-muted"],[1,"text-dark","fw-semibold"],[1,"small"],[1,"d-flex","justify-content-between"],[1,"text-muted"],[1,"fw-semibold","text-danger"],["class","border rounded p-3 mb-2",4,"ngIf"],[1,"border","rounded","p-3","mb-2"],[1,"fw-semibold","text-dark"],["role","status",1,"spinner-border","spinner-border-sm","me-1"]],template:function(t,e){t&1&&(f(0,"app-header"),r(1,"div",0)(2,"div",1),C(3,Yn,2,2,"div",2)(4,$n,2,0,"div",3)(5,Zn,7,0,"div",4)(6,Xn,76,15,"div",5),a()(),r(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"h5",10),s(12," Confirm your order "),a(),f(13,"button",11),a(),C(14,si,54,25,"div",12),r(15,"div",13)(16,"button",14),x("click",function(){return e.cancelCurrentOrder()}),s(17," Cancel this order "),a(),r(18,"button",15),s(19," Back "),a(),r(20,"button",16),x("click",function(){return e.startStripeCheckout()}),C(21,ci,2,0,"ng-container",5)(22,li,3,0,"ng-container",5),a()()()()(),f(23,"app-footer")),t&2&&(c(3),m("ngIf",e.flashText),c(),m("ngIf",e.loading),c(),m("ngIf",!e.loading&&e.isEmpty),c(),m("ngIf",!e.loading&&!e.isEmpty&&e.cart),c(8),m("ngIf",e.lastOrder),c(2),m("disabled",e.checkoutLoading),c(2),m("disabled",e.checkoutLoading),c(2),m("disabled",e.checkoutLoading),c(),m("ngIf",!e.checkoutLoading),c(),m("ngIf",e.checkoutLoading))},dependencies:[Oe,Y,Ot,At,$,Bt,Tt,j,V,qe,Qe,Ue,nn,en,an,vt,xt,bt],styles:[".cart-container[_ngcontent-%COMP%]{min-height:calc(100vh - 160px);padding:2rem 1rem}.payment-card[_ngcontent-%COMP%]{border-radius:16px;padding:1.5rem 1.75rem}.section-title[_ngcontent-%COMP%]{letter-spacing:.08em}.cart-flash-message[_ngcontent-%COMP%]{padding:.5rem .75rem;border-radius:8px;font-size:.9rem}.cart-flash-message.success[_ngcontent-%COMP%]{background-color:#e6f4ea;color:#1e7e34}.cart-flash-message.danger[_ngcontent-%COMP%]{background-color:#fdecea;color:#b71c1c}.cart-flash-message.info[_ngcontent-%COMP%]{background-color:#e8f0fe;color:#1a73e8}"]})};var Wt=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=F({type:n});static \u0275inj=B({imports:[Mt,pt,St]})};var W=class n{constructor(i,t,e){this.authService=i;this.router=t;this.snackBar=e}canActivate(i,t){return this.authService.isAuthenticated()?!0:(this.snackBar.open("Please login to access the cart","Login",{duration:3e3,horizontalPosition:"center",verticalPosition:"top"}).onAction().subscribe(()=>{this.router.navigate(["/login"],{queryParams:{returnUrl:t.url}})}),this.router.navigate(["/login"],{queryParams:{returnUrl:t.url}}),!1)}static \u0275fac=function(t){return new(t||n)(q(we),q(N),q(Et))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var di=[{path:"",component:Nt,canActivate:[W]},{path:"payment",component:Ht,canActivate:[W]},{path:"payment/success",component:Vt,canActivate:[W]},{path:"payment/failed",component:zt,canActivate:[W]}],xn=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=F({type:n});static \u0275inj=B({imports:[Mt,De.forChild(di),$e,St,Je,tn,Ge,Ke,pt,Xe,Ye,on,rn,Wt]})};export{xn as CartModule};
