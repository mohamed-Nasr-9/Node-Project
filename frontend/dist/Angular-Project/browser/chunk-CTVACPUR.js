import{a as Kt}from"./chunk-WU3VHCCI.js";import{a as $t}from"./chunk-AARN7T57.js";import{a as Y}from"./chunk-PVCF6BMT.js";import{a as Ht}from"./chunk-OWXUTXTS.js";import{a as Qt}from"./chunk-XYYWDBOZ.js";import{a as Gt}from"./chunk-RZHO2OWO.js";import{b as Zt}from"./chunk-OHDIIJHJ.js";import{a as ge,g as It,h as J,i as Tt,j as ze}from"./chunk-VRDYXINS.js";import{c as Jt,d as Yt,e as Xt}from"./chunk-C7QE74CK.js";import"./chunk-TPLDUVTZ.js";import{$ as ot,$a as lt,$c as Ut,Aa as c,Ab as gt,B as Ke,Ba as T,Bc as Pt,C as W,Ca as F,D as Ae,Da as j,Db as _t,Dc as Dt,E as $e,Ea as Ne,Eb as ft,Ec as _e,F as f,Fa as D,Ga as A,Gb as bt,H as m,I as p,Ic as fe,J as et,Jc as At,K as tt,Ka as q,Kb as vt,Kc as Ot,L as Oe,La as R,Lb as xt,Lc as be,M as re,Ma as E,Mb as he,Mc as Vt,Na as le,Nb as wt,Nc as Wt,O as it,Oa as o,Ob as ie,Pa as k,Pb as yt,Q as oe,Qa as y,Qc as Lt,R as G,Ra as je,Rc as Rt,S as nt,Sb as Q,Sc as Nt,Ta as b,Tb as qe,Tc as jt,U as rt,Ua as v,Uc as qt,V as d,Va as x,Vb as kt,W as ae,Wa as st,X as se,Xa as H,Y as Ve,Ya as te,Yc as zt,_c as ve,aa as P,ab as M,ac as St,bb as dt,bc as Ct,cb as I,da as C,db as ct,ea as L,eb as de,f as V,fa as at,fc as Et,ga as K,ia as w,k as X,ka as We,kb as ce,l as Ie,la as $,ma as ee,n as Ze,na as u,o as Je,oa as t,oc as Ft,p as U,pa as i,qa as _,qb as me,qc as z,rb as pe,s as Ye,sb as ue,t as Xe,u as Te,ua as Le,va as Re,vc as Mt,wb as mt,wc as Bt,x as De,xa as S,xb as pt,y as B,yb as ut,yc as Z,za as h,zb as ht}from"./chunk-DBZ4JVQV.js";var ye=["*"],si=["content"],li=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],di=["mat-drawer","mat-drawer-content","*"];function ci(s,a){if(s&1){let e=S();t(0,"div",1),h("click",function(){m(e);let n=c();return p(n._onBackdropClicked())}),i()}if(s&2){let e=c();E("mat-drawer-shown",e._isShowingBackdrop())}}function mi(s,a){s&1&&(t(0,"mat-drawer-content"),F(1,2),i())}var pi=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],ui=["mat-sidenav","mat-sidenav-content","*"];function hi(s,a){if(s&1){let e=S();t(0,"div",1),h("click",function(){m(e);let n=c();return p(n._onBackdropClicked())}),i()}if(s&2){let e=c();E("mat-drawer-shown",e._isShowingBackdrop())}}function gi(s,a){s&1&&(t(0,"mat-sidenav-content"),F(1,2),i())}var _i=`.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-sys-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-sys-background));box-sizing:border-box;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color, color-mix(in srgb, var(--mat-sys-neutral-variant20) 40%, transparent))}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}@media(forced-colors: active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-content.mat-drawer-content-hidden{opacity:0}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-sys-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow, none);background-color:var(--mat-sidenav-container-background-color, var(--mat-sys-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));width:var(--mat-sidenav-container-width, 360px);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}@media(forced-colors: active){.mat-drawer,[dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}}@media(forced-colors: active){[dir=rtl] .mat-drawer,.mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-transition .mat-drawer{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating){visibility:hidden;box-shadow:none}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating) .mat-drawer-inner-container{display:none}.mat-drawer.mat-drawer-opened.mat-drawer-opened{transform:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto}.mat-sidenav-fixed{position:fixed}
`;var fi=new Ae("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:bi}),He=new Ae("MAT_DRAWER_CONTAINER");function bi(){return!1}var xe=(()=>{class s extends J{_platform=f(Q);_changeDetectorRef=f(ce);_container=f(Ge);constructor(){let e=f(G),r=f(It),n=f(se);super(e,r,n)}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}_shouldBeHidden(){if(this._platform.isBrowser)return!1;let{start:e,end:r}=this._container;return e!=null&&e.mode!=="over"&&e.opened||r!=null&&r.mode!=="over"&&r.opened}static \u0275fac=function(r){return new(r||s)};static \u0275cmp=C({type:s,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:6,hostBindings:function(r,n){r&2&&(R("margin-left",n._container._contentMargins.left,"px")("margin-right",n._container._contentMargins.right,"px"),E("mat-drawer-content-hidden",n._shouldBeHidden()))},features:[H([{provide:J,useExisting:s}]),K],ngContentSelectors:ye,decls:1,vars:0,template:function(r,n){r&1&&(T(),F(0))},encapsulation:2,changeDetection:0})}return s})(),Ue=(()=>{class s{_elementRef=f(G);_focusTrapFactory=f(Ct);_focusMonitor=f(kt);_platform=f(Q);_ngZone=f(se);_renderer=f(ot);_interactivityChecker=f(St);_doc=f(re);_container=f(He,{optional:!0});_focusTrap=null;_elementFocusedBeforeDrawerWasOpened=null;_eventCleanups;_isAttached;_anchor;get position(){return this._position}set position(e){e=e==="end"?"end":"start",e!==this._position&&(this._isAttached&&this._updatePositionInParent(e),this._position=e,this.onPositionChanged.emit())}_position="start";get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}_mode="over";get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=z(e)}_disableClose=!1;get autoFocus(){let e=this._autoFocus;return e??(this.mode==="side"?"dialog":"first-tabbable")}set autoFocus(e){(e==="true"||e==="false"||e==null)&&(e=z(e)),this._autoFocus=e}_autoFocus;get opened(){return this._opened()}set opened(e){this.toggle(z(e))}_opened=it(!1);_openedVia;_animationStarted=new V;_animationEnd=new V;openedChange=new ae(!0);_openedStream=this.openedChange.pipe(U(e=>e),Ie(()=>{}));openedStart=this._animationStarted.pipe(U(()=>this.opened),Te(void 0));_closedStream=this.openedChange.pipe(U(e=>!e),Ie(()=>{}));closedStart=this._animationStarted.pipe(U(()=>!this.opened),Te(void 0));_destroyed=new V;onPositionChanged=new ae;_content;_modeChanged=new V;_injector=f(Oe);_changeDetectorRef=f(ce);constructor(){this.openedChange.pipe(B(this._destroyed)).subscribe(e=>{e?(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement,this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{let e=this._elementRef.nativeElement;Ze(e,"keydown").pipe(U(r=>r.keyCode===27&&!this.disableClose&&!Et(r)),B(this._destroyed)).subscribe(r=>this._ngZone.run(()=>{this.close(),r.stopPropagation(),r.preventDefault()})),this._eventCleanups=[this._renderer.listen(e,"transitionrun",this._handleTransitionEvent),this._renderer.listen(e,"transitionend",this._handleTransitionEvent),this._renderer.listen(e,"transitioncancel",this._handleTransitionEvent)]}),this._animationEnd.subscribe(()=>{this.openedChange.emit(this.opened)})}_forceFocus(e,r){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let n=()=>{l(),g(),e.removeAttribute("tabindex")},l=this._renderer.listen(e,"blur",n),g=this._renderer.listen(e,"mousedown",n)})),e.focus(r)}_focusByCssSelector(e,r){let n=this._elementRef.nativeElement.querySelector(e);n&&this._forceFocus(n,r)}_takeFocus(){if(!this._focusTrap)return;let e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":Ve(()=>{!this._focusTrap.focusInitialElement()&&typeof e.focus=="function"&&e.focus()},{injector:this._injector});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus);break}}_restoreFocus(e){this.autoFocus!=="dialog"&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){let e=this._doc.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterViewInit(){this._isAttached=!0,this._position==="end"&&this._updatePositionInParent("end"),this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState())}ngOnDestroy(){this._eventCleanups.forEach(e=>e()),this._focusTrap?.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,r){e&&r&&(this._openedVia=r);let n=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),n}_setOpen(e,r,n){return e===this.opened?Promise.resolve(e?"open":"close"):(this._opened.set(e),this._container?._transitionsEnabled?this._setIsAnimating(!0):setTimeout(()=>{this._animationStarted.next(),this._animationEnd.next()}),this._elementRef.nativeElement.classList.toggle("mat-drawer-opened",e),!e&&r&&this._restoreFocus(n),this._changeDetectorRef.markForCheck(),this._updateFocusTrapState(),new Promise(l=>{this.openedChange.pipe(Xe(1)).subscribe(g=>l(g?"open":"close"))}))}_setIsAnimating(e){this._elementRef.nativeElement.classList.toggle("mat-drawer-animating",e)}_getWidth(){return this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop&&this.opened)}_updatePositionInParent(e){if(!this._platform.isBrowser)return;let r=this._elementRef.nativeElement,n=r.parentNode;e==="end"?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),n.insertBefore(this._anchor,r)),n.appendChild(r)):this._anchor&&this._anchor.parentNode.insertBefore(r,this._anchor)}_handleTransitionEvent=e=>{let r=this._elementRef.nativeElement;e.target===r&&this._ngZone.run(()=>{e.type==="transitionrun"?this._animationStarted.next(e):(e.type==="transitionend"&&this._setIsAnimating(!1),this._animationEnd.next(e))})};static \u0275fac=function(r){return new(r||s)};static \u0275cmp=C({type:s,selectors:[["mat-drawer"]],viewQuery:function(r,n){if(r&1&&Ne(si,5),r&2){let l;D(l=A())&&(n._content=l.first)}},hostAttrs:[1,"mat-drawer"],hostVars:12,hostBindings:function(r,n){r&2&&(We("align",null)("tabIndex",n.mode!=="side"?"-1":null),R("visibility",!n._container&&!n.opened?"hidden":null),E("mat-drawer-end",n.position==="end")("mat-drawer-over",n.mode==="over")("mat-drawer-push",n.mode==="push")("mat-drawer-side",n.mode==="side"))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:ye,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(r,n){r&1&&(T(),t(0,"div",1,0),F(2),i())},dependencies:[J],encapsulation:2,changeDetection:0})}return s})(),Ge=(()=>{class s{_dir=f(Bt,{optional:!0});_element=f(G);_ngZone=f(se);_changeDetectorRef=f(ce);_animationDisabled=Ft();_transitionsEnabled=!1;_allDrawers;_drawers=new nt;_content;_userContent;get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=z(e)}_autosize=f(fi);get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(e){this._backdropOverride=e==null?null:z(e)}_backdropOverride;backdropClick=new ae;_start;_end;_left;_right;_destroyed=new V;_doCheckSubject=new V;_contentMargins={left:null,right:null};_contentMarginChanges=new V;get scrollable(){return this._userContent||this._content}_injector=f(Oe);constructor(){let e=f(Q),r=f(Tt);this._dir?.change.pipe(B(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),r.change().pipe(B(this._destroyed)).subscribe(()=>this.updateContentMargins()),!this._animationDisabled&&e.isBrowser&&this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{this._element.nativeElement.classList.add("mat-drawer-transition"),this._transitionsEnabled=!0},200)})}ngAfterContentInit(){this._allDrawers.changes.pipe(De(this._allDrawers),B(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(r=>!r._container||r._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(De(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(Ye(10),B(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,r=0;if(this._left&&this._left.opened){if(this._left.mode=="side")e+=this._left._getWidth();else if(this._left.mode=="push"){let n=this._left._getWidth();e+=n,r-=n}}if(this._right&&this._right.opened){if(this._right.mode=="side")r+=this._right._getWidth();else if(this._right.mode=="push"){let n=this._right._getWidth();r+=n,e-=n}}e=e||null,r=r||null,(e!==this._contentMargins.left||r!==this._contentMargins.right)&&(this._contentMargins={left:e,right:r},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe(B(this._drawers.changes)).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),e.mode!=="side"&&e.openedChange.pipe(B(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){e.onPositionChanged.pipe(B(this._drawers.changes)).subscribe(()=>{Ve({read:()=>this._validateDrawers()},{injector:this._injector})})}_watchDrawerMode(e){e._modeChanged.pipe(B(Je(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){let r=this._element.nativeElement.classList,n="mat-drawer-container-has-open";e?r.add(n):r.remove(n)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{e.position=="end"?(this._end!=null,this._end=e):(this._start!=null,this._start=e)}),this._right=this._left=null,this._dir&&this._dir.value==="rtl"?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&this._start.mode!="over"||this._isDrawerOpen(this._end)&&this._end.mode!="over"}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._drawerHasBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(e){return e!=null&&e.opened}_drawerHasBackdrop(e){return this._backdropOverride==null?!!e&&e.mode!=="side":this._backdropOverride}static \u0275fac=function(r){return new(r||s)};static \u0275cmp=C({type:s,selectors:[["mat-drawer-container"]],contentQueries:function(r,n,l){if(r&1&&(j(l,xe,5),j(l,Ue,5)),r&2){let g;D(g=A())&&(n._content=g.first),D(g=A())&&(n._allDrawers=g)}},viewQuery:function(r,n){if(r&1&&Ne(xe,5),r&2){let l;D(l=A())&&(n._userContent=l.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(r,n){r&2&&E("mat-drawer-container-explicit-backdrop",n._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[H([{provide:He,useExisting:s}])],ngContentSelectors:di,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(r,n){r&1&&(T(li),$(0,ci,1,2,"div",0),F(1),F(2,1),$(3,mi,2,0,"mat-drawer-content")),r&2&&(ee(n.hasBackdrop?0:-1),d(3),ee(n._content?-1:3))},dependencies:[xe],styles:[`.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-sys-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-sys-background));box-sizing:border-box;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color, color-mix(in srgb, var(--mat-sys-neutral-variant20) 40%, transparent))}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}@media(forced-colors: active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-content.mat-drawer-content-hidden{opacity:0}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-sys-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow, none);background-color:var(--mat-sidenav-container-background-color, var(--mat-sys-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));width:var(--mat-sidenav-container-width, 360px);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}@media(forced-colors: active){.mat-drawer,[dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}}@media(forced-colors: active){[dir=rtl] .mat-drawer,.mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-transition .mat-drawer{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating){visibility:hidden;box-shadow:none}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating) .mat-drawer-inner-container{display:none}.mat-drawer.mat-drawer-opened.mat-drawer-opened{transform:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto}.mat-sidenav-fixed{position:fixed}
`],encapsulation:2,changeDetection:0})}return s})(),we=(()=>{class s extends xe{static \u0275fac=(()=>{let e;return function(n){return(e||(e=oe(s)))(n||s)}})();static \u0275cmp=C({type:s,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],features:[H([{provide:J,useExisting:s}]),K],ngContentSelectors:ye,decls:1,vars:0,template:function(r,n){r&1&&(T(),F(0))},encapsulation:2,changeDetection:0})}return s})(),Qe=(()=>{class s extends Ue{get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(e){this._fixedInViewport=z(e)}_fixedInViewport=!1;get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(e){this._fixedTopGap=qe(e)}_fixedTopGap=0;get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(e){this._fixedBottomGap=qe(e)}_fixedBottomGap=0;static \u0275fac=(()=>{let e;return function(n){return(e||(e=oe(s)))(n||s)}})();static \u0275cmp=C({type:s,selectors:[["mat-sidenav"]],hostAttrs:[1,"mat-drawer","mat-sidenav"],hostVars:16,hostBindings:function(r,n){r&2&&(We("tabIndex",n.mode!=="side"?"-1":null)("align",null),R("top",n.fixedInViewport?n.fixedTopGap:null,"px")("bottom",n.fixedInViewport?n.fixedBottomGap:null,"px"),E("mat-drawer-end",n.position==="end")("mat-drawer-over",n.mode==="over")("mat-drawer-push",n.mode==="push")("mat-drawer-side",n.mode==="side")("mat-sidenav-fixed",n.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[H([{provide:Ue,useExisting:s}]),K],ngContentSelectors:ye,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(r,n){r&1&&(T(),t(0,"div",1,0),F(2),i())},dependencies:[J],encapsulation:2,changeDetection:0})}return s})(),ei=(()=>{class s extends Ge{_allDrawers=void 0;_content=void 0;static \u0275fac=(()=>{let e;return function(n){return(e||(e=oe(s)))(n||s)}})();static \u0275cmp=C({type:s,selectors:[["mat-sidenav-container"]],contentQueries:function(r,n,l){if(r&1&&(j(l,we,5),j(l,Qe,5)),r&2){let g;D(g=A())&&(n._content=g.first),D(g=A())&&(n._allDrawers=g)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(r,n){r&2&&E("mat-drawer-container-explicit-backdrop",n._backdropOverride)},exportAs:["matSidenavContainer"],features:[H([{provide:He,useExisting:s},{provide:Ge,useExisting:s}]),K],ngContentSelectors:ui,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(r,n){r&1&&(T(pi),$(0,hi,1,2,"div",0),F(1),F(2,1),$(3,gi,2,0,"mat-sidenav-content")),r&2&&(ee(n.hasBackdrop?0:-1),d(3),ee(n._content?-1:3))},dependencies:[we],styles:[_i],encapsulation:2,changeDetection:0})}return s})(),ti=(()=>{class s{static \u0275fac=function(r){return new(r||s)};static \u0275mod=L({type:s});static \u0275inj=W({imports:[Z,ze,ze,Z]})}return s})();var xi=["*",[["mat-toolbar-row"]]],wi=["*","mat-toolbar-row"],yi=(()=>{class s{static \u0275fac=function(r){return new(r||s)};static \u0275dir=at({type:s,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return s})(),ii=(()=>{class s{_elementRef=f(G);_platform=f(Q);_document=f(re);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static \u0275fac=function(r){return new(r||s)};static \u0275cmp=C({type:s,selectors:[["mat-toolbar"]],contentQueries:function(r,n,l){if(r&1&&j(l,yi,5),r&2){let g;D(g=A())&&(n._toolbarRows=g)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(r,n){r&2&&(le(n.color?"mat-"+n.color:""),E("mat-toolbar-multiple-rows",n._toolbarRows.length>0)("mat-toolbar-single-row",n._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],ngContentSelectors:wi,decls:2,vars:0,template:function(r,n){r&1&&(T(xi),F(0),F(1,1))},styles:[`.mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mat-button-text-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mat-button-outlined-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}
`],encapsulation:2,changeDetection:0})}return s})();var ni=(()=>{class s{static \u0275fac=function(r){return new(r||s)};static \u0275mod=L({type:s});static \u0275inj=W({imports:[Z,Z]})}return s})();var ke=class s{constructor(a,e){this.authService=a;this.router=e}logout(){this.authService.logout(),this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||s)(P(ge),P(xt))};static \u0275cmp=C({type:s,selectors:[["app-sidebar"]],standalone:!1,decls:40,vars:0,consts:[[1,"px-3","py-3"],[1,"d-flex","align-items-center","mb-3"],[1,"logo","me-2"],[1,"fw-bold",2,"color","var(--ink)"],[1,"text-muted"],["mat-list-item","","routerLink","/dashboard","routerLinkActive","active"],["matListIcon",""],[1,"ms-2"],["mat-list-item","","routerLink","/user-profile","routerLinkActive","active"],["mat-list-item","","routerLink","/dashboard/orders","routerLinkActive","active"],["mat-list-item","","routerLink","/dashboard/manage-books","routerLinkActive","active"],["mat-list-item","","routerLink","/dashboard/review-authors","routerLinkActive","active"],["mat-list-item","",1,"mt-2","text-danger",2,"cursor","pointer",3,"click"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2),o(3,"B"),i(),t(4,"div")(5,"div",3),o(6,"Bookly"),i(),t(7,"small",4),o(8,"Dashboard"),i()()(),t(9,"mat-nav-list")(10,"a",5)(11,"mat-icon",6),o(12,"space_dashboard"),i(),t(13,"span",7),o(14,"Dashboard"),i()(),t(15,"a",8)(16,"mat-icon",6),o(17,"person"),i(),t(18,"span"),o(19,"Profile"),i()(),t(20,"a",9)(21,"mat-icon",6),o(22,"shopping_bag"),i(),t(23,"span"),o(24,"Orders"),i()(),t(25,"a",10)(26,"mat-icon",6),o(27,"menu_book"),i(),t(28,"span"),o(29,"Books"),i()(),t(30,"a",11)(31,"mat-icon",6),o(32,"people"),i(),t(33,"span"),o(34,"Review Authors"),i()(),t(35,"a",12),h("click",function(){return r.logout()}),t(36,"mat-icon",6),o(37,"logout"),i(),t(38,"span",7),o(39,"Logout"),i()()()())},dependencies:[he,wt,ve,Yt,Jt],encapsulation:2})};var Ce=class s{static \u0275fac=function(e){return new(e||s)};static \u0275cmp=C({type:s,selectors:[["app-dashboard-layout"]],standalone:!1,decls:18,vars:0,consts:[["sidenav",""],[1,"shell","body-grad"],["mode","side","opened","",1,"side","shadow-soft"],[1,"app-sidebar",3,"click"],[1,"topbar"],["mat-icon-button","",1,"d-inline","d-md-none",3,"click"],[1,"brand"],[1,"spacer"],["mat-icon-button","","routerLink","/","title","Go to Homepage",2,"color","inherit"],[1,"content"],[1,"page-enter"]],template:function(e,r){if(e&1){let n=S();t(0,"mat-sidenav-container",1)(1,"mat-sidenav",2,0)(3,"app-sidebar",3),h("click",function(){m(n);let g=q(2);return p(g.mode==="over"&&g.close())}),i()(),t(4,"mat-sidenav-content")(5,"mat-toolbar",4)(6,"button",5),h("click",function(){m(n);let g=q(2);return p(g.toggle())}),t(7,"mat-icon"),o(8,"menu"),i()(),t(9,"span",6),o(10,"Bookly Admin"),i(),_(11,"span",7),t(12,"a",8)(13,"mat-icon"),o(14,"home"),i()()(),t(15,"main",9)(16,"div",10),_(17,"router-outlet"),i()()()()}},dependencies:[vt,he,Qe,ei,we,ii,ve,Mt,ke],styles:[".shell[_ngcontent-%COMP%]{height:100vh}.side[_ngcontent-%COMP%]{width:250px;background:#ffffffcf;border-right:1px solid rgba(0,0,0,.05)}.topbar[_ngcontent-%COMP%]{background:transparent;padding:.25rem .75rem}.topbar[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{font-weight:700;color:var(--brand);letter-spacing:.3px}.topbar[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1 1 auto}.topbar[_ngcontent-%COMP%]   a[mat-icon-button][_ngcontent-%COMP%]{transition:color .2s ease}.topbar[_ngcontent-%COMP%]   a[mat-icon-button][_ngcontent-%COMP%]:hover{color:var(--brand)!important}.content[_ngcontent-%COMP%]{padding:18px}@media (max-width:768px){.side[_ngcontent-%COMP%]{width:220px}}"]})};var Ee=class s{static \u0275fac=function(e){return new(e||s)};static \u0275cmp=C({type:s,selectors:[["app-home"]],standalone:!1,decls:151,vars:0,consts:[[1,"mb-3"],[1,"row","g-3","mb-3"],[1,"col-6","col-lg-3"],[1,"card","card-glass","p-3","shadow-soft"],[1,"text-muted","small"],[1,"h4","m-0"],[1,"row","g-3"],[1,"col-12","col-lg-6"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"barchart"],[1,"bar",2,"height","46%"],[1,"bar",2,"height","72%"],[1,"bar",2,"height","64%"],[1,"bar",2,"height","88%"],[1,"bar",2,"height","53%"],[1,"bar",2,"height","30%"],[1,"bar",2,"height","40%"],[1,"linechart"],["viewBox","0 0 300 120","preserveAspectRatio","none"],["stroke","rgba(0,0,0,.06)","stroke-width","1"],["x1","0","y1","100","x2","300","y2","100"],["x1","0","y1","75","x2","300","y2","75"],["x1","0","y1","50","x2","300","y2","50"],["x1","0","y1","25","x2","300","y2","25"],["d","M0,95 L30,90 L60,80 L90,86 L120,70 L150,60 L180,65 L210,50 L240,62 L270,55 L300,58 L300,120 L0,120 Z","fill","rgba(255,90,122,.20)"],["d","M0,95 L30,90 L60,80 L90,86 L120,70 L150,60 L180,65 L210,50 L240,62 L270,55 L300,58","fill","none","stroke","#ff5a7a","stroke-width","2.5"],["fill","#ff5a7a"],["cx","60","cy","80","r","3"],["cx","120","cy","70","r","3"],["cx","150","cy","60","r","3"],["cx","210","cy","50","r","3"],["cx","270","cy","55","r","3"],[1,"col-12","col-xl-4"],[1,"card","card-glass","p-3","shadow-soft","h-100"],[1,"mb-2","d-block"],[1,"d-flex","align-items-center"],[1,"donut","me-3",2,"--val1","40","--val2","25","--val3","20","--val4","15"],[1,"small"],[1,"dot","dot-paid"],[1,"dot","dot-pending"],[1,"dot","dot-shipping"],[1,"dot","dot-cancelled"],[1,"col-12","col-xl-8"],[1,"table-responsive"],[1,"table","mb-0","align-middle"],[1,"table-light"],[1,"text-end"]],template:function(e,r){e&1&&(t(0,"h2",0),o(1,"Analysis"),i(),t(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),o(6,"Total Orders"),i(),t(7,"div",5),o(8,"1,248"),i()()(),t(9,"div",2)(10,"div",3)(11,"div",4),o(12,"Revenue"),i(),t(13,"div",5),o(14,"12,560 EGP"),i()()(),t(15,"div",2)(16,"div",3)(17,"div",4),o(18,"Avg. Order"),i(),t(19,"div",5),o(20,"28.6 EGP"),i()()(),t(21,"div",2)(22,"div",3)(23,"div",4),o(24,"Returning Users"),i(),t(25,"div",5),o(26,"38%"),i()()()(),t(27,"div",6)(28,"div",7)(29,"div",3)(30,"div",8)(31,"strong"),o(32,"Orders / Week"),i(),t(33,"div",4),o(34,"Static sample"),i()(),t(35,"div",9)(36,"div",10)(37,"span"),o(38,"Mon"),i()(),t(39,"div",11)(40,"span"),o(41,"Tue"),i()(),t(42,"div",12)(43,"span"),o(44,"Wed"),i()(),t(45,"div",13)(46,"span"),o(47,"Thu"),i()(),t(48,"div",14)(49,"span"),o(50,"Fri"),i()(),t(51,"div",15)(52,"span"),o(53,"Sat"),i()(),t(54,"div",16)(55,"span"),o(56,"Sun"),i()()()()(),t(57,"div",7)(58,"div",3)(59,"div",8)(60,"strong"),o(61,"Revenue (last 10 days)"),i(),t(62,"div",4),o(63,"Static sample"),i()(),t(64,"div",17),et(),t(65,"svg",18)(66,"g",19),_(67,"line",20)(68,"line",21)(69,"line",22)(70,"line",23),i(),_(71,"path",24)(72,"path",25),t(73,"g",26),_(74,"circle",27)(75,"circle",28)(76,"circle",29)(77,"circle",30)(78,"circle",31),i()()()()(),tt(),t(79,"div",32)(80,"div",33)(81,"strong",34),o(82,"Orders by Status"),i(),t(83,"div",35),_(84,"div",36),t(85,"div",37)(86,"div"),_(87,"span",38),o(88," Paid \u2014 40%"),i(),t(89,"div"),_(90,"span",39),o(91," Pending \u2014 25%"),i(),t(92,"div"),_(93,"span",40),o(94," Shipping \u2014 20%"),i(),t(95,"div"),_(96,"span",41),o(97," Cancelled \u2014 15%"),i()()()()(),t(98,"div",42)(99,"div",33)(100,"strong",34),o(101,"Top Books"),i(),t(102,"div",43)(103,"table",44)(104,"thead",45)(105,"tr")(106,"th"),o(107,"Title"),i(),t(108,"th"),o(109,"Author"),i(),t(110,"th",46),o(111,"Sales"),i(),t(112,"th",46),o(113,"Revenue"),i()()(),t(114,"tbody")(115,"tr")(116,"td"),o(117,"Design Patterns"),i(),t(118,"td"),o(119,"GoF"),i(),t(120,"td",46),o(121,"320"),i(),t(122,"td",46),o(123,"6,400 EGP"),i()(),t(124,"tr")(125,"td"),o(126,"Clean Code"),i(),t(127,"td"),o(128,"R. Martin"),i(),t(129,"td",46),o(130,"280"),i(),t(131,"td",46),o(132,"5,600 EGP"),i()(),t(133,"tr")(134,"td"),o(135,"Refactoring"),i(),t(136,"td"),o(137,"M. Fowler"),i(),t(138,"td",46),o(139,"190"),i(),t(140,"td",46),o(141,"3,800 EGP"),i()(),t(142,"tr")(143,"td"),o(144,"You Don't Know JS"),i(),t(145,"td"),o(146,"Kyle Simpson"),i(),t(147,"td",46),o(148,"160"),i(),t(149,"td",46),o(150,"3,200 EGP"),i()()()()()()()())},styles:['.barchart[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:flex-end;height:180px;padding:10px;border-radius:10px;background:#0000000a}.barchart[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:flex-end;align-items:center}.barchart[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:before{content:"";width:22px;border-radius:6px 6px 0 0;background:#ff5a7a;display:block;height:100%;box-shadow:0 6px 18px #ff5a7a40}.barchart[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:6px;font-size:12px;color:#666}.linechart[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:220px;display:block;border-radius:10px;background:#0000000a}.donut[_ngcontent-%COMP%]{--paid: calc(var(--val1) * 1%);--pending: calc(var(--val2) * 1%);--shipping: calc(var(--val3) * 1%);--cancelled: calc(var(--val4) * 1%);width:120px;height:120px;border-radius:50%;background:conic-gradient(#28a745 var(--paid),#ffc107 0 calc(var(--paid) + var(--pending)),#0dcaf0 0 calc(var(--paid) + var(--pending) + var(--shipping)),#dc3545 0);position:relative;box-shadow:0 6px 24px #00000014}.donut[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:18px;border-radius:50%;background:#fff8;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.dot[_ngcontent-%COMP%]{display:inline-block;width:10px;height:10px;border-radius:50%;margin-right:6px}.dot-paid[_ngcontent-%COMP%]{background:#28a745}.dot-pending[_ngcontent-%COMP%]{background:#ffc107}.dot-shipping[_ngcontent-%COMP%]{background:#0dcaf0}.dot-cancelled[_ngcontent-%COMP%]{background:#dc3545}']})};var ne=`${yt.apiUrl}/orders/admin`,Fe=class s{constructor(a){this.http=a}headers(){let a=localStorage.getItem("token")||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MGJjN2YyMmFhMmNmYTZkNTE1NjFlOCIsIkZpcnN0TmFtZSI6Ik11aGFtbWVkIiwiTGFzdE5hbWUiOiJBbGkiLCJlbWFpbCI6Im11YWxseXl5QGdtYWlsLmNvbSIsImFkZHJlc3NlcyI6W3sibGFiZWwiOiJIb21lIiwiZnVsbE5hbWUiOiJNdWhhbW1lZCBBbGkiLCJwaG9uZSI6IjAxMjI5NTUzNDk5IiwibGluZTEiOiIxNyBNaXNyIExlbCBUYSdtZWVyIEJsZGdzICwgM3JkIFpvbmUiLCJsaW5lMiI6IiIsImNpdHkiOiJTaGVyYXRvbiIsInN0YXRlIjoiQ2Fpcm8iLCJjb3VudHJ5IjoiRWd5cHQiLCJwb3N0YWxDb2RlIjoiMTE3OTkiLCJpc0RlZmF1bHQiOnRydWUsIl9pZCI6IjY5MGUyNWU4Y2U1ZWFkMzUwNmU0MThmZSJ9XSwicm9sZSI6ImFkbWluIiwiaWF0IjoxNzYzMjU2NjUxLCJleHAiOjE3NjMyNjAyNTF9.FIOe-2upsuXZvuy2LfdgsZMMMqiSyHjojC8e4g65CyE";return new _t().set("Authorization",`Bearer ${a}`)}getAll(){let a=this.headers().set("Cache-Control","no-cache").set("Pragma","no-cache"),e=new ft().set("t",Date.now().toString());return this.http.get(`${ne}`,{headers:a,params:e})}cancel(a){return this.http.post(`${ne}/${a}/cancel`,{},{headers:this.headers()})}markPaid(a){return this.http.post(`${ne}/${a}/paid`,{},{headers:this.headers()})}markShipped(a){return this.http.post(`${ne}/${a}/shipped`,{},{headers:this.headers()})}markDelivered(a){return this.http.post(`${ne}/${a}/delivered`,{},{headers:this.headers()})}static \u0275fac=function(e){return new(e||s)($e(bt))};static \u0275prov=Ke({token:s,factory:s.\u0275fac,providedIn:"root"})};var Ii=()=>["failed","refunded"],Ti=(s,a,e)=>({"bg-success-subtle text-success":s,"bg-warning-subtle text-warning":a,"bg-danger-subtle text-danger":e});function Di(s,a){if(s&1){let e=S();t(0,"div",22),o(1),t(2,"button",23),h("click",function(){m(e);let n=c();return p(n.flashText=null)}),i()()}if(s&2){let e=c();le(st("alert alert-",e.flashType," alert-dismissible fade show py-2")),d(),y(" ",e.flashText," ")}}function Ai(s,a){if(s&1&&(t(0,"div",24),o(1),i()),s&2){let e=c();d(),k(e.error)}}function Oi(s,a){if(s&1){let e=S();t(0,"tr")(1,"td")(2,"strong"),o(3),i()(),t(4,"td",26),o(5),_(6,"br"),t(7,"small"),o(8),M(9,"date"),i()(),t(10,"td",27),o(11),M(12,"currency"),i(),t(13,"td")(14,"span",28),o(15),i()(),t(16,"td",29)(17,"button",30),h("click",function(){let n=m(e).$implicit,l=c(2);return p(l.openDetails(n))}),_(18,"i",31),o(19," Details "),i()(),t(20,"td",29)(21,"div",32)(22,"button",33),o(23," Choose "),i(),t(24,"ul",34)(25,"li")(26,"button",35),h("click",function(){let n=m(e).$implicit,l=c(2);return p(l.cancel(n))}),o(27," Cancelled "),i()(),t(28,"li")(29,"button",36),h("click",function(){let n=m(e).$implicit,l=c(2);return p(l.delivered(n))}),o(30," Delivered "),i()(),t(31,"li")(32,"button",37),h("click",function(){let n=m(e).$implicit,l=c(2);return p(l.paid(n))}),o(33," Paid "),i()(),t(34,"li")(35,"button",38),h("click",function(){let n=m(e).$implicit,l=c(2);return p(l.shipped(n))}),o(36," Shipping "),i()()()()()()}if(s&2){let e=a.$implicit,r=c(2);d(3),k(e._id),d(2),y(" ",e.shippingAddress.fullName),d(3),k(I(9,6,e.placedAt,"short")),d(3),k(ct(12,9,e.amounts.grandTotal,e.currency,"symbol")),d(3),u("ngClass",r.statusClass(e.status)),d(),y(" ",r.statusLabel(e.status)," ")}}function Vi(s,a){if(s&1&&(t(0,"tbody"),w(1,Oi,37,13,"tr",25),i()),s&2){let e=c();d(),u("ngForOf",e.filtered)}}function Wi(s,a){s&1&&(t(0,"div",39),o(1,"Loading\u2026"),i())}function Li(s,a){s&1&&(Le(0),t(1,"span",67),o(2,"Free"),i(),Re())}function Ri(s,a){if(s&1&&(t(0,"span",58),o(1),M(2,"currency"),i()),s&2){let e=c().ngIf;d(),k(I(2,1,e.amounts.shipping,e.currency))}}function Ni(s,a){if(s&1&&(Le(0),t(1,"span",68),o(2),M(3,"currency"),i(),Re()),s&2){let e=c().ngIf;d(2),y("-",I(3,1,e.amounts.discount,e.currency))}}function ji(s,a){s&1&&(t(0,"span",26),o(1,"\u2014"),i())}function qi(s,a){if(s&1&&(t(0,"tr")(1,"td",54),o(2),i(),t(3,"td",63),o(4),i(),t(5,"td",63),o(6),M(7,"currency"),i()()),s&2){let e=a.$implicit,r=c().ngIf;d(2),k(e.bookId),d(2),k(e.qty),d(2),k(I(7,3,e.priceAtAdd,r.currency))}}function zi(s,a){if(s&1&&(t(0,"div",40)(1,"div",41)(2,"h5",42)(3,"span"),o(4),i(),t(5,"span",28),o(6),i()(),_(7,"button",43),i(),t(8,"div",44)(9,"div",45)(10,"span",46),o(11),i(),t(12,"span"),o(13,"\u2022"),i(),t(14,"span"),o(15),M(16,"date"),i(),t(17,"span"),o(18,"\u2022"),i(),t(19,"span",28),o(20),i()(),t(21,"div",47)(22,"div",48)(23,"div",49)(24,"div",50),o(25,"Shipping Address"),i(),t(26,"div",51)(27,"div",52)(28,"span",53),o(29),i()(),t(30,"div"),o(31),i(),t(32,"div"),o(33),i(),t(34,"div"),o(35),i()()()(),t(36,"div",48)(37,"div",49)(38,"div",50),o(39,"Payment"),i(),t(40,"div",51)(41,"div"),o(42,"Method: "),t(43,"span",46),o(44),i()(),t(45,"div"),o(46," Status: "),t(47,"span",28),o(48),M(49,"titlecase"),i()(),t(50,"div",54),o(51,"TxId: "),t(52,"span",55),o(53),i()()()()(),t(54,"div",48)(55,"div",49)(56,"div",50),o(57,"Amounts"),i(),t(58,"div",56)(59,"div",57)(60,"span",26),o(61,"Items total"),i(),t(62,"span",58),o(63),M(64,"currency"),i()(),t(65,"div",57)(66,"span",26),o(67,"Shipping"),i(),t(68,"span"),w(69,Li,3,0,"ng-container",18)(70,Ri,3,4,"ng-template",null,1,de),i()(),t(72,"div",57)(73,"span",26),o(74,"Discount"),i(),t(75,"span"),w(76,Ni,4,4,"ng-container",18)(77,ji,2,0,"ng-template",null,2,de),i()(),_(79,"hr",59),t(80,"div",60)(81,"span",58),o(82,"Grand total"),i(),t(83,"span",61),o(84),M(85,"currency"),i()()()()()(),t(86,"div",10)(87,"table",62)(88,"thead",12)(89,"tr")(90,"th"),o(91,"Item (bookId)"),i(),t(92,"th",63),o(93,"Qty"),i(),t(94,"th",63),o(95,"Price"),i()()(),t(96,"tbody"),w(97,qi,8,6,"tr",25),i()()()(),t(98,"div",64)(99,"div",65),o(100),M(101,"currency"),i(),t(102,"button",66),o(103,"Close"),i()()()),s&2){let e=a.ngIf,r=q(71),n=q(78),l=c();d(4),y("Order ",e._id),d(),u("ngClass",l.statusClass(e.status)),d(),k(l.statusLabel(e.status)),d(5),k(e.shippingAddress.fullName),d(4),k(I(16,23,e.placedAt,"short")),d(4),u("ngClass",l.statusClass(e.status)),d(),k(l.statusLabel(e.status)),d(9),k(e.shippingAddress.fullName),d(2),y("Phone: ",e.shippingAddress.phone),d(2),y("City: ",e.shippingAddress.city),d(2),y("Country: ",e.shippingAddress.country),d(9),k((e.payment==null?null:e.payment.method)||"\u2014"),d(3),u("ngClass",lt(38,Ti,((e.payment==null?null:e.payment.status)||"").toLowerCase()==="paid",((e.payment==null?null:e.payment.status)||"").toLowerCase()==="pending",te(37,Ii).includes(((e.payment==null?null:e.payment.status)||"").toLowerCase()))),d(),y(" ",dt(49,26,(e.payment==null?null:e.payment.status)||"\u2014")," "),d(5),k((e.payment==null?null:e.payment.txId)||"\u2014"),d(10),k(I(64,28,e.amounts.itemsTotal,e.currency)),d(6),u("ngIf",e.amounts.shipping===0)("ngIfElse",r),d(7),u("ngIf",e.amounts.discount>0)("ngIfElse",n),d(8),k(I(85,31,e.amounts.grandTotal,e.currency)),d(13),u("ngForOf",e.items),d(3),y("Total: ",I(101,34,e.amounts.grandTotal,e.currency))}}var Me=class s{constructor(a){this.api=a}loading=!1;error=null;query="";orders=[];selected=null;flashText=null;flashType="info";flashTimeout;ngOnInit(){this.load()}showMessage(a,e){this.flashType=a,this.flashText=e,this.flashTimeout&&clearTimeout(this.flashTimeout),this.flashTimeout=setTimeout(()=>{this.flashText=null},3e3)}load(){this.loading=!0,this.error=null,this.api.getAll().subscribe({next:a=>{this.orders=(a.allOrders??[]).sort((e,r)=>new Date(r.placedAt).getTime()-new Date(e.placedAt).getTime()),this.loading=!1,a.message&&this.showMessage("success",a.message)},error:a=>{console.error("Orders load error:",a),this.error="Failed to load orders";let e=a.error?.message||"Failed to load orders";this.showMessage("danger",e),this.loading=!1}})}get filtered(){let a=this.query.trim().toLowerCase();return a?this.orders.filter(e=>e._id.toLowerCase().includes(a)||e.shippingAddress.fullName.toLowerCase().includes(a)||e.status.toLowerCase().includes(a)):this.orders}openDetails(a){this.selected=a}cancel(a){this.call(a._id,"cancel")}paid(a){this.call(a._id,"paid")}shipped(a){this.call(a._id,"shipped")}delivered(a){this.call(a._id,"delivered")}statusClass(a){let e=(a||"").toLowerCase();return{paid:"bg-success-subtle text-success",delivered:"bg-success-subtle text-success",shipped:"bg-info-subtle text-info",pending:"bg-warning-subtle text-warning",canceled:"bg-danger-subtle text-danger",cancelled:"bg-danger-subtle text-danger",refunded:"bg-danger-subtle text-danger"}[e]||"bg-secondary-subtle text-secondary"}statusLabel(a){let e=(a||"").toLowerCase();return e==="refunded"?"Refunded":e==="cancelled"||e==="canceled"?"Cancelled":e.charAt(0).toUpperCase()+e.slice(1)}call(a,e){let r={cancel:()=>this.api.cancel(a),paid:()=>this.api.markPaid(a),shipped:()=>this.api.markShipped(a),delivered:()=>this.api.markDelivered(a)}[e];r().subscribe({next:n=>{this.load();let l=n.message||"Order updated successfully";this.showMessage("success",l)},error:n=>{console.error("Action error:",n);let l=n.error?.message||"Failed to update order";this.showMessage("danger",l)}})}static \u0275fac=function(e){return new(e||s)(P(Fe))};static \u0275cmp=C({type:s,selectors:[["app-orders"]],standalone:!1,decls:31,vars:6,consts:[["loadingTpl",""],["shipValue",""],["noDisc",""],[1,"mb-3"],[1,"d-flex","align-items-center","mb-2"],["placeholder","Search by ID, name, status...",1,"form-control","me-2",2,"max-width","320px",3,"ngModelChange","ngModel"],[1,"btn","btn-outline-secondary",3,"click"],["role","alert",3,"class",4,"ngIf"],["class","alert alert-danger py-2",4,"ngIf"],[1,"card","card-glass","shadow-soft"],[1,"table-responsive"],[1,"table","align-middle","mb-0"],[1,"table-light"],[2,"width","160px"],[1,"text-end",2,"width","140px"],[2,"width","130px"],[1,"text-center",2,"width","120px"],[1,"text-center",2,"width","200px"],[4,"ngIf","ngIfElse"],["id","orderDetailsModal","data-bs-backdrop","false","data-bs-keyboard","true","tabindex","-1","aria-hidden","true",1,"modal"],[1,"modal-dialog","modal-xl","modal-fullscreen-md-down","modal-dialog-centered","modal-dialog-scrollable"],["class","modal-content card-glass",4,"ngIf"],["role","alert"],["type","button","aria-label","Close",1,"btn-close","btn-sm",3,"click"],[1,"alert","alert-danger","py-2"],[4,"ngFor","ngForOf"],[1,"text-muted"],[1,"text-end","fw-semibold"],[1,"badge",3,"ngClass"],[1,"text-center"],["data-bs-toggle","modal","data-bs-target","#orderDetailsModal",1,"btn","btn-sm","text-white",2,"background-color","#ff5a7a","border-color","#ff5a7a",3,"click"],[1,"bi","bi-card-list","me-1"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","data-bs-container","body","data-bs-boundary","viewport","data-bs-offset","0,0","aria-expanded","false",1,"btn","btn-sm","btn-outline-secondary","dropdown-toggle"],[1,"dropdown-menu","dropdown-menu-end"],["type","button",1,"dropdown-item","text-danger",3,"click"],["type","button",1,"dropdown-item","text-success",3,"click"],["type","button",1,"dropdown-item","text-primary",3,"click"],["type","button",1,"dropdown-item","text-info",3,"click"],[1,"p-4","text-center","text-muted"],[1,"modal-content","card-glass"],[1,"modal-header"],[1,"modal-title","mb-0","d-flex","align-items-center","gap-2"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body","overflow-auto"],[1,"small","text-muted","mb-3","d-flex","flex-wrap","gap-2"],[1,"text-dark","fw-semibold"],[1,"row","g-3","mb-3"],[1,"col-12","col-lg-4"],[1,"border","rounded","p-3","h-100"],[1,"fw-semibold","mb-2"],[1,"small","text-muted"],[1,"mb-1"],[1,"fw-semibold","text-dark"],[1,"text-break"],[1,"text-dark"],[1,"small"],[1,"d-flex","justify-content-between","py-1"],[1,"fw-semibold"],[1,"my-2"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-bold"],[1,"table","table-sm","align-middle","mb-0"],[1,"text-end"],[1,"modal-footer"],[1,"me-auto","fw-semibold"],["type","button","data-bs-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"badge","bg-success-subtle","text-success"],[1,"fw-semibold","text-danger"]],template:function(e,r){if(e&1){let n=S();t(0,"h2",3),o(1,"Orders"),i(),t(2,"div",4)(3,"input",5),x("ngModelChange",function(g){return m(n),v(r.query,g)||(r.query=g),p(g)}),i(),t(4,"button",6),h("click",function(){return m(n),p(r.load())}),o(5,"Reload"),i()(),w(6,Di,3,4,"div",7)(7,Ai,2,1,"div",8),t(8,"div",9)(9,"div",10)(10,"table",11)(11,"thead",12)(12,"tr")(13,"th",13),o(14,"Order ID"),i(),t(15,"th"),o(16,"Customer"),i(),t(17,"th",14),o(18,"Total"),i(),t(19,"th",15),o(20,"Status"),i(),t(21,"th",16),o(22,"Details"),i(),t(23,"th",17),o(24,"Actions"),i()()(),w(25,Vi,2,1,"tbody",18),i()()(),w(26,Wi,2,0,"ng-template",null,0,de),t(28,"div",19)(29,"div",20),w(30,zi,104,42,"div",21),i()()}if(e&2){let n=q(27);d(3),b("ngModel",r.query),d(3),u("ngIf",r.flashText),d(),u("ngIf",r.error),d(18),u("ngIf",!r.loading)("ngIfElse",n),d(5),u("ngIf",r.selected)}},dependencies:[me,pe,ue,_e,fe,be,mt,ht,pt],styles:[".tall-modal[_ngcontent-%COMP%]{max-width:520px}.tall-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{min-height:80vh}@media (min-width: 992px){.tall-modal[_ngcontent-%COMP%]{max-width:480px}}.modal-backdrop[_ngcontent-%COMP%]{display:none!important}"]})};var ri=()=>[];function Ui(s,a){if(s&1&&(t(0,"option",38),o(1),i()),s&2){let e=a.$implicit;u("value",e._id||e.id),d(),k(e.name)}}function Gi(s,a){s&1&&(t(0,"div",39)(1,"div",40)(2,"span",41),o(3,"Loading..."),i()(),t(4,"p",42),o(5,"Loading books..."),i()())}function Hi(s,a){if(s&1&&(t(0,"div",43),o(1),i()),s&2){let e=c();d(),y(" ",e.error," ")}}function Qi(s,a){s&1&&(t(0,"div",39),_(1,"i",47),t(2,"p",48),o(3,"No books found. Try adjusting your filters."),i()())}function Zi(s,a){if(s&1&&_(0,"img",60),s&2){let e=c().$implicit;u("src",e.image.url,rt)("alt",e.title)}}function Ji(s,a){s&1&&(t(0,"span",33),o(1,"No image"),i())}function Yi(s,a){if(s&1&&(t(0,"span"),o(1),i()),s&2){let e=a.$implicit,r=a.last;d(),je(" ",e.name||e,"",r?"":", "," ")}}function Xi(s,a){s&1&&(t(0,"span",33),o(1,"No author"),i())}function Ki(s,a){if(s&1&&(t(0,"span"),o(1),i()),s&2){let e=a.$implicit,r=a.last;d(),je(" ",e.name||e,"",r?"":", "," ")}}function $i(s,a){s&1&&(t(0,"span",33),o(1,"No category"),i())}function en(s,a){if(s&1){let e=S();t(0,"tr")(1,"td"),w(2,Zi,1,2,"img",52)(3,Ji,2,0,"span",53),i(),t(4,"td")(5,"strong"),o(6),i()(),t(7,"td"),w(8,Yi,2,2,"span",51)(9,Xi,2,0,"span",53),i(),t(10,"td"),w(11,Ki,2,2,"span",51)(12,$i,2,0,"span",53),i(),t(13,"td"),o(14),M(15,"number"),i(),t(16,"td"),o(17),i(),t(18,"td")(19,"span",54),o(20),i()(),t(21,"td")(22,"div",55)(23,"button",56),h("click",function(){let n=m(e).$implicit,l=c(3);return p(l.openEditBookForm(n))}),_(24,"i",57),i(),t(25,"button",58),h("click",function(){let n=m(e).$implicit,l=c(3);return p(l.deleteBook(n))}),_(26,"i",59),i()()()()}if(s&2){let e=a.$implicit;d(2),u("ngIf",e.image==null?null:e.image.url),d(),u("ngIf",!(e.image!=null&&e.image.url)),d(3),k(e.title),d(2),u("ngForOf",e.authors||te(14,ri)),d(),u("ngIf",!e.authors||e.authors.length===0),d(2),u("ngForOf",e.categories||te(15,ri)),d(),u("ngIf",!e.categories||e.categories.length===0),d(2),y("",I(15,11,e.price,"1.2-2")," EGP"),d(3),k(e.stock),d(2),u("ngClass",e.isActive?"bg-success":"bg-secondary"),d(),y(" ",e.isActive?"Active":"Inactive"," ")}}function tn(s,a){if(s&1&&(t(0,"div",49)(1,"table",50)(2,"thead")(3,"tr")(4,"th"),o(5,"Image"),i(),t(6,"th"),o(7,"Title"),i(),t(8,"th"),o(9,"Author(s)"),i(),t(10,"th"),o(11,"Category"),i(),t(12,"th"),o(13,"Price"),i(),t(14,"th"),o(15,"Stock"),i(),t(16,"th"),o(17,"Status"),i(),t(18,"th"),o(19,"Actions"),i()()(),t(20,"tbody"),w(21,en,27,16,"tr",51),i()()()),s&2){let e=c(2);d(21),u("ngForOf",e.books)}}function nn(s,a){if(s&1){let e=S();t(0,"li",63)(1,"a",64),h("click",function(){let n=m(e).$implicit,l=c(3);return p(l.onPageChange(n))}),o(2),i()()}if(s&2){let e=a.$implicit,r=c(3);E("active",e===r.currentPage),d(2),k(e)}}function rn(s,a){if(s&1){let e=S();t(0,"nav",61)(1,"ul",62)(2,"li",63)(3,"a",64),h("click",function(){m(e);let n=c(2);return p(n.onPageChange(n.currentPage-1))}),o(4,"Previous"),i()(),w(5,nn,3,3,"li",65),t(6,"li",63)(7,"a",64),h("click",function(){m(e);let n=c(2);return p(n.onPageChange(n.currentPage+1))}),o(8,"Next"),i()()()()}if(s&2){let e=c(2);d(2),E("disabled",e.currentPage===1),d(3),u("ngForOf",e.getPageNumbers()),d(),E("disabled",e.currentPage===e.totalPages)}}function on(s,a){if(s&1&&(t(0,"div",44)(1,"div",5),w(2,Qi,4,0,"div",34)(3,tn,22,1,"div",45)(4,rn,9,5,"nav",46),i()()),s&2){let e=c();d(2),u("ngIf",e.books.length===0),d(),u("ngIf",e.books.length>0),d(),u("ngIf",e.totalPages>1)}}function an(s,a){if(s&1){let e=S();t(0,"div",90)(1,"input",91),h("change",function(){let n=m(e).$implicit,l=c(2);return p(l.onRequiredAuthorSelect(n._id||n.id))}),i(),t(2,"label",92),o(3),i()()}if(s&2){let e=a.$implicit,r=c(2);d(),u("id","required-author-"+(e._id||e.id))("checked",r.isRequiredAuthorSelected(e._id||e.id)),d(),u("for","required-author-"+(e._id||e.id)),d(),y(" ",e.name," ")}}function sn(s,a){s&1&&(t(0,"div",33),o(1,"No authors available"),i())}function ln(s,a){if(s&1){let e=S();t(0,"div",66)(1,"div",67)(2,"div",68)(3,"div",69)(4,"h5",70),_(5,"i",3),o(6," Create New Book - Step 1: Required Information "),i(),t(7,"button",71),h("click",function(){m(e);let n=c();return p(n.closeBookForm())}),i()(),t(8,"div",72)(9,"div",73),_(10,"i",74),o(11," Please fill in the required fields to create the book. You can add more details in the next step. "),i(),t(12,"form")(13,"div",75)(14,"div",76)(15,"div",77)(16,"label",78),o(17,"Title "),t(18,"span",79),o(19,"*"),i()(),t(20,"input",80),x("ngModelChange",function(n){m(e);let l=c();return v(l.requiredForm.title,n)||(l.requiredForm.title=n),p(n)}),i()()(),t(21,"div",7)(22,"div",77)(23,"label",81),o(24,"Price "),t(25,"span",79),o(26,"*"),i()(),t(27,"input",82),x("ngModelChange",function(n){m(e);let l=c();return v(l.requiredForm.price,n)||(l.requiredForm.price=n),p(n)}),i()()()(),t(28,"div",75)(29,"div",83)(30,"div",77)(31,"label",84),o(32,"Stock "),t(33,"span",79),o(34,"*"),i()(),t(35,"input",85),x("ngModelChange",function(n){m(e);let l=c();return v(l.requiredForm.stock,n)||(l.requiredForm.stock=n),p(n)}),i()()()(),t(36,"div",77)(37,"label",8),o(38,"Authors "),t(39,"span",79),o(40,"*"),i()(),t(41,"div",86),w(42,an,4,4,"div",87)(43,sn,2,0,"div",53),i()()()(),t(44,"div",88)(45,"button",89),h("click",function(){m(e);let n=c();return p(n.closeBookForm())}),o(46,"Cancel"),i(),t(47,"button",11),h("click",function(){m(e);let n=c();return p(n.submitRequiredForm())}),_(48,"i",3),o(49," Create Book "),i()()()()()}if(s&2){let e=c();R("display",e.showBookForm&&!e.editingBook?"block":"none"),E("show",e.showBookForm&&!e.editingBook),d(20),b("ngModel",e.requiredForm.title),d(7),b("ngModel",e.requiredForm.price),d(8),b("ngModel",e.requiredForm.stock),d(7),u("ngForOf",e.authors),d(),u("ngIf",e.authors.length===0)}}function dn(s,a){if(s&1&&(t(0,"small",33),o(1),i()),s&2){let e=c(2);d(),y("Selected: ",e.selectedImageFile.name)}}function cn(s,a){if(s&1&&(t(0,"small",33),o(1),i()),s&2){let e=c(2);d(),y("Selected: ",e.selectedPdfFile.name)}}function mn(s,a){if(s&1){let e=S();t(0,"div",90)(1,"input",91),h("change",function(){let n=m(e).$implicit,l=c(2);return p(l.onDetailsCategorySelect(n._id||n.id))}),i(),t(2,"label",92),o(3),i()()}if(s&2){let e=a.$implicit,r=c(2);d(),u("id","details-cat-"+(e._id||e.id))("checked",r.isDetailsCategorySelected(e._id||e.id)),d(),u("for","details-cat-"+(e._id||e.id)),d(),y(" ",e.name," ")}}function pn(s,a){s&1&&(t(0,"div",33),o(1,"No categories available"),i())}function un(s,a){if(s&1){let e=S();t(0,"div",66)(1,"div",67)(2,"div",68)(3,"div",93)(4,"h5",70),_(5,"i",57),o(6," Fill Book Details - Step 2: Optional Information "),i(),t(7,"button",71),h("click",function(){m(e);let n=c();return p(n.closeDetailsForm())}),i()(),t(8,"div",72)(9,"div",94),_(10,"i",95),o(11," Book created successfully! Now you can add optional details. "),i(),t(12,"form",96)(13,"div",77)(14,"label",97),o(15,"Description"),i(),t(16,"textarea",98),x("ngModelChange",function(n){m(e);let l=c();return v(l.detailsForm.description,n)||(l.detailsForm.description=n),p(n)}),i()(),t(17,"div",75)(18,"div",83)(19,"div",77)(20,"label",99),o(21,"ISBN"),i(),t(22,"input",100),x("ngModelChange",function(n){m(e);let l=c();return v(l.detailsForm.isbn,n)||(l.detailsForm.isbn=n),p(n)}),i()()(),t(23,"div",83)(24,"div",77)(25,"label",101),o(26,"SKU"),i(),t(27,"input",102),x("ngModelChange",function(n){m(e);let l=c();return v(l.detailsForm.sku,n)||(l.detailsForm.sku=n),p(n)}),i()()()(),t(28,"div",75)(29,"div",83)(30,"div",77)(31,"label",103),o(32,"Publisher"),i(),t(33,"input",104),x("ngModelChange",function(n){m(e);let l=c();return v(l.detailsForm.publisher,n)||(l.detailsForm.publisher=n),p(n)}),i()()(),t(34,"div",105)(35,"div",77)(36,"label",106),o(37,"Language"),i(),t(38,"input",107),x("ngModelChange",function(n){m(e);let l=c();return v(l.detailsForm.language,n)||(l.detailsForm.language=n),p(n)}),i()()(),t(39,"div",105)(40,"div",77)(41,"label",108),o(42,"Published Date"),i(),t(43,"input",109),x("ngModelChange",function(n){m(e);let l=c();return v(l.detailsForm.publishedAt,n)||(l.detailsForm.publishedAt=n),p(n)}),i()()()(),t(44,"div",77)(45,"label",110),o(46,"Book Cover Image"),i(),t(47,"input",111),h("change",function(n){m(e);let l=c();return p(l.onImageFileSelected(n,!1))}),i(),t(48,"div",112),o(49,"Upload a cover image for the book (JPG, PNG, etc.)"),i(),w(50,dn,2,1,"small",53),i(),t(51,"div",77)(52,"label",113),o(53,"Book PDF"),i(),t(54,"input",114),h("change",function(n){m(e);let l=c();return p(l.onPdfFileSelected(n,!1))}),i(),t(55,"div",112),o(56,"Upload the book PDF file"),i(),w(57,cn,2,1,"small",53),i(),t(58,"div",77)(59,"label",8),o(60,"Categories"),i(),t(61,"div",86),w(62,mn,4,4,"div",87)(63,pn,2,0,"div",53),i()(),t(64,"div",77)(65,"div",90)(66,"input",115),x("ngModelChange",function(n){m(e);let l=c();return v(l.detailsForm.isActive,n)||(l.detailsForm.isActive=n),p(n)}),i(),t(67,"label",116),o(68," Active (visible to customers) "),i()()()()(),t(69,"div",88)(70,"button",89),h("click",function(){m(e);let n=c();return p(n.closeDetailsForm())}),o(71,"Skip & Close"),i(),t(72,"button",117),h("click",function(){m(e);let n=c();return p(n.submitDetailsForm())}),_(73,"i",118),o(74," Update Details "),i()()()()()}if(s&2){let e=c();R("display",e.showDetailsForm?"block":"none"),E("show",e.showDetailsForm),d(16),b("ngModel",e.detailsForm.description),d(6),b("ngModel",e.detailsForm.isbn),d(5),b("ngModel",e.detailsForm.sku),d(6),b("ngModel",e.detailsForm.publisher),d(5),b("ngModel",e.detailsForm.language),d(5),b("ngModel",e.detailsForm.publishedAt),d(7),u("ngIf",e.selectedImageFile),d(7),u("ngIf",e.selectedPdfFile),d(5),u("ngForOf",e.categories),d(),u("ngIf",e.categories.length===0),d(3),b("ngModel",e.detailsForm.isActive)}}function hn(s,a){if(s&1&&(t(0,"small",33),o(1),i()),s&2){let e=c(2);d(),y("Selected: ",e.selectedEditImageFile.name)}}function gn(s,a){if(s&1&&(t(0,"small",33),o(1),i()),s&2){let e=c(2);d(),y("Current: ",e.bookForm.image.url)}}function _n(s,a){if(s&1&&(t(0,"small",33),o(1),i()),s&2){let e=c(2);d(),y("Selected: ",e.selectedEditPdfFile.name)}}function fn(s,a){if(s&1&&(t(0,"small",33),o(1),i()),s&2){let e=c(2);d(),y("Current: ",e.bookForm.pdfUrl)}}function bn(s,a){if(s&1){let e=S();t(0,"div",90)(1,"input",91),h("change",function(){let n=m(e).$implicit,l=c(2);return p(l.onAuthorSelect(n._id||n.id))}),i(),t(2,"label",92),o(3),i()()}if(s&2){let e=a.$implicit,r=c(2);d(),u("id","author-"+(e._id||e.id))("checked",r.isAuthorSelected(e._id||e.id)),d(),u("for","author-"+(e._id||e.id)),d(),y(" ",e.name," ")}}function vn(s,a){s&1&&(t(0,"div",33),o(1,"No authors available"),i())}function xn(s,a){if(s&1){let e=S();t(0,"div",90)(1,"input",91),h("change",function(){let n=m(e).$implicit,l=c(2);return p(l.onCategorySelect(n._id||n.id))}),i(),t(2,"label",92),o(3),i()()}if(s&2){let e=a.$implicit,r=c(2);d(),u("id","cat-"+(e._id||e.id))("checked",r.isCategorySelected(e._id||e.id)),d(),u("for","cat-"+(e._id||e.id)),d(),y(" ",e.name," ")}}function wn(s,a){s&1&&(t(0,"div",33),o(1,"No categories available"),i())}function yn(s,a){if(s&1){let e=S();t(0,"div",66)(1,"div",67)(2,"div",68)(3,"div",69)(4,"h5",70),_(5,"i",57),o(6," Edit Book "),i(),t(7,"button",71),h("click",function(){m(e);let n=c();return p(n.closeBookForm())}),i()(),t(8,"div",72)(9,"form",119)(10,"div",75)(11,"div",76)(12,"div",77)(13,"label",120),o(14,"Title "),t(15,"span",79),o(16,"*"),i()(),t(17,"input",121),x("ngModelChange",function(n){m(e);let l=c();return v(l.bookForm.title,n)||(l.bookForm.title=n),p(n)}),i()()(),t(18,"div",7)(19,"div",77)(20,"label",122),o(21,"Price "),t(22,"span",79),o(23,"*"),i()(),t(24,"input",123),x("ngModelChange",function(n){m(e);let l=c();return v(l.bookForm.price,n)||(l.bookForm.price=n),p(n)}),i()()()(),t(25,"div",77)(26,"label",124),o(27,"Description"),i(),t(28,"textarea",125),x("ngModelChange",function(n){m(e);let l=c();return v(l.bookForm.description,n)||(l.bookForm.description=n),p(n)}),i()(),t(29,"div",75)(30,"div",7)(31,"div",77)(32,"label",126),o(33,"Stock "),t(34,"span",79),o(35,"*"),i()(),t(36,"input",127),x("ngModelChange",function(n){m(e);let l=c();return v(l.bookForm.stock,n)||(l.bookForm.stock=n),p(n)}),i()()(),t(37,"div",7)(38,"div",77)(39,"label",128),o(40,"ISBN"),i(),t(41,"input",129),x("ngModelChange",function(n){m(e);let l=c();return v(l.bookForm.isbn,n)||(l.bookForm.isbn=n),p(n)}),i()()(),t(42,"div",7)(43,"div",77)(44,"label",130),o(45,"SKU"),i(),t(46,"input",131),x("ngModelChange",function(n){m(e);let l=c();return v(l.bookForm.sku,n)||(l.bookForm.sku=n),p(n)}),i()()()(),t(47,"div",75)(48,"div",83)(49,"div",77)(50,"label",132),o(51,"Publisher"),i(),t(52,"input",133),x("ngModelChange",function(n){m(e);let l=c();return v(l.bookForm.publisher,n)||(l.bookForm.publisher=n),p(n)}),i()()(),t(53,"div",105)(54,"div",77)(55,"label",134),o(56,"Language"),i(),t(57,"input",135),x("ngModelChange",function(n){m(e);let l=c();return v(l.bookForm.language,n)||(l.bookForm.language=n),p(n)}),i()()(),t(58,"div",105)(59,"div",77)(60,"label",136),o(61,"Published Date"),i(),t(62,"input",137),x("ngModelChange",function(n){m(e);let l=c();return v(l.bookForm.publishedAt,n)||(l.bookForm.publishedAt=n),p(n)}),i()()()(),t(63,"div",77)(64,"label",138),o(65,"Book Cover Image"),i(),t(66,"input",139),h("change",function(n){m(e);let l=c();return p(l.onImageFileSelected(n,!0))}),i(),t(67,"div",112),o(68,"Upload a cover image for the book (JPG, PNG, etc.)"),i(),w(69,hn,2,1,"small",53)(70,gn,2,1,"small",53),i(),t(71,"div",77)(72,"label",140),o(73,"Book PDF"),i(),t(74,"input",141),h("change",function(n){m(e);let l=c();return p(l.onPdfFileSelected(n,!0))}),i(),t(75,"div",112),o(76,"Upload the book PDF file"),i(),w(77,_n,2,1,"small",53)(78,fn,2,1,"small",53),i(),t(79,"div",77)(80,"label",8),o(81,"Authors"),i(),t(82,"div",86),w(83,bn,4,4,"div",87)(84,vn,2,0,"div",53),i()(),t(85,"div",77)(86,"label",8),o(87,"Categories"),i(),t(88,"div",86),w(89,xn,4,4,"div",87)(90,wn,2,0,"div",53),i()(),t(91,"div",77)(92,"div",90)(93,"input",142),x("ngModelChange",function(n){m(e);let l=c();return v(l.bookForm.isActive,n)||(l.bookForm.isActive=n),p(n)}),i(),t(94,"label",143),o(95," Active (visible to customers) "),i()()()()(),t(96,"div",88)(97,"button",89),h("click",function(){m(e);let n=c();return p(n.closeBookForm())}),o(98,"Cancel"),i(),t(99,"button",11),h("click",function(){m(e);let n=c();return p(n.submitBookForm())}),_(100,"i",118),o(101," Update Book "),i()()()()()}if(s&2){let e=c();R("display",e.showBookForm&&e.editingBook?"block":"none"),E("show",e.showBookForm&&e.editingBook),d(17),b("ngModel",e.bookForm.title),d(7),b("ngModel",e.bookForm.price),d(4),b("ngModel",e.bookForm.description),d(8),b("ngModel",e.bookForm.stock),d(5),b("ngModel",e.bookForm.isbn),d(5),b("ngModel",e.bookForm.sku),d(6),b("ngModel",e.bookForm.publisher),d(5),b("ngModel",e.bookForm.language),d(5),b("ngModel",e.bookForm.publishedAt),d(7),u("ngIf",e.selectedEditImageFile),d(),u("ngIf",!e.selectedEditImageFile&&(e.bookForm.image==null?null:e.bookForm.image.url)),d(7),u("ngIf",e.selectedEditPdfFile),d(),u("ngIf",!e.selectedEditPdfFile&&e.bookForm.pdfUrl),d(5),u("ngForOf",e.authors),d(),u("ngIf",e.authors.length===0),d(5),u("ngForOf",e.categories),d(),u("ngIf",e.categories.length===0),d(3),b("ngModel",e.bookForm.isActive)}}var Be=class s{constructor(a,e,r,n,l){this.bookService=a;this.categoryService=e;this.authorService=r;this.authService=n;this.uploadService=l}books=[];categories=[];authors=[];loading=!0;error=null;currentPage=1;pageSize=12;totalBooks=0;totalPages=0;filters={page:1,limit:12,sort:"createdAt",isActive:void 0};searchQuery="";selectedCategory="";selectedAuthor="";minPrice=null;maxPrice=null;sortBy="createdAt";statusFilter="all";showBookForm=!1;showDetailsForm=!1;editingBook=null;newlyCreatedBook=null;bookForm={title:"",description:"",price:0,stock:0,pdfUrl:"",image:{url:""},isbn:"",sku:"",publisher:"",language:"",publishedAt:"",authors:[],categories:[],isActive:!0};requiredForm={title:"",price:0,stock:0,authors:[]};detailsForm={description:"",pdfUrl:"",image:{url:""},isbn:"",sku:"",publisher:"",language:"",publishedAt:"",categories:[],isActive:!0};selectedImageFile=null;selectedPdfFile=null;selectedEditImageFile=null;selectedEditPdfFile=null;ngOnInit(){this.loadCategories(),this.loadAuthors(),this.loadBooks()}loadCategories(){this.categoryService.getCategories().subscribe({next:a=>{this.categories=a||[]},error:a=>{console.error("Error loading categories:",a)}})}loadAuthors(){this.authorService.getAuthors().subscribe({next:a=>{Array.isArray(a)?this.authors=a.filter(e=>e.status==="approved"):a.items?this.authors=a.items.filter(e=>e.status==="approved"):this.authors=[]},error:a=>{console.error("Error loading authors:",a),this.authors=[]}})}loadBooks(){this.loading=!0,this.error=null;let a={page:this.currentPage,limit:this.pageSize,sort:this.sortBy};this.searchQuery&&this.searchQuery.trim()&&(a.q=this.searchQuery.trim()),this.selectedCategory&&(a.category=this.selectedCategory),this.selectedAuthor&&(a.author=this.selectedAuthor),this.minPrice!==null&&this.minPrice!==""&&(a.minPrice=typeof this.minPrice=="string"?parseFloat(this.minPrice):this.minPrice),this.maxPrice!==null&&this.maxPrice!==""&&(a.maxPrice=typeof this.maxPrice=="string"?parseFloat(this.maxPrice):this.maxPrice),this.statusFilter==="active"?a.isActive=!0:this.statusFilter==="inactive"&&(a.isActive=!1),this.bookService.getAllBooks(a).subscribe({next:e=>{this.books=e.items||e.books||[],this.totalBooks=e.meta?.total||0,this.totalPages=e.meta?.pages||0,this.currentPage=e.meta?.page||1,this.loading=!1},error:e=>{this.error=e.error?.message||"Failed to load books",this.loading=!1,console.error("Error loading books:",e)}})}onSearch(){this.currentPage=1,this.loadBooks()}onCategoryChange(){this.currentPage=1,this.loadBooks()}onAuthorChange(){this.currentPage=1,this.loadBooks()}onPriceFilterChange(){this.currentPage=1,this.loadBooks()}onSortChange(){this.currentPage=1,this.loadBooks()}onStatusFilterChange(){this.currentPage=1,this.loadBooks()}onPageChange(a){this.currentPage=a,this.loadBooks()}clearFilters(){this.searchQuery="",this.selectedCategory="",this.selectedAuthor="",this.minPrice=null,this.maxPrice=null,this.sortBy="createdAt",this.statusFilter="all",this.currentPage=1,this.loadBooks()}getPageNumbers(){let a=[],e=Math.min(this.totalPages,10),r=Math.max(1,this.currentPage-4),n=Math.min(this.totalPages,r+9);for(let l=r;l<=n;l++)a.push(l);return a}openCreateBookForm(){this.editingBook=null,this.newlyCreatedBook=null,this.requiredForm={title:"",price:0,stock:0,authors:[]},this.detailsForm={description:"",pdfUrl:"",image:{url:""},isbn:"",sku:"",publisher:"",language:"",publishedAt:"",categories:[],isActive:!0},this.selectedImageFile=null,this.selectedPdfFile=null,this.showBookForm=!0,this.showDetailsForm=!1}openEditBookForm(a){this.editingBook=a,this.bookForm={title:a.title||"",description:a.description||"",price:a.price||0,stock:a.stock||0,pdfUrl:a.pdfUrl||"",image:a.image||{url:""},isbn:a.isbn||"",sku:a.sku||"",publisher:a.publisher||"",language:a.language||"",publishedAt:a.publishedAt?new Date(a.publishedAt).toISOString().split("T")[0]:"",authors:a.authors?Array.isArray(a.authors)?a.authors.map(e=>e._id||e.id||e):[]:[],categories:a.categories?Array.isArray(a.categories)?a.categories.map(e=>e._id||e.id||e):[]:[],isActive:a.isActive!==void 0?a.isActive:!0},this.selectedEditImageFile=null,this.selectedEditPdfFile=null,this.showBookForm=!0}closeBookForm(){this.showBookForm=!1,this.showDetailsForm=!1,this.editingBook=null,this.newlyCreatedBook=null,this.selectedImageFile=null,this.selectedPdfFile=null,this.selectedEditImageFile=null,this.selectedEditPdfFile=null}onImageFileSelected(a,e=!1){let r=a.target.files[0];r&&(e?this.selectedEditImageFile=r:this.selectedImageFile=r)}onPdfFileSelected(a,e=!1){let r=a.target.files[0];r&&(e?this.selectedEditPdfFile=r:this.selectedPdfFile=r)}closeDetailsForm(){this.showDetailsForm=!1,this.newlyCreatedBook=null,this.loadBooks()}onCategorySelect(a){this.bookForm.categories||(this.bookForm.categories=[]);let e=this.bookForm.categories.indexOf(a);e>-1?this.bookForm.categories.splice(e,1):this.bookForm.categories.push(a)}isCategorySelected(a){return this.bookForm.categories&&this.bookForm.categories.includes(a)}onAuthorSelect(a){this.bookForm.authors||(this.bookForm.authors=[]);let e=this.bookForm.authors.indexOf(a);e>-1?this.bookForm.authors.splice(e,1):this.bookForm.authors.push(a)}isAuthorSelected(a){return this.bookForm.authors&&this.bookForm.authors.includes(a)}onRequiredAuthorSelect(a){this.requiredForm.authors||(this.requiredForm.authors=[]);let e=this.requiredForm.authors.indexOf(a);e>-1?this.requiredForm.authors.splice(e,1):this.requiredForm.authors.push(a)}isRequiredAuthorSelected(a){return this.requiredForm.authors&&this.requiredForm.authors.includes(a)}onDetailsCategorySelect(a){this.detailsForm.categories||(this.detailsForm.categories=[]);let e=this.detailsForm.categories.indexOf(a);e>-1?this.detailsForm.categories.splice(e,1):this.detailsForm.categories.push(a)}isDetailsCategorySelected(a){return this.detailsForm.categories&&this.detailsForm.categories.includes(a)}submitRequiredForm(){if(!this.requiredForm.title||!this.requiredForm.title.trim()){alert("Title is required");return}if(this.requiredForm.price<0){alert("Price must be 0 or greater");return}if(this.requiredForm.stock<0){alert("Stock must be 0 or greater");return}if(!this.requiredForm.authors||this.requiredForm.authors.length===0){alert("At least one author is required");return}let a={title:this.requiredForm.title.trim(),price:parseFloat(this.requiredForm.price),stock:parseInt(this.requiredForm.stock),authors:this.requiredForm.authors};this.bookService.createBook(a).subscribe({next:e=>{this.newlyCreatedBook=e.book||e,this.showBookForm=!1,this.showDetailsForm=!0,alert("Book created successfully! Now fill in the details.")},error:e=>{alert(e.error?.message||"Failed to create book"),console.error("Error creating book:",e)}})}submitDetailsForm(){if(!this.newlyCreatedBook){alert("Error: Book not found. Please try again."),this.closeDetailsForm();return}let a={};this.detailsForm.description&&(a.description=this.detailsForm.description.trim()),this.detailsForm.isbn&&(a.isbn=this.detailsForm.isbn.trim()),this.detailsForm.sku&&(a.sku=this.detailsForm.sku.trim()),this.detailsForm.publisher&&(a.publisher=this.detailsForm.publisher.trim()),this.detailsForm.language&&(a.language=this.detailsForm.language.trim()),this.detailsForm.publishedAt&&(a.publishedAt=new Date(this.detailsForm.publishedAt).toISOString()),this.detailsForm.categories&&this.detailsForm.categories.length>0&&(a.categories=this.detailsForm.categories),this.detailsForm.isActive!==void 0&&(a.isActive=this.detailsForm.isActive),this.selectedImageFile&&!a.image&&(a.image={});let e=this.newlyCreatedBook._id||this.newlyCreatedBook.id;if(!e){alert("Error: Book ID not found. Please try again.");return}this.bookService.updateBook(e,a).subscribe({next:r=>{let n=[];if(this.selectedImageFile){let l=X(this.uploadService.uploadImage(e,this.selectedImageFile)).then(()=>{console.log("Image uploaded successfully"),alert("Image uploaded successfully!")}).catch(g=>{console.error("Error uploading image:",g);let N=g.error?.error||g.error?.message||g.message||"Failed to upload image";alert(`Image upload failed: ${N}`)});n.push(l)}if(this.selectedPdfFile){let l=X(this.uploadService.uploadPdf(e,this.selectedPdfFile)).then(()=>{console.log("PDF uploaded successfully"),alert("PDF uploaded successfully!")}).catch(g=>{console.error("Error uploading PDF:",g);let N=g.error?.error||g.error?.message||g.message||"Failed to upload PDF";alert(`PDF upload failed: ${N}`)});n.push(l)}Promise.all(n).finally(()=>{alert("Book details updated successfully!"),this.closeDetailsForm(),this.loadBooks()})},error:r=>{alert(r.error?.message||"Failed to update book details"),console.error("Error updating book details:",r)}})}submitBookForm(){if(!this.bookForm.title||!this.bookForm.title.trim()){alert("Title is required");return}if(this.bookForm.price<0){alert("Price must be 0 or greater");return}if(this.bookForm.stock<0){alert("Stock must be 0 or greater");return}let a={title:this.bookForm.title.trim(),description:this.bookForm.description||"",price:parseFloat(this.bookForm.price),stock:parseInt(this.bookForm.stock),isActive:this.bookForm.isActive};this.bookForm.isbn&&(a.isbn=this.bookForm.isbn.trim()),this.bookForm.sku&&(a.sku=this.bookForm.sku.trim()),this.bookForm.publisher&&(a.publisher=this.bookForm.publisher.trim()),this.bookForm.language&&(a.language=this.bookForm.language.trim()),this.bookForm.publishedAt&&(a.publishedAt=new Date(this.bookForm.publishedAt).toISOString()),this.bookForm.authors&&this.bookForm.authors.length>0&&(a.authors=this.bookForm.authors),this.bookForm.categories&&this.bookForm.categories.length>0&&(a.categories=this.bookForm.categories),this.selectedEditImageFile&&!a.image&&(a.image={});let e=this.editingBook._id||this.editingBook.id;if(!e){alert("Error: Book ID not found. Please try again.");return}this.bookService.updateBook(e,a).subscribe({next:r=>{let n=[];if(this.selectedEditImageFile){let l=X(this.uploadService.uploadImage(e,this.selectedEditImageFile)).then(()=>{console.log("Image uploaded successfully"),alert("Image uploaded successfully!")}).catch(g=>{console.error("Error uploading image:",g);let N=g.error?.error||g.error?.message||g.message||"Failed to upload image";alert(`Image upload failed: ${N}`)});n.push(l)}if(this.selectedEditPdfFile){let l=X(this.uploadService.uploadPdf(e,this.selectedEditPdfFile)).then(()=>{console.log("PDF uploaded successfully"),alert("PDF uploaded successfully!")}).catch(g=>{console.error("Error uploading PDF:",g);let N=g.error?.error||g.error?.message||g.message||"Failed to upload PDF";alert(`PDF upload failed: ${N}`)});n.push(l)}Promise.all(n).finally(()=>{alert("Book updated successfully!"),this.closeBookForm(),this.loadBooks()})},error:r=>{alert(r.error?.message||"Failed to update book"),console.error("Error updating book:",r)}})}deleteBook(a){confirm(`Are you sure you want to delete "${a.title}"?`)&&this.bookService.deleteBook(a._id||a.id).subscribe({next:e=>{alert("Book deleted successfully!"),this.loadBooks()},error:e=>{alert(e.error?.message||"Failed to delete book"),console.error("Error deleting book:",e)}})}static \u0275fac=function(e){return new(e||s)(P(Qt),P(Ht),P(Zt),P(ge),P(Kt))};static \u0275cmp=C({type:s,selectors:[["app-books"]],standalone:!1,decls:74,vars:14,consts:[[1,"books-page"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"btn","btn-danger",3,"click"],[1,"bi","bi-plus-circle"],[1,"card","shadow-sm","mb-4"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-4"],[1,"form-label"],[1,"input-group"],["type","text","placeholder","Search books by title, author...",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],["type","button",1,"btn","btn-danger",3,"click"],[1,"bi","bi-search"],[1,"col-md-2"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value","createdAt"],["value","-createdAt"],["value","price"],["value","-price"],["value","title"],["value","-title"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-1"],["type","number","placeholder","Min",1,"form-control",3,"ngModelChange","change","ngModel"],["type","number","placeholder","Max",1,"form-control",3,"ngModelChange","change","ngModel"],["value","all"],["value","active"],["value","inactive"],[1,"btn","btn-outline-secondary","w-100",3,"click"],[1,"bi","bi-x-circle"],[1,"row","mt-2"],[1,"col-12"],[1,"text-muted"],["class","text-center py-5",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","card shadow-sm",4,"ngIf"],["class","modal fade","tabindex","-1","style","background-color: rgba(0,0,0,0.5);",3,"show","display",4,"ngIf"],[3,"value"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-danger"],[1,"visually-hidden"],[1,"mt-3"],["role","alert",1,"alert","alert-danger"],[1,"card","shadow-sm"],["class","table-responsive",4,"ngIf"],["aria-label","Books pagination","class","mt-4",4,"ngIf"],[1,"bi","bi-inbox","fs-1","text-muted"],[1,"text-muted","mt-3"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],["class","book-thumbnail",3,"src","alt",4,"ngIf"],["class","text-muted",4,"ngIf"],[1,"badge",3,"ngClass"],["role","group",1,"btn-group"],["title","Edit",1,"btn","btn-sm","btn-primary",3,"click"],[1,"bi","bi-pencil"],["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"bi","bi-trash"],[1,"book-thumbnail",3,"src","alt"],["aria-label","Books pagination",1,"mt-4"],[1,"pagination","justify-content-center"],[1,"page-item"],[1,"page-link",2,"cursor","pointer",3,"click"],["class","page-item",3,"active",4,"ngFor","ngForOf"],["tabindex","-1",1,"modal","fade",2,"background-color","rgba(0,0,0,0.5)"],[1,"modal-dialog","modal-lg","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header","bg-danger","text-white"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close","btn-close-white",3,"click"],[1,"modal-body"],[1,"alert","alert-info"],[1,"bi","bi-info-circle"],[1,"row"],[1,"col-md-8"],[1,"mb-3"],["for","requiredTitle",1,"form-label"],[1,"text-danger"],["type","text","id","requiredTitle","name","requiredTitle","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","requiredPrice",1,"form-label"],["type","number","step","0.01","min","0","id","requiredPrice","name","requiredPrice","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-6"],["for","requiredStock",1,"form-label"],["type","number","min","0","id","requiredStock","name","requiredStock","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"border","rounded","p-3",2,"max-height","150px","overflow-y","auto"],["class","form-check",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"change","id","checked"],[1,"form-check-label",3,"for"],[1,"modal-header","bg-primary","text-white"],[1,"alert","alert-success"],[1,"bi","bi-check-circle"],["enctype","multipart/form-data"],["for","detailsDescription",1,"form-label"],["id","detailsDescription","rows","4","name","detailsDescription",1,"form-control",3,"ngModelChange","ngModel"],["for","detailsIsbn",1,"form-label"],["type","text","id","detailsIsbn","name","detailsIsbn",1,"form-control",3,"ngModelChange","ngModel"],["for","detailsSku",1,"form-label"],["type","text","id","detailsSku","name","detailsSku",1,"form-control",3,"ngModelChange","ngModel"],["for","detailsPublisher",1,"form-label"],["type","text","id","detailsPublisher","name","detailsPublisher",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-3"],["for","detailsLanguage",1,"form-label"],["type","text","id","detailsLanguage","name","detailsLanguage",1,"form-control",3,"ngModelChange","ngModel"],["for","detailsPublishedAt",1,"form-label"],["type","date","id","detailsPublishedAt","name","detailsPublishedAt",1,"form-control",3,"ngModelChange","ngModel"],["for","detailsImageFile",1,"form-label"],["type","file","id","detailsImageFile","accept","image/*","name","image",1,"form-control",3,"change"],[1,"form-text"],["for","detailsPdfFile",1,"form-label"],["type","file","id","detailsPdfFile","accept",".pdf","name","book",1,"form-control",3,"change"],["type","checkbox","id","detailsIsActive","name","detailsIsActive",1,"form-check-input",3,"ngModelChange","ngModel"],["for","detailsIsActive",1,"form-check-label"],["type","button",1,"btn","btn-primary",3,"click"],[1,"bi","bi-check"],["encrypt","multipart/form-data","method","post"],["for","title",1,"form-label"],["type","text","id","title","name","title","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","price",1,"form-label"],["type","number","step","0.01","min","0","id","price","name","price","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","description",1,"form-label"],["id","description","rows","4","name","description",1,"form-control",3,"ngModelChange","ngModel"],["for","stock",1,"form-label"],["type","number","min","0","id","stock","name","stock","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","isbn",1,"form-label"],["type","text","id","isbn","name","isbn",1,"form-control",3,"ngModelChange","ngModel"],["for","sku",1,"form-label"],["type","text","id","sku","name","sku",1,"form-control",3,"ngModelChange","ngModel"],["for","publisher",1,"form-label"],["type","text","id","publisher","name","publisher",1,"form-control",3,"ngModelChange","ngModel"],["for","language",1,"form-label"],["type","text","id","language","name","language",1,"form-control",3,"ngModelChange","ngModel"],["for","publishedAt",1,"form-label"],["type","date","id","publishedAt","name","publishedAt",1,"form-control",3,"ngModelChange","ngModel"],["for","imageFile",1,"form-label"],["type","file","id","imageFile","accept","image/*","name","image",1,"form-control",3,"change"],["for","pdfFile",1,"form-label"],["type","file","id","pdfFile","accept",".pdf","name","book",1,"form-control",3,"change"],["type","checkbox","id","isActive","name","isActive",1,"form-check-input",3,"ngModelChange","ngModel"],["for","isActive",1,"form-check-label"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"div",1)(2,"h2"),o(3,"Books Management"),i(),t(4,"button",2),h("click",function(){return r.openCreateBookForm()}),_(5,"i",3),o(6," Create New Book "),i()(),t(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"label",8),o(12,"Search"),i(),t(13,"div",9)(14,"input",10),x("ngModelChange",function(l){return v(r.searchQuery,l)||(r.searchQuery=l),l}),h("keyup.enter",function(){return r.onSearch()}),i(),t(15,"button",11),h("click",function(){return r.onSearch()}),_(16,"i",12),i()()(),t(17,"div",13)(18,"label",8),o(19,"Sort By"),i(),t(20,"select",14),x("ngModelChange",function(l){return v(r.sortBy,l)||(r.sortBy=l),l}),h("change",function(){return r.onSortChange()}),t(21,"option",15),o(22,"Newest First"),i(),t(23,"option",16),o(24,"Oldest First"),i(),t(25,"option",17),o(26,"Price: Low to High"),i(),t(27,"option",18),o(28,"Price: High to Low"),i(),t(29,"option",19),o(30,"Title: A-Z"),i(),t(31,"option",20),o(32,"Title: Z-A"),i()()(),t(33,"div",13)(34,"label",8),o(35,"Category"),i(),t(36,"select",14),x("ngModelChange",function(l){return v(r.selectedCategory,l)||(r.selectedCategory=l),l}),h("change",function(){return r.onCategoryChange()}),t(37,"option",21),o(38,"All Categories"),i(),w(39,Ui,2,2,"option",22),i()(),t(40,"div",23)(41,"label",8),o(42,"Min Price"),i(),t(43,"input",24),x("ngModelChange",function(l){return v(r.minPrice,l)||(r.minPrice=l),l}),h("change",function(){return r.onPriceFilterChange()}),i()(),t(44,"div",23)(45,"label",8),o(46,"Max Price"),i(),t(47,"input",25),x("ngModelChange",function(l){return v(r.maxPrice,l)||(r.maxPrice=l),l}),h("change",function(){return r.onPriceFilterChange()}),i()(),t(48,"div",23)(49,"label",8),o(50,"Status"),i(),t(51,"select",14),x("ngModelChange",function(l){return v(r.statusFilter,l)||(r.statusFilter=l),l}),h("change",function(){return r.onStatusFilterChange()}),t(52,"option",26),o(53,"All"),i(),t(54,"option",27),o(55,"Active"),i(),t(56,"option",28),o(57,"Inactive"),i()()(),t(58,"div",23)(59,"label",8),o(60,"\xA0"),i(),t(61,"button",29),h("click",function(){return r.clearFilters()}),_(62,"i",30),o(63," Clear "),i()()(),t(64,"div",31)(65,"div",32)(66,"small",33),o(67),i()()()()(),w(68,Gi,6,0,"div",34)(69,Hi,2,1,"div",35)(70,on,5,3,"div",36),i(),w(71,ln,50,9,"div",37)(72,un,75,15,"div",37)(73,yn,102,22,"div",37)),e&2&&(d(14),b("ngModel",r.searchQuery),d(6),b("ngModel",r.sortBy),d(16),b("ngModel",r.selectedCategory),d(3),u("ngForOf",r.categories),d(4),b("ngModel",r.minPrice),d(4),b("ngModel",r.maxPrice),d(4),b("ngModel",r.statusFilter),d(16),y("Results: ",r.totalBooks," books found"),d(),u("ngIf",r.loading),d(),u("ngIf",r.error&&!r.loading),d(),u("ngIf",!r.loading&&!r.error),d(),u("ngIf",r.showBookForm&&!r.editingBook),d(),u("ngIf",r.showDetailsForm),d(),u("ngIf",r.showBookForm&&r.editingBook))},dependencies:[me,pe,ue,Vt,Rt,Nt,_e,Wt,Dt,Lt,fe,At,qt,jt,be,Ot,ut],styles:[".books-page[_ngcontent-%COMP%]{padding:20px}.book-thumbnail[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;border-radius:4px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;font-weight:600}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:.25rem}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:last-child{margin-right:0}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#dc3545;border-color:#dc3545}.pagination[_ngcontent-%COMP%]   .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#dc3545;border-color:#dc3545}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]:hover{background-color:#dc3545;color:#fff}.modal[_ngcontent-%COMP%]{display:none}.modal.show[_ngcontent-%COMP%]{display:block}.modal.show[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{margin:1.75rem auto}.form-control[_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem #dc354540}.badge[_ngcontent-%COMP%]{font-size:.875rem;padding:.35em .65em}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}.form-check[_ngcontent-%COMP%]{margin-bottom:.5rem}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#dc3545;border-color:#dc3545}"]})};var kn=[{path:"",component:Ce,canActivate:[Y],children:[{path:"",component:Ee,canActivate:[Y]},{path:"orders",component:Me,canActivate:[Y]},{path:"manage-books",component:Be,canActivate:[Y]},{path:"review-authors",component:$t,canActivate:[Y]}]}],Pe=class s{static \u0275fac=function(e){return new(e||s)};static \u0275mod=L({type:s});static \u0275inj=W({imports:[ie.forChild(kn),ie]})};var oi=class s{static \u0275fac=function(e){return new(e||s)};static \u0275mod=L({type:s});static \u0275inj=W({imports:[gt,Pe,ti,ni,Ut,Xt,Pt,zt,Gt,ie]})};export{oi as DashboardModule};
