import{a as T,r as Y,s as H}from"./chunk-VRDYXINS.js";import{a as de,b as ce}from"./chunk-X6XPXAWX.js";import{a as ie,d as oe,e as re,f as ae,g as se,h as me,i as le}from"./chunk-L7GH46DH.js";import{a as $,b as ee}from"./chunk-M7YYPVK7.js";import{$c as ne,Aa as y,Ab as z,Ac as W,Bc as D,C as b,Ec as q,H as c,I as g,Ib as N,Ic as G,Jb as V,Jc as J,Ka as E,Kc as K,Lb as F,Lc as Q,Mb as j,Mc as U,Oa as o,Ob as S,Pa as R,Qa as k,Ta as x,Ua as M,Uc as X,V as a,Va as _,Yc as Z,_c as te,aa as f,da as O,ea as h,ia as v,ka as L,na as d,oa as e,pa as i,qa as p,sb as B,vc as A,xa as I,za as P}from"./chunk-DBZ4JVQV.js";function fe(r,s){if(r&1&&(e(0,"div",29),p(1,"i",30),o(2),i()),r&2){let t=y();a(2),k(" ",t.expiredMessage," ")}}function ue(r,s){if(r&1&&(e(0,"div",31),p(1,"i",32),o(2),i()),r&2){let t=y();a(2),k(" ",t.errorMessage," ")}}function be(r,s){r&1&&(e(0,"span"),p(1,"i",33),o(2," Sign In "),i())}function he(r,s){r&1&&(e(0,"span"),p(1,"span",34),o(2," Signing in... "),i())}var w=class r{constructor(s,t,n,l){this.authService=s;this.router=t;this.route=n;this.snackBar=l}email="";password="";rememberMe=!1;hidePassword=!0;isLoading=!1;errorMessage=null;expiredMessage=null;ngOnInit(){this.route.queryParams.subscribe(s=>{s.expired==="true"&&(this.expiredMessage="Your session has expired. Please login again.",this.snackBar.open("Your session has expired. Please login again.","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["error-snackbar"]}))})}onSubmit(){this.isLoading=!0,this.errorMessage=null;let s={email:this.email,password:this.password};this.authService.login(s).subscribe({next:t=>{console.log("Login successful:",t),localStorage.setItem("authToken",t.token),localStorage.setItem("user",JSON.stringify(t.user)),t.user?.role?.toLowerCase()==="admin"?this.router.navigate(["/dashboard"]):this.router.navigate(["/"])},error:t=>{this.isLoading=!1,t.status===401?this.errorMessage=t.error.error:t.status===500?this.errorMessage="A server error occurred. Please try again later.":this.errorMessage="An unexpected error occurred. Please check your connection.",console.error("Login error:",t)},complete:()=>{this.isLoading=!1}})}static \u0275fac=function(t){return new(t||r)(f(T),f(F),f(V),f(Y))};static \u0275cmp=O({type:r,selectors:[["app-login"]],standalone:!1,decls:50,vars:12,consts:[["loginForm","ngForm"],[1,"login-section","py-5"],[1,"container"],[1,"row","justify-content-center"],[1,"col-12","col-md-8","col-lg-6","col-xl-5"],[1,"login-card","shadow-lg"],[1,"login-card-header"],[1,"logo-box","mb-3"],[1,"login-title"],[1,"login-subtitle"],[1,"login-form",3,"ngSubmit"],["class","expired-message alert alert-warning",4,"ngIf"],["class","error-message",4,"ngIf"],["appearance","outline",1,"w-100"],["matInput","","type","email","name","email","required","","placeholder","Enter your email",3,"ngModelChange","ngModel"],["matPrefix",""],["matInput","","name","password","required","","placeholder","Enter your password",3,"ngModelChange","type","ngModel"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],["name","rememberMe",3,"ngModelChange","ngModel"],["routerLink","/forgot-password",1,"forgot-password-link"],["mat-raised-button","","color","primary","type","submit",1,"login-btn","w-100",3,"disabled"],[4,"ngIf"],[1,"divider","my-4"],[1,"switch-text","text-center"],["routerLink","/register",1,"register-link"],[1,"text-center","mt-3"],["routerLink","/",1,"home-link"],[1,"bi","bi-arrow-left","me-2"],[1,"expired-message","alert","alert-warning"],[1,"bi","bi-clock-history","me-2"],[1,"error-message"],[1,"bi","bi-exclamation-triangle-fill","me-2"],[1,"bi","bi-box-arrow-in-right","me-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(t,n){if(t&1){let l=I();e(0,"section",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"mat-card",5)(5,"div",6)(6,"div",7),o(7,"B"),i(),e(8,"h2",8),o(9,"Welcome Back"),i(),e(10,"p",9),o(11,"Sign in to your account to continue"),i()(),e(12,"form",10,0),P("ngSubmit",function(){return c(l),g(n.onSubmit())}),v(14,fe,3,1,"div",11)(15,ue,3,1,"div",12),e(16,"mat-form-field",13)(17,"mat-label"),o(18,"Email Address"),i(),e(19,"input",14),_("ngModelChange",function(m){return c(l),M(n.email,m)||(n.email=m),g(m)}),i(),e(20,"mat-icon",15),o(21,"email"),i()(),e(22,"mat-form-field",13)(23,"mat-label"),o(24,"Password"),i(),e(25,"input",16),_("ngModelChange",function(m){return c(l),M(n.password,m)||(n.password=m),g(m)}),i(),e(26,"mat-icon",15),o(27,"lock"),i(),e(28,"button",17),P("click",function(){return c(l),g(n.hidePassword=!n.hidePassword)}),e(29,"mat-icon"),o(30),i()()(),e(31,"div",18)(32,"mat-checkbox",19),_("ngModelChange",function(m){return c(l),M(n.rememberMe,m)||(n.rememberMe=m),g(m)}),o(33," Remember me "),i(),e(34,"a",20),o(35,"Forgot password?"),i()(),e(36,"button",21),v(37,be,3,0,"span",22)(38,he,3,0,"span",22),i(),e(39,"div",23)(40,"span"),o(41,"or"),i()(),e(42,"p",24),o(43," Don't have an account? "),e(44,"a",25),o(45,"Create one here"),i()(),e(46,"div",26)(47,"a",27),p(48,"i",28),o(49," Back to Home "),i()()()()()()()()}if(t&2){let l=E(13);a(14),d("ngIf",n.expiredMessage),a(),d("ngIf",n.errorMessage),a(4),x("ngModel",n.email),a(6),d("type",n.hidePassword?"password":"text"),x("ngModel",n.password),a(3),L("aria-label","Hide password")("aria-pressed",n.hidePassword),a(2),R(n.hidePassword?"visibility_off":"visibility"),a(2),x("ngModel",n.rememberMe),a(4),d("disabled",n.isLoading||!l.form.valid),a(),d("ngIf",!n.isLoading),a(),d("ngIf",n.isLoading)}},dependencies:[B,U,q,G,J,X,Q,K,$,ae,ie,oe,re,me,de,W,A,te,j],styles:['[_ngcontent-%COMP%]:root{--brand: #dc3545;--brand-hover: #c82333;--text-dark: #2c3e50;--text-muted: #6c757d;--bg-light: #f8f9fa}.login-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#fff,#f8f9fa);min-height:calc(100vh - 200px);display:flex;align-items:center;padding:4rem 0}.login-card[_ngcontent-%COMP%]{border-radius:20px!important;border:none!important;overflow:hidden;background:#fff;position:relative}.login-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--brand),#ff6b6b,var(--brand));background-size:200% 100%;animation:_ngcontent-%COMP%_gradientShift 3s ease infinite}@keyframes _ngcontent-%COMP%_gradientShift{0%,to{background-position:0% 50%}50%{background-position:100% 50%}}.login-card-header[_ngcontent-%COMP%]{text-align:center;padding:2rem 2rem 1rem;background:linear-gradient(135deg,#dc35450d,#fff)}.logo-box[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:12px;display:inline-flex;align-items:center;justify-content:center;background:var(--brand);color:#fff;font-weight:800;font-size:1.5rem;margin:0 auto;box-shadow:0 4px 12px #dc35454d;transition:transform .3s ease,box-shadow .3s ease}.logo-box[_ngcontent-%COMP%]:hover{transform:translateY(-2px) scale(1.05);box-shadow:0 6px 16px #dc354566}.login-title[_ngcontent-%COMP%]{color:var(--text-dark);font-size:2rem;font-weight:700;margin:1rem 0 .5rem;letter-spacing:-.5px}.login-subtitle[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.95rem;margin:0}.login-form[_ngcontent-%COMP%]{padding:2rem}.error-message[_ngcontent-%COMP%]{color:#721c24;background-color:#f8d7da;border:1px solid #f5c6cb;border-radius:10px;padding:12px 16px;margin-bottom:1.5rem;display:flex;align-items:center;font-size:.9rem;animation:_ngcontent-%COMP%_slideDown .3s ease}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}  .mat-mdc-form-field{width:100%;margin-bottom:1rem}  .mat-mdc-text-field-wrapper{background-color:#f8f9fa;border-radius:8px}  .mat-mdc-form-field-focus-overlay{background-color:transparent}  .mat-mdc-form-field.mat-focused .mat-mdc-text-field-wrapper{background-color:#fff}  .mat-mdc-form-field .mat-mdc-text-field-wrapper .mat-mdc-form-field-flex{padding:0 12px}  .mat-mdc-form-field .mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control input{padding:12px 0}  .mat-mdc-form-field-subscript-wrapper{margin-top:4px}.login-btn[_ngcontent-%COMP%]{height:48px!important;font-size:1rem!important;font-weight:600!important;border-radius:12px!important;text-transform:none!important;letter-spacing:.5px;transition:all .3s ease!important;box-shadow:0 4px 12px #dc35454d!important}.login-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 16px #dc354566!important}.login-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.login-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.divider[_ngcontent-%COMP%]{position:relative;text-align:center;color:var(--text-muted);font-size:.9rem}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#e9ecef}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;background:#fff;padding:0 1rem}.forgot-password-link[_ngcontent-%COMP%]{color:var(--brand);text-decoration:none;font-size:.9rem;font-weight:500;transition:color .2s ease}.forgot-password-link[_ngcontent-%COMP%]:hover{color:var(--brand-hover);text-decoration:underline}.register-link[_ngcontent-%COMP%]{color:var(--brand);text-decoration:none;font-weight:600;transition:color .2s ease}.register-link[_ngcontent-%COMP%]:hover{color:var(--brand-hover);text-decoration:underline}.home-link[_ngcontent-%COMP%]{color:var(--text-muted);text-decoration:none;font-size:.9rem;transition:color .2s ease;display:inline-flex;align-items:center}.home-link[_ngcontent-%COMP%]:hover{color:var(--brand)}.switch-text[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.95rem;margin:0}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem;border-width:.15em}@media (max-width: 768px){.login-section[_ngcontent-%COMP%]{padding:2rem 0;min-height:calc(100vh - 150px)}.login-card-header[_ngcontent-%COMP%]{padding:1.5rem 1.5rem 1rem}.login-form[_ngcontent-%COMP%]{padding:1.5rem}.login-title[_ngcontent-%COMP%]{font-size:1.75rem}.logo-box[_ngcontent-%COMP%]{width:50px;height:50px;font-size:1.25rem}}@media (max-width: 576px){.login-card-header[_ngcontent-%COMP%]{padding:1.25rem 1rem .75rem}.login-form[_ngcontent-%COMP%]{padding:1.25rem}.login-title[_ngcontent-%COMP%]{font-size:1.5rem}}']})};var xe=[{path:"",component:w}],C=class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=h({type:r});static \u0275inj=b({imports:[S.forChild(xe),S]})};var pe=class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=h({type:r});static \u0275inj=b({imports:[z,Z,ee,se,le,ce,D,ne,H,C,N]})};export{pe as LoginModule};
