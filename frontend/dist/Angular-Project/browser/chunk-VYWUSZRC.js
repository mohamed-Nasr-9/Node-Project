import{a as pe}from"./chunk-A3XQ6QBT.js";import{a as de}from"./chunk-XYYWDBOZ.js";import{a as se,b as ce,c as me}from"./chunk-RZHO2OWO.js";import"./chunk-OHDIIJHJ.js";import{a as C,r as J,s as K}from"./chunk-VRDYXINS.js";import{b as ae}from"./chunk-M7YYPVK7.js";import{$c as le,Aa as c,Ab as j,Ac as $,B as R,Bc as W,C as O,E as P,Eb as U,Ec as Q,Gb as z,Gc as S,H as g,I as u,Ic as X,Jb as H,Jc as Z,Lb as G,Ma as T,Mc as ee,Oa as a,Ob as Y,Oc as te,Pa as v,Pb as q,Pc as ie,Qa as b,Ra as k,U as M,V as r,Xc as ne,Ya as A,Yc as oe,Zc as re,aa as x,ab as B,cb as E,da as D,ea as F,ia as p,na as s,oa as i,pa as n,qa as m,rb as V,sb as L,xa as h,xb as N,za as _}from"./chunk-DBZ4JVQV.js";var y=class t{constructor(o,e){this.http=o;this.authService=e}API_URL=q.apiUrl+"/reviews";getBookReviews(o,e=1,l=5){let d=new U().set("page",e.toString()).set("limit",l.toString());return this.http.get(`${this.API_URL}/book/${o}`,{params:d})}createReview(o){let e=this.authService.getAuthHeaders();return this.http.post(this.API_URL,o,{headers:e})}static \u0275fac=function(e){return new(e||t)(P(z),P(C))};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})};var xe=()=>[1,2,3,4,5];function he(t,o){t&1&&(i(0,"div",1)(1,"div",2)(2,"div",3)(3,"span",4),a(4,"Loading..."),n()(),i(5,"p",5),a(6,"Loading book details..."),n()()())}function we(t,o){if(t&1){let e=h();i(0,"div",1)(1,"div",6)(2,"h4",7),a(3,"Error!"),n(),i(4,"p"),a(5),n(),m(6,"hr"),i(7,"button",8),_("click",function(){g(e);let d=c();return u(d.goBack())}),a(8,"Go Back"),n()()()}if(t&2){let e=c();r(5),v(e.error)}}function ke(t,o){t&1&&(i(0,"div",60)(1,"span",61),a(2,"10% off"),n()())}function Ce(t,o){if(t&1&&(i(0,"span"),a(1),n()),t&2){let e=o.$implicit,l=o.last;r(),k(" ",e.name||e,"",l?"":", "," ")}}function Se(t,o){if(t&1&&(i(0,"span"),p(1,Ce,2,2,"span",62),n()),t&2){let e=c(2);r(),s("ngForOf",e.book.authors)}}function ye(t,o){if(t&1&&(i(0,"span"),a(1),n()),t&2){let e=c(2);r(),b(" ",(e.book.author==null?null:e.book.author.name)||e.book.author||"Unknown Author"," ")}}function Ie(t,o){t&1&&m(0,"i",69)}function Pe(t,o){t&1&&m(0,"i",70)}function Be(t,o){if(t&1&&(i(0,"div",23)(1,"div",63)(2,"span",64),p(3,Ie,1,0,"i",65)(4,Pe,1,0,"i",66),n(),i(5,"span",67),a(6),n(),i(7,"span",68),a(8),n()()()),t&2){let e=c(2);r(3),s("ngForOf",e.getStars(e.book.ratingAvg)),r(),s("ngForOf",e.getEmptyStars(e.book.ratingAvg)),r(2),v(e.book.ratingAvg.toFixed(1)),r(2),b("(",e.book.ratingCount," reviews)")}}function Ee(t,o){if(t&1&&(i(0,"span",71),a(1),n()),t&2){let e=c(2);r(),b("",e.book.originalPrice," EGP")}}function Re(t,o){if(t&1&&(i(0,"span"),a(1),n()),t&2){let e=c(3);r(),b(" (",e.book.stock," available)")}}function Oe(t,o){if(t&1&&(i(0,"span",72),m(1,"i",73),a(2,"In Stock"),p(3,Re,2,1,"span",21),n()),t&2){let e=c(2);r(3),s("ngIf",e.book.stock<=5)}}function Me(t,o){t&1&&(i(0,"span",61),m(1,"i",74),a(2,"Out of Stock "),n())}function De(t,o){if(t&1&&(i(0,"div",23)(1,"h5",75),a(2,"Description"),n(),i(3,"p",76),a(4),n()()),t&2){let e=c(2);r(4),v(e.book.description)}}function Fe(t,o){if(t&1&&(i(0,"div",77)(1,"div",78)(2,"label",79),a(3,"ISBN"),n(),i(4,"div",80),a(5),n()()()),t&2){let e=c(2);r(5),v(e.book.isbn)}}function Te(t,o){if(t&1&&(i(0,"div",77)(1,"div",78)(2,"label",79),a(3,"SKU"),n(),i(4,"div",80),a(5),n()()()),t&2){let e=c(2);r(5),v(e.book.sku)}}function Ae(t,o){if(t&1&&(i(0,"div",77)(1,"div",78)(2,"label",79),a(3,"Publisher"),n(),i(4,"div",80),a(5),n()()()),t&2){let e=c(2);r(5),v(e.book.publisher)}}function Ve(t,o){if(t&1&&(i(0,"div",77)(1,"div",78)(2,"label",79),a(3,"Language"),n(),i(4,"div",80),a(5),n()()()),t&2){let e=c(2);r(5),v(e.book.language)}}function Le(t,o){if(t&1&&(i(0,"div",77)(1,"div",78)(2,"label",79),a(3,"Published"),n(),i(4,"div",80),a(5),B(6,"date"),n()()()),t&2){let e=c(2);r(5),v(E(6,1,e.book.publishedAt,"mediumDate"))}}function Ne(t,o){if(t&1&&(i(0,"span",83)(1,"span",84),a(2),n()()),t&2){let e=o.$implicit;r(2),v(e.name||e)}}function je(t,o){if(t&1&&(i(0,"div",81)(1,"div",78)(2,"label",79),a(3,"Categories"),n(),i(4,"div"),p(5,Ne,3,1,"span",82),n()()()),t&2){let e=c(2);r(5),s("ngForOf",e.book.categories)}}function Ue(t,o){if(t&1){let e=h();i(0,"button",85),_("click",function(){g(e);let d=c(2);return u(d.showReviewFormDialog())}),m(1,"i",86),a(2," Write a Review "),n()}}function ze(t,o){if(t&1){let e=h();i(0,"button",87),_("click",function(){g(e);let d=c(2);return u(d.showReviewFormDialog())}),m(1,"i",86),a(2," Write a Review "),n()}}function He(t,o){if(t&1){let e=h();i(0,"button",104),_("click",function(){let d=g(e).index,f=c(3);return u(f.reviewForm.patchValue({rating:d+1}))}),m(1,"i",105),n()}if(t&2){let e=o.index,l=c(3);T("text-warning",l.reviewForm.value.rating>=e+1)("text-muted",l.reviewForm.value.rating<e+1)}}function Ge(t,o){t&1&&(i(0,"div",106),a(1," Please select a rating "),n())}function Ye(t,o){t&1&&(i(0,"span"),a(1,"Submit Review"),n())}function qe(t,o){t&1&&(i(0,"span"),m(1,"span",107),a(2," Submitting... "),n())}function $e(t,o){if(t&1){let e=h();i(0,"div",88)(1,"div",89)(2,"h5",90),a(3,"Write Your Review"),n()(),i(4,"div",91)(5,"form",92),_("ngSubmit",function(){g(e);let d=c(2);return u(d.submitReview())}),i(6,"div",18)(7,"label",93),a(8,"Rating "),i(9,"span",94),a(10,"*"),n()(),i(11,"div",95),p(12,He,2,4,"button",96),i(13,"span",97),a(14),n()(),p(15,Ge,2,0,"div",98),n(),i(16,"div",18)(17,"label",99),a(18,"Your Review (Optional)"),n(),m(19,"textarea",100),n(),i(20,"div",101)(21,"button",102),p(22,Ye,2,0,"span",21)(23,qe,3,0,"span",21),n(),i(24,"button",103),_("click",function(){g(e);let d=c(2);return u(d.cancelReviewForm())}),a(25," Cancel "),n()()()()()}if(t&2){let e,l=c(2);r(5),s("formGroup",l.reviewForm),r(7),s("ngForOf",A(8,xe)),r(2),b("",l.reviewForm.value.rating," out of 5"),r(),s("ngIf",((e=l.reviewForm.get("rating"))==null?null:e.invalid)&&((e=l.reviewForm.get("rating"))==null?null:e.touched)),r(6),s("disabled",l.isSubmittingReview||!l.reviewForm.valid),r(),s("ngIf",!l.isSubmittingReview),r(),s("ngIf",l.isSubmittingReview),r(),s("disabled",l.isSubmittingReview)}}function We(t,o){t&1&&m(0,"i",116)}function Je(t,o){t&1&&m(0,"i",117)}function Ke(t,o){if(t&1&&(i(0,"div",108)(1,"div",109)(2,"div",110)(3,"h3",111),a(4),n(),i(5,"p",19),a(6,"out of 5"),n()(),i(7,"div",112)(8,"div",113)(9,"span",64),p(10,We,1,0,"i",114)(11,Je,1,0,"i",115),n(),i(12,"span",80),a(13),n()(),i(14,"p",68),a(15),n()()()()),t&2){let e=c(2);r(4),v(e.book.ratingAvg.toFixed(1)),r(6),s("ngForOf",e.getStars(e.book.ratingAvg)),r(),s("ngForOf",e.getEmptyStars(e.book.ratingAvg)),r(2),b("",e.book.ratingAvg.toFixed(1)," average"),r(2),b("Based on ",e.book.ratingCount," reviews")}}function Qe(t,o){t&1&&(i(0,"div",118)(1,"div",3)(2,"span",4),a(3,"Loading reviews..."),n()(),i(4,"p",5),a(5,"Loading reviews..."),n()())}function Xe(t,o){if(t&1&&(i(0,"div",119),m(1,"i",120),a(2),n()),t&2){let e=c(2);r(2),b(" ",e.reviewsError," ")}}function Ze(t,o){t&1&&(i(0,"div",118),m(1,"i",121),i(2,"h4",68),a(3,"No Reviews Yet"),n(),i(4,"p"),a(5,"Be the first to review this book!"),n()())}function et(t,o){t&1&&m(0,"i",116)}function tt(t,o){t&1&&m(0,"i",117)}function it(t,o){if(t&1&&(i(0,"div",124)(1,"div",125)(2,"div",126)(3,"div",127),a(4),n(),i(5,"div",128),a(6),B(7,"date"),n()(),i(8,"div",129)(9,"div",130)(10,"span",83),p(11,et,1,0,"i",114)(12,tt,1,0,"i",115),n()(),i(13,"p",131),a(14),n()()()()),t&2){let e=o.$implicit,l=c(3);r(4),k("",(e.userId==null?null:e.userId.FirstName)||"User"," ",(e.userId==null?null:e.userId.LastName)||""),r(2),v(E(7,6,e.createdAt,"mediumDate")),r(5),s("ngForOf",l.getStars(e.rating)),r(),s("ngForOf",l.getEmptyStars(e.rating)),r(2),v(e.review)}}function nt(t,o){if(t&1&&(i(0,"div",122),p(1,it,15,9,"div",123),n()),t&2){let e=c(2);r(),s("ngForOf",e.reviews)}}function ot(t,o){if(t&1){let e=h();i(0,"nav",132)(1,"button",133),_("click",function(){g(e);let d=c(2);return u(d.onReviewPageChange(d.currentReviewPage-1))}),m(2,"i",10),a(3," Previous "),n(),i(4,"span",134),a(5),n(),i(6,"button",133),_("click",function(){g(e);let d=c(2);return u(d.onReviewPageChange(d.currentReviewPage+1))}),a(7," Next "),m(8,"i",135),n()()}if(t&2){let e=c(2);r(),s("disabled",e.currentReviewPage===1),r(4),k(" Page ",e.currentReviewPage," of ",e.reviewPagination.totalPages," "),r(),s("disabled",e.currentReviewPage===e.reviewPagination.totalPages)}}function rt(t,o){if(t&1){let e=h();i(0,"div",1)(1,"button",9),_("click",function(){g(e);let d=c();return u(d.goBack())}),m(2,"i",10),a(3," Back to Books "),n(),i(4,"div",11)(5,"div",12)(6,"div",13),m(7,"img",14),p(8,ke,3,0,"div",15),n()(),i(9,"div",16)(10,"h1",17),a(11),n(),i(12,"div",18)(13,"h5",19),m(14,"i",20),p(15,Se,2,1,"span",21)(16,ye,2,1,"span",21),n()(),p(17,Be,9,4,"div",22),i(18,"div",23)(19,"div",24)(20,"h2",25),a(21),n(),p(22,Ee,2,1,"span",26),n(),i(23,"div",18),p(24,Oe,4,1,"span",27)(25,Me,3,0,"span",28),n()(),p(26,De,5,1,"div",22),i(27,"div",29)(28,"div",30)(29,"button",31),_("click",function(){g(e);let d=c();return u(d.addToCart())}),m(30,"i",32),a(31," Add to Cart "),n(),i(32,"button",33),m(33,"i",34),a(34," Add to Wishlist "),n()()(),i(35,"div",35)(36,"div",36)(37,"h5",37),a(38,"Book Details"),n(),i(39,"div",38),p(40,Fe,6,1,"div",39)(41,Te,6,1,"div",39)(42,Ae,6,1,"div",39)(43,Ve,6,1,"div",39)(44,Le,7,4,"div",39)(45,je,6,1,"div",40),n()()(),i(46,"div",41)(47,"div",36)(48,"div",42)(49,"div",43),m(50,"i",44),i(51,"div",45),a(52,"Free Delivery"),n()(),i(53,"div",43),m(54,"i",46),i(55,"div",45),a(56,"Quality Guarantee"),n()(),i(57,"div",43),m(58,"i",47),i(59,"div",45),a(60,"Easy Returns"),n()(),i(61,"div",43),m(62,"i",48),i(63,"div",45),a(64,"24/7 Support"),n()()()()()()(),i(65,"div",49)(66,"div",50)(67,"h2",51),a(68,"Customer Reviews"),n(),p(69,Ue,3,0,"button",52)(70,ze,3,0,"button",53),n(),p(71,$e,26,9,"div",54)(72,Ke,16,5,"div",55)(73,Qe,6,0,"div",56)(74,Xe,3,1,"div",57)(75,Ze,6,0,"div",56)(76,nt,2,1,"div",58)(77,ot,9,4,"nav",59),n()()}if(t&2){let e=c();r(7),s("src",(e.book.image==null?null:e.book.image.url)||e.palceholderCover,M)("alt",e.book.title),r(),s("ngIf",e.book.discount),r(3),v(e.book.title),r(4),s("ngIf",e.book.authors&&e.book.authors.length>0),r(),s("ngIf",!e.book.authors||e.book.authors.length===0),r(),s("ngIf",e.book.ratingAvg>0),r(4),b("",e.book.price," EGP"),r(),s("ngIf",e.book.originalPrice),r(2),s("ngIf",e.book.stock>0),r(),s("ngIf",e.book.stock===0),r(),s("ngIf",e.book.description),r(3),s("disabled",e.book.stock===0),r(11),s("ngIf",e.book.isbn),r(),s("ngIf",e.book.sku),r(),s("ngIf",e.book.publisher),r(),s("ngIf",e.book.language),r(),s("ngIf",e.book.publishedAt),r(),s("ngIf",e.book.categories&&e.book.categories.length>0),r(24),s("ngIf",e.isAuthenticated()&&e.hasPurchasedBook&&!e.userHasReviewed&&!e.isCheckingPurchase),r(),s("ngIf",!e.isAuthenticated()),r(),s("ngIf",e.showReviewForm),r(),s("ngIf",e.book.ratingCount>0),r(),s("ngIf",e.reviewsLoading),r(),s("ngIf",!e.reviewsLoading&&e.reviewsError),r(),s("ngIf",!e.reviewsLoading&&!e.reviewsError&&e.reviews.length===0),r(),s("ngIf",!e.reviewsLoading&&!e.reviewsError&&e.reviews.length>0),r(),s("ngIf",!e.reviewsLoading&&e.reviewPagination&&e.reviewPagination.totalPages>1)}}function at(t,o){if(t&1){let e=h();i(0,"div",1)(1,"div",119)(2,"h4"),a(3,"No Data"),n(),i(4,"p"),a(5,"Component loaded but no book data available."),n(),i(6,"button",8),_("click",function(){g(e);let d=c();return u(d.goBack())}),a(7,"Go Back"),n()()()}}var I=class t{constructor(o,e,l,d,f,ue,w,_e){this.route=o;this.router=e;this.bookService=l;this.reviewService=d;this.authService=f;this.profileService=ue;this.snackBar=w;this.fb=_e;this.reviewForm=this.fb.group({rating:[5,[S.required,S.min(1),S.max(5)]],review:[""]})}book=null;loading=!0;error=null;palceholderCover="https://res.cloudinary.com/dbelkcsrq/image/upload/book-store/covers/soul.jpg";reviews=[];reviewPagination=null;reviewsLoading=!0;reviewsError=null;currentReviewPage=1;reviewsLimit=5;reviewForm;showReviewForm=!1;isSubmittingReview=!1;hasPurchasedBook=!1;isCheckingPurchase=!1;userHasReviewed=!1;ngOnInit(){let o=this.route.snapshot.paramMap.get("id");console.log("Book Detail - Book ID from route:",o),o?(this.loadBook(o),this.authService.isAuthenticated()&&this.checkIfUserCanReview(o)):(this.error="Book ID not provided",this.loading=!1,this.reviewsLoading=!1)}loadBook(o){this.loading=!0,this.error=null,console.log("Loading book with ID:",o),this.bookService.getBookById(o).subscribe({next:e=>{console.log("Book loaded successfully:",e),this.book=e,this.loading=!1,this.loadReviews(e._id,this.currentReviewPage)},error:e=>{console.error("Error loading book:",e),console.error("Error status:",e.status),console.error("Error message:",e.message),this.error=e.error?.message||e.message||"Failed to load book. Please try again.",this.loading=!1,this.reviewsLoading=!1}})}loadReviews(o,e){this.reviewsLoading=!0,this.reviewsError=null,this.currentReviewPage=e,this.reviewService.getBookReviews(o,e,this.reviewsLimit).subscribe({next:l=>{this.reviews=l.data,this.reviewPagination=l.pagination,this.reviewsLoading=!1,console.log("Reviews loaded:",l),this.authService.isAuthenticated()&&this.checkIfUserReviewed()},error:l=>{console.error("Error loading reviews:",l),this.reviewsError="Failed to load reviews. Please try again.",this.reviewsLoading=!1}})}checkIfUserReviewed(){if(!this.authService.isAuthenticated()||!this.reviews||this.reviews.length===0){this.userHasReviewed=!1;return}let o=this.authService.getToken();if(!o){this.userHasReviewed=!1;return}try{let e=JSON.parse(atob(o.split(".")[1])),l=e.id||e.userId||e._id;l&&(this.userHasReviewed=this.reviews.some(d=>(typeof d.userId=="string"?d.userId:d.userId?._id||d.userId?.id)===l))}catch(e){console.error("Error decoding token:",e),this.userHasReviewed=!1}}onReviewPageChange(o){o<1||this.reviewPagination&&o>this.reviewPagination.totalPages||this.loadReviews(this.book._id,o)}goBack(){this.router.navigate(["/"])}addToCart(){this.book&&this.bookService.addToCart(this.book)}getStars(o){return Array(Math.floor(o)).fill(0)}getEmptyStars(o){return Array(5-Math.floor(o)).fill(0)}checkIfUserCanReview(o){if(!this.authService.isAuthenticated()){this.hasPurchasedBook=!1;return}this.isCheckingPurchase=!0,this.profileService.getUserOrders().subscribe({next:e=>{let l=e.data?.orders||e.orders||[],d=!1;l.forEach(f=>{(f.payment?.status?.toLowerCase()==="paid"||f.status?.toLowerCase()==="paid")&&f.items&&f.items.length>0&&f.items.forEach(w=>{(typeof w.bookId=="string"?w.bookId:w.bookId?._id||w.bookId?.id||w.book?._id||w.book?.id)===o&&(d=!0)})}),this.hasPurchasedBook=d,this.isCheckingPurchase=!1,this.reviews&&this.reviews.length>0&&this.checkIfUserReviewed()},error:e=>{console.error("Error checking purchase status:",e),this.hasPurchasedBook=!1,this.isCheckingPurchase=!1}})}showReviewFormDialog(){if(!this.authService.isAuthenticated()){this.snackBar.open("Please login to write a review","Login",{duration:3e3,horizontalPosition:"center",verticalPosition:"top"}).onAction().subscribe(()=>{this.router.navigate(["/login"])});return}if(!this.hasPurchasedBook){this.snackBar.open("You must purchase this book before you can review it","Close",{duration:4e3,horizontalPosition:"center",verticalPosition:"top"});return}if(this.userHasReviewed){this.snackBar.open("You have already reviewed this book","Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"top"});return}this.showReviewForm=!0}cancelReviewForm(){this.showReviewForm=!1,this.reviewForm.reset({rating:5,review:""})}submitReview(){if(!this.reviewForm.valid||!this.book){this.reviewForm.markAllAsTouched();return}if(!this.hasPurchasedBook){this.snackBar.open("You must purchase this book before you can review it","Close",{duration:4e3,horizontalPosition:"center",verticalPosition:"top"});return}this.isSubmittingReview=!0;let o={bookId:this.book._id||this.book.id,rating:this.reviewForm.value.rating,review:this.reviewForm.value.review?.trim()||""};this.reviewService.createReview(o).subscribe({next:e=>{this.snackBar.open("Review submitted successfully!","Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"top"}),this.showReviewForm=!1,this.reviewForm.reset({rating:5,review:""}),this.isSubmittingReview=!1,this.userHasReviewed=!0,this.loadReviews(this.book._id||this.book.id,1),this.loadBook(this.book._id||this.book.id)},error:e=>{console.error("Error submitting review:",e);let l=e.error?.error||e.error?.message||e.message||"Failed to submit review";this.snackBar.open(l,"Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top"}),this.isSubmittingReview=!1}})}isAuthenticated(){return this.authService.isAuthenticated()}static \u0275fac=function(e){return new(e||t)(x(H),x(G),x(de),x(y),x(C),x(pe),x(J),x(ne))};static \u0275cmp=D({type:t,selectors:[["app-book-detail"]],standalone:!1,decls:6,vars:4,consts:[["class","container py-5",4,"ngIf"],[1,"container","py-5"],[1,"text-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-3"],["role","alert",1,"alert","alert-danger"],[1,"alert-heading"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-outline-secondary","mb-4",3,"click"],[1,"bi","bi-arrow-left"],[1,"row","g-5"],[1,"col-12","col-md-5"],[1,"book-image-container","position-relative"],[1,"img-fluid","rounded","shadow-lg","w-100",2,"max-height","700px","object-fit","cover",3,"src","alt"],["class","book-badge position-absolute top-0 end-0 m-3",4,"ngIf"],[1,"col-12","col-md-7"],[1,"display-5","fw-bold","mb-3","text-dark"],[1,"mb-3"],[1,"text-muted","mb-0"],[1,"bi","bi-person","me-2"],[4,"ngIf"],["class","mb-4",4,"ngIf"],[1,"mb-4"],[1,"d-flex","align-items-baseline","gap-3","mb-2"],[1,"text-danger","fw-bold","mb-0"],["class","text-decoration-line-through text-muted fs-5",4,"ngIf"],["class","badge bg-success fs-6 px-3 py-2",4,"ngIf"],["class","badge bg-danger fs-6 px-3 py-2",4,"ngIf"],[1,"mb-5"],[1,"d-flex","gap-3","flex-wrap"],["mat-raised-button","",1,"px-5","py-3","bg-danger","text-white","border-0",2,"font-size","1.1rem",3,"click","disabled"],[1,"bi","bi-cart-plus","me-2"],["mat-stroked-button","",1,"px-5","py-3","border-danger","text-danger",2,"font-size","1.1rem"],[1,"bi","bi-heart","me-2"],[1,"card","border-0","shadow-sm","mb-4"],[1,"card-body","p-4"],[1,"card-title","fw-bold","mb-4"],[1,"row","g-3"],["class","col-6",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"card","border-0","bg-light"],[1,"row","g-4","text-center"],[1,"col-6","col-md-3"],[1,"bi","bi-truck","fs-3","text-danger","mb-2","d-block"],[1,"small","fw-semibold"],[1,"bi","bi-shield-check","fs-3","text-danger","mb-2","d-block"],[1,"bi","bi-arrow-repeat","fs-3","text-danger","mb-2","d-block"],[1,"bi","bi-headset","fs-3","text-danger","mb-2","d-block"],[1,"reviews-section"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"fw-bold","mb-0"],["mat-raised-button","","color","primary","class","d-flex align-items-center gap-2",3,"click",4,"ngIf"],["mat-stroked-button","","class","d-flex align-items-center gap-2",3,"click",4,"ngIf"],["class","card border-primary mb-4",4,"ngIf"],["class","review-summary",4,"ngIf"],["class","text-center py-5",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],["class","reviews-list",4,"ngIf"],["class","pagination-nav",4,"ngIf"],[1,"book-badge","position-absolute","top-0","end-0","m-3"],[1,"badge","bg-danger","fs-6","px-3","py-2"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],[1,"text-warning","me-2"],["class","bi bi-star-fill fs-5",4,"ngFor","ngForOf"],["class","bi bi-star fs-5",4,"ngFor","ngForOf"],[1,"me-2","fw-semibold"],[1,"text-muted"],[1,"bi","bi-star-fill","fs-5"],[1,"bi","bi-star","fs-5"],[1,"text-decoration-line-through","text-muted","fs-5"],[1,"badge","bg-success","fs-6","px-3","py-2"],[1,"bi","bi-check-circle","me-1"],[1,"bi","bi-x-circle","me-1"],[1,"fw-bold","mb-3"],[1,"text-muted","lh-lg"],[1,"col-6"],[1,"detail-item"],[1,"text-muted","small","mb-1","d-block"],[1,"fw-semibold"],[1,"col-12"],["class","me-2",4,"ngFor","ngForOf"],[1,"me-2"],[1,"badge","bg-secondary","px-3","py-2"],["mat-raised-button","","color","primary",1,"d-flex","align-items-center","gap-2",3,"click"],[1,"bi","bi-pencil-square"],["mat-stroked-button","",1,"d-flex","align-items-center","gap-2",3,"click"],[1,"card","border-primary","mb-4"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-label","fw-semibold"],[1,"text-danger"],[1,"rating-input"],["type","button","class","btn btn-link p-0 me-1",3,"text-warning","text-muted","click",4,"ngFor","ngForOf"],[1,"ms-2","text-muted"],["class","text-danger small mt-1",4,"ngIf"],["for","reviewText",1,"form-label","fw-semibold"],["id","reviewText","rows","4","formControlName","review","placeholder","Share your thoughts about this book...",1,"form-control"],[1,"d-flex","gap-2"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],["type","button","mat-stroked-button","",3,"click","disabled"],["type","button",1,"btn","btn-link","p-0","me-1",3,"click"],[1,"bi","bi-star-fill","fs-3"],[1,"text-danger","small","mt-1"],["role","status",1,"spinner-border","spinner-border-sm","me-2"],[1,"review-summary"],[1,"row","align-items-center"],[1,"col-md-4","text-center"],[1,"display-4","fw-bold","mb-0"],[1,"col-md-8"],[1,"d-flex","align-items-center","mb-2"],["class","bi bi-star-fill",4,"ngFor","ngForOf"],["class","bi bi-star",4,"ngFor","ngForOf"],[1,"bi","bi-star-fill"],[1,"bi","bi-star"],[1,"text-center","py-5"],[1,"alert","alert-warning"],[1,"bi","bi-exclamation-triangle-fill","me-2"],[1,"bi","bi-chat-square-text","fs-1","text-muted","d-block","mb-3"],[1,"reviews-list"],["class","review-item",4,"ngFor","ngForOf"],[1,"review-item"],[1,"row"],[1,"col-12","col-md-3"],[1,"review-author"],[1,"review-date"],[1,"col-12","col-md-9","mt-3","mt-md-0"],[1,"review-rating","mb-2"],[1,"review-body"],[1,"pagination-nav"],[1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"page-info"],[1,"bi","bi-arrow-right"]],template:function(e,l){e&1&&(m(0,"app-header"),p(1,he,7,0,"div",0)(2,we,9,1,"div",0)(3,rt,78,28,"div",0)(4,at,8,0,"div",0),m(5,"app-footer")),e&2&&(r(),s("ngIf",l.loading),r(),s("ngIf",l.error),r(),s("ngIf",l.book&&!l.loading),r(),s("ngIf",!l.loading&&!l.book&&!l.error))},dependencies:[V,L,ee,Q,X,Z,te,ie,$,ce,me,N],styles:[".book-image-container[_ngcontent-%COMP%]{position:sticky;top:100px}.book-image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:transform .3s ease}.book-image-container[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.02)}.book-badge[_ngcontent-%COMP%]{z-index:10}.detail-item[_ngcontent-%COMP%]{padding:.5rem 0}.detail-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;text-transform:uppercase;letter-spacing:.5px}.detail-item[_ngcontent-%COMP%]   .fw-semibold[_ngcontent-%COMP%]{color:#212529;font-size:1rem}button[mat-raised-button][_ngcontent-%COMP%], button[mat-stroked-button][_ngcontent-%COMP%]{transition:all .3s ease}button[mat-raised-button][_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0003}button[mat-stroked-button][_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 2px 4px #0000001a}.text-warning[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:2px}.badge[_ngcontent-%COMP%]{font-weight:500;letter-spacing:.5px}.card[_ngcontent-%COMP%]{border-radius:12px;transition:box-shadow .3s ease}.card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 16px #0000001a!important}@media (max-width: 768px){.book-image-container[_ngcontent-%COMP%]{position:relative;top:0;margin-bottom:2rem}h1.display-5[_ngcontent-%COMP%]{font-size:2rem}button[mat-raised-button][_ngcontent-%COMP%], button[mat-stroked-button][_ngcontent-%COMP%]{width:100%;margin-bottom:.5rem}}.text-primary[_ngcontent-%COMP%]{color:#dc3545!important}.bg-light[_ngcontent-%COMP%]{background-color:#f8f9fa!important}.shadow-sm[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013!important}.shadow-lg[_ngcontent-%COMP%]{box-shadow:0 1rem 3rem #0000002d!important}.reviews-section[_ngcontent-%COMP%]{border-top:1px solid #dee2e6;padding-top:2.5rem;margin-top:3rem}.review-summary[_ngcontent-%COMP%]{background-color:#f8f9fa;border-radius:.5rem;padding:2rem;margin-bottom:2rem}.review-summary[_ngcontent-%COMP%]   .display-4[_ngcontent-%COMP%]{color:#343a40}.review-summary[_ngcontent-%COMP%]   .text-warning[_ngcontent-%COMP%]{font-size:1.5rem}.review-item[_ngcontent-%COMP%]{border-bottom:1px solid #e9ecef;padding:1.5rem 0}.review-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.review-author[_ngcontent-%COMP%]{font-weight:600;color:#343a40;margin-bottom:.25rem}.review-date[_ngcontent-%COMP%]{font-size:.85rem;color:#6c757d}.review-rating[_ngcontent-%COMP%]   .bi-star-fill[_ngcontent-%COMP%]{color:#ffc107}.review-rating[_ngcontent-%COMP%]   .bi-star[_ngcontent-%COMP%]{color:#e0e0e0}.review-body[_ngcontent-%COMP%]{margin-top:.75rem;line-height:1.6;color:#495057}.pagination-nav[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:2rem}.pagination-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin:0 .5rem;border-color:#dee2e6;color:#0d6efd}.pagination-nav[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{color:#6c757d;border-color:#dee2e6}.pagination-nav[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{margin:0 1rem;font-weight:500;color:#495057}@media (max-width: 576px){.review-summary[_ngcontent-%COMP%]{padding:1.5rem;text-align:center}.review-summary[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}"]})};var lt=[{path:":id",component:I}],ge=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=F({type:t});static \u0275inj=O({imports:[j,oe,re,Y.forChild(lt),ae,W,le,K,se]})};export{ge as BookDetailModule};
