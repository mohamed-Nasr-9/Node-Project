import{a as E}from"./chunk-IOKMDM54.js";import"./chunk-A3XQ6QBT.js";import{a as y}from"./chunk-PVCF6BMT.js";import"./chunk-XYYWDBOZ.js";import"./chunk-OHDIIJHJ.js";import{a as T}from"./chunk-F3W7Q27X.js";import{a as k}from"./chunk-VRDYXINS.js";import{a as P}from"./chunk-PFYPKIY5.js";import"./chunk-AYZZRQ42.js";import"./chunk-C7QE74CK.js";import"./chunk-TPLDUVTZ.js";import"./chunk-X6XPXAWX.js";import"./chunk-L7GH46DH.js";import"./chunk-M7YYPVK7.js";import{B as g,Bb as A,C as a,Cb as R,E as s,Fb as b,Hb as I,Ib as S,Kb as H,Lb as w,O as v,Ob as d,da as M,ea as i,j as u,qa as C,r as f}from"./chunk-DBZ4JVQV.js";var x=[{path:"",loadChildren:()=>import("./chunk-2K3HOQZM.js").then(t=>t.HomeModule)},{path:"book",loadChildren:()=>import("./chunk-VYWUSZRC.js").then(t=>t.BookDetailModule)},{path:"cart",loadChildren:()=>import("./chunk-SYDGLDQR.js").then(t=>t.CartModule)},{path:"dashboard",canActivate:[y],loadChildren:()=>import("./chunk-CTVACPUR.js").then(t=>t.DashboardModule)},{path:"register",loadChildren:()=>import("./chunk-V6P64WCP.js").then(t=>t.RegisterationModule)},{path:"login",loadChildren:()=>import("./chunk-JKCLYNWC.js").then(t=>t.LoginModule)},{path:"password-management",loadChildren:()=>import("./chunk-7YGURLOU.js").then(t=>t.PassowrdmanagementModule)},{path:"account",loadChildren:()=>import("./chunk-NDHAZ2YT.js").then(t=>t.AccountModule)},{path:"author-profile",loadChildren:()=>import("./chunk-74D4OSK2.js").then(t=>t.AuthorProfileModule)},{path:"become-author",loadChildren:()=>import("./chunk-MKVF4IGS.js").then(t=>t.BecomeAuthorModule)},{path:"review-authors",loadChildren:()=>import("./chunk-LCZETKL3.js").then(t=>t.ReviewAuthorsModule)},{path:"about",loadChildren:()=>import("./chunk-O7DASUOA.js").then(t=>t.AboutModule)},{path:"contact",loadChildren:()=>import("./chunk-BQNKHABO.js").then(t=>t.ContactModule)}],n=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=i({type:t});static \u0275inj=a({imports:[d.forRoot(x),d]})};var p=class t{title=v("Angular-Project");static \u0275fac=function(e){return new(e||t)};static \u0275cmp=M({type:t,selectors:[["app-root"]],standalone:!1,decls:1,vars:0,template:function(e,r){e&1&&C(0,"router-outlet")},dependencies:[H],encapsulation:2})};var l=class t{constructor(o,e){this.router=o;this.authService=e}intercept(o,e){let r=localStorage.getItem("authToken")||localStorage.getItem("auth_token");if(r){if(this.authService.isTokenExpired(r))return this.authService.logout(),localStorage.removeItem("authToken"),localStorage.removeItem("auth_token"),localStorage.removeItem("user"),this.router.navigate(["/login"],{queryParams:{expired:"true",returnUrl:this.router.url}}),u(()=>new b({error:{message:"Token expired"},status:401,statusText:"Unauthorized"}));let j=o.clone({setHeaders:{Authorization:`Bearer ${r}`}});return e.handle(j).pipe(f(h=>(h.status===401&&(this.authService.logout(),localStorage.removeItem("authToken"),localStorage.removeItem("auth_token"),localStorage.removeItem("user"),this.router.navigate(["/login"],{queryParams:{expired:"true",returnUrl:this.router.url}})),u(()=>h))))}return e.handle(o)}static \u0275fac=function(e){return new(e||t)(s(w),s(k))};static \u0275prov=g({token:t,factory:t.\u0275fac})};var m=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=i({type:t,bootstrap:[p]});static \u0275inj=a({providers:[{provide:I,useClass:l,multi:!0}],imports:[R,S,n,T,P,E]})};A().bootstrapModule(m,{ngZoneEventCoalescing:!0}).catch(t=>console.error(t));
